{"version":3,"file":"fgta5js-v1.8.5.min.js","sources":["../src/components/Component.mjs","../src/components/Input.mjs","../src/components/Textbox.mjs","../src/components/Numberbox.mjs","../src/components/Checkbox.mjs","../src/components/Datepicker.mjs","../src/components/Timepicker.mjs","../src/components/Combobox.mjs","../src/components/Filebox.mjs","../src/components/Form.mjs","../src/components/MessageBox.mjs","../src/components/Modal.mjs","../src/components/Icons.mjs","../src/components/Gridview.mjs","../src/components/ModuleData.mjs","../src/components/AppManager.mjs","../src/components/Section.mjs","../src/components/Application.mjs","../src/components/SectionCarousell.mjs","../src/components/Dialog.mjs","../src/components/Validators.mjs","../src/main.mjs","../src/components/Button.mjs","../src/components/Dataloader.mjs","../src/components/ActionButton.mjs","../src/components/ApiEndPoint.mjs"],"sourcesContent":["let counter = 0;\n\n\nexport default class Component {\n\tId;\n\tElement;\n\n\tstatic get ACTION_SHOWMENU()  { return 'showmenu' }\n\tstatic get ACTION_SHOWHOME() { return 'showhome' }\n\tstatic get ACTION_APPLICATIONLOADED() { return 'applicationloaded' }\n\n\tconstructor(id) {\n\t\tif (id==undefined) {\n\t\t\tconsole.error('id component belum didefinisikan')\n\t\t}\n\n\t\tconst el =  document.getElementById(id)\n\t\tif (el==null) {\n\t\t\tconsole.error(`element dengan id: '$id' tidak ditemukan di halaman`)\n\t\t}\n\n\t\tthis.Id = id\n\t\tthis.Element = el\n\t}\n\n\tstatic createSvgButton(svg, classname, fn_click) {\n\t\treturn comp_createSvgButton(svg, classname, fn_click)\n\t}\n\n\tstatic generateId() {\n\t\treturn `comp-${++counter}`;\n\t}\n\n\tstatic sleep(ms) {\n \t\treturn new Promise(resolve => setTimeout(resolve, ms))\n\t}\n\n\n\tstatic isMobileDevice() {\n\t\treturn /Mobi|Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n\t}\n\n\tstatic \tisInContainer() {\n\t\treturn window.self !== window.top;\n\t}\n\n}\n\n\nfunction comp_createSvgButton(svg, classname, fn_click) {\n\tconst btn = document.createElement('a')\n\tbtn.innerHTML = svg\n\n\tif (classname!='' && classname !=null) {\n\t\tbtn.classList.add(classname)\n\t}\n\t\n\tbtn.setAttribute('tabindex', '-1')\n\tbtn.setAttribute('href', 'javascript:void(0)')\n\n\tif (typeof fn_click === 'function') {\n\t\tbtn.addEventListener('click', (evt)=>{\n\t\t\tfn_click(evt)\n\t\t})\n\t}\n\t\n\n\treturn btn\n}\n","import Component from \"./Component.mjs\"\n\nexport default class Input extends Component {\n\t/* Construct Input */\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tinput_construct(this, id)\n\t\tthis._readValidators()\n\t}\n\t\n\t/* mengembalikan nama class contructor, misalnya 'Textbox' */\n\tget type() { return this.constructor.name }\n\n\n\tget value() { return this.Element.value }\n\tset value(v) { this.Element.value = v }\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { this.Element.disabled = v }\n\n\tget placeholder() { return this.Element.getAttribute('placeholder') }\n\tset placeholder(v) { this.Element.setAttribute('placeholder', v) }\n\n\t#_form\n\tget Form() { return this.#_form }\n\tbindForm(form) { this.#_form = form }\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) { \n\t\tthis.#_ineditmode = ineditmode \n\t}\n\t\n\t#invalidMessages = {}\n\tget InvalidMessages() { return this.#invalidMessages }\n\t_readValidators() {\n\t\tlet input = this.Element\n\t\tvar prefix = 'invalid-message'\n\t\tArray.from(input.attributes).forEach(attr => {\n\t\t\tif (attr.name.startsWith(prefix)) {\n\t\t\t\tvar key = attr.name === prefix ? \"default\" : attr.name.replace(`${prefix}-`, \"\");\n\t\t\t\tthis.#invalidMessages[key] = attr.value;\n\t\t\t}\n\t\t});\n\t\tinput_readValidators(this)\n\t}\n\n\n\tnewData(initialvalue) {\n\t\tinput_newData(this, initialvalue)\n\t}\n\n\tacceptChanges() {\n\t\tinput_acceptChanges(this)\n\t}\n\t\n\treset() {\n\t\tinput_reset(this)\n\t}\n\t\n\tisChanged() { \n\t\treturn input_isChanged(this)\n\t}\n\n\t#lasterror\n\t_setLastError(msg) {\n\t\tthis.#lasterror = msg\n\t}\t\n\n\tgetLastError() {\n\t\treturn this.#lasterror\n\t}\n\n\tsetError(msg) {\n\t\tinput_setError(this, msg)\n\t}\n\n\t_setLastValue(v) {\n\t\tinput_setLastValue(this, v)\n\t}\n\n\t#lastvalue\n\tgetLastValue() {\n\t\treturn input_getLastValue(this)\n\t} \n\n\n\tgetBindingData() {\n\t\tvar binding = this.Element.getAttribute('binding')\n\t\tif (binding === null) {\n\t\t\treturn null\n\t\t} else {\n\t\t\treturn binding\n\t\t}\n\t}\n\n\tvalidate() { \n\t\t// console.log(`Validating input '${this.Id}'`)\n\t\treturn input_validate(this) \n\t}\n\n\t#_validators = {}\n\tget Validators() { return this.#_validators }\n\taddValidator(fnName, fnParams, message) {\n\t\tthis.#_validators[fnName] = {\n\t\t\tparam: fnParams,\n\t\t\tmessage: message\n\t\t}\n\t}\n\tremoveValidator(str) {\n\t\tif (this.#_validators[str] !== undefined) {\n\t\t\tdelete this.#_validators[str]\n\t\t}\t\t\t\n\t}\n\tclearValidators() {\n\t\tthis.#_validators = {}\n\t}\n\treadValidators() {\n\t\tinput_readValidators(this)\n\t}\n\n\n\t_setupDescription() {\n\t\tvar description = this.Element.getAttribute('description')\n\t\tif (description !== null && description.trim() !== '') {\n\t\t\tdescription = description.trim()\n\t\t\tconst decrdiv = document.createElement('div')\n\t\t\tdecrdiv.classList.add('fgta5-entry-description')\n\t\t\tdecrdiv.innerHTML = description\n\t\t\tthis.Nodes.Container.appendChild(decrdiv)\n\t\t}\t\t\n\t}\n\n\t#isrequired = false\n\tisRequired() { return this.#isrequired}\n\tmarkAsRequired(r) {\n\t\tthis.#isrequired = r\n\t\tinput_markAsRequired(this, r)\n\t}\n\n\n\taddEventListener(evt, callback) {\n\t\tthis.Listener.addEventListener(evt, callback)\n\t}\n\n\n\t#handlers = {}\n\tget Handlers() { return this.#handlers }\n\thandle(name, fn) {\n\t\tthis.#handlers[name] = fn\n\t}\n\n\n\tgetErrorValidation(fnName) {\n\t\treturn input_getErrorValidation(this, fnName)\n\t}\n\n\n}\n\nfunction input_construct(self, id) {\n\tconst container = document.createElement('div')\n\tconst lastvalue = document.createElement('input')\n\n\tlastvalue.setAttribute('type', 'hidden') \n\tlastvalue.classList.add('fgta5-entry-lastvalue')\n\n\tcontainer.classList.add('fgta5-entry-container')\n\n\tself.InitialValue = '';\n\n\tself.Element.getInputCaption = () => {\n\t\treturn self.Id;\n\t}\n\n\tself.Listener = new EventTarget()\n\tself.Nodes = {\n\t\tInput: self.Element,\n\t\tContainer: container,\n\t\tLastValue: lastvalue,\n\t}\n\n\n}\n\n\nfunction input_setError(self, msg) {\n\tvar errdiv = self.Nodes.Container.querySelector('.fgta5-entry-error')\n\tif (msg!== null && msg !== '') {\n\t\tself.Nodes.Input.setAttribute('invalid', 'true')\n\t\tif (!errdiv) {\n\t\t\t errdiv = document.createElement('div')\n\t\t\t errdiv.classList.add('fgta5-entry-error')\n\t\t\t self.Nodes.Container.insertBefore(errdiv, self.Nodes.InputWrapper.nextSibling)\n\t\t}\n\t\terrdiv.innerHTML = msg\n\t\tself._setLastError(msg)\n\t} else {\n\t\tself.Nodes.Input.removeAttribute('invalid')\n\t\tif (errdiv) {\n\t\t\terrdiv.remove()\n\t\t}\n\t\tself._setLastError(null)\n\t}\n}\n\n\nfunction input_setLastValue(self, v) {\n\tself.Nodes.LastValue.value = v\n}\n\nfunction input_getLastValue(self) {\n\treturn self.Nodes.LastValue.value\n}\n\nfunction input_newData(self, initialvalue) {\n\tself.value = initialvalue\n\tself.acceptChanges()\n}\n\nfunction input_acceptChanges(self) {\n\tself._setLastValue(self.Nodes.Input.value)\n\tself.Nodes.Input.removeAttribute('changed')\n\tself.setError(null)\n}\n\nfunction input_reset(self) {\n\tself.Nodes.Input.value = self.Nodes.LastValue.value\n\tself.acceptChanges()\n}\n\nfunction input_isChanged(self) {\n\t// bandingkan nilai last value dan input value\n\t// bandingkan langsung dari nilai yang ada di element, jangan gunakan self.getLastValue dan self.value\n\t// karena nilai dari properti self.value dan method getLastValue bisa di modif sesuai tipe component\n\tif (self.Nodes.LastValue.value != self.Nodes.Input.value) {\n\t\tconsole.log(`Input '${self.Id}' is changed from '${self.Nodes.LastValue.value}' to '${self.Nodes.Input.value}'`)\n\t\treturn true\n\t} else {\n\t\treturn false\n\t}\n}\n\n\nfunction input_getErrorValidation(self, fnName) {\n\tconst validatorData = self.Validators[fnName]\n\tconst fnValidate = $validators[fnName] ?? $validators.getCustomValidator(fnName);\n\tconst fnParams = validatorData.param;\n\tconst fnMessage = validatorData.message;\n\tconst input = self.Nodes.Input\n\n\ttry {\n\t\tif (typeof fnValidate !== 'function') {\n\t\t\tvar err = new Error(`Validator function '${fnName}' is not defined or not a function`)\n\t\t\tconsole.error(err);\n\t\t\tthrow err\n\t\t}\n\n\t\tvar valid = fnValidate(input.value, fnParams)\n\t\tif (!valid) {\n\t\t\tvar defmsg = self.InvalidMessages['default']\n\t\t\tif (fnMessage!=null) {\n\t\t\t\tthrow new Error(fnMessage)\n\t\t\t} else if (defmsg != null) {\n\t\t\t\tthrow new Error(defmsg)\n\t\t\t} else {\n\t\t\t\tthrow new Error( `Invalid value '${input.value}' for '${input.getInputCaption()}' using validator '${fnName}(${fnParams??''})'` )\n\t\t\t}\n\t\t}\n\t\treturn null\n\t} catch(err) {\n\t\treturn err\n\t}\n}\n\n\nfunction input_validate(self) {\n\t// prioritas untama untuk proses validasi adalah required\n\t// jalankan validasi required dulu,\n\t// baru kemudian loop validasi yang lain, tapi kemudian skip required karena telah dieksekusi\n\n\tconst vnamereq = 'required'\n\tif (self.Validators[vnamereq]!=null) {\n\t\tvar err = input_getErrorValidation(self, vnamereq) // prioritas utama untuk validasi\n\t\tif (err!=null) {\n\t\t\tself.setError(err.message)\n\t\t\treturn false\n\t\t}\n\t}\n\n\t// lanjutkan untuk validasi berikutnya\n\tfor (const fnName in self.Validators) {\n\t\tif (fnName==vnamereq) {\n\t\t\tcontinue\n\t\t}\n\t\tvar err = input_getErrorValidation(self, fnName) \n\t\tif (err!=null) {\n\t\t\tself.setError(err.message)\n\t\t\treturn false\n\t\t}\n\t}\n\n\tself.setError(null)\n\treturn true\n}\n\n\nfunction clearTime(dt) {\n\tdt.setHours(0)\n\tdt.setMinutes(0)\n\tdt.setSeconds(0)\n}\n\nfunction input_readValidators(self) {\n\tconst cname = self.Nodes.Input.getAttribute('fgta5-component')\n\tvar attrname = ''\n\n\tattrname = 'minlength'\n\tvar minlength = self.Nodes.Input.getAttribute(attrname)\n\tif (minlength != null) {\n\t\tminlength = parseInt(minlength)\n\t\tif (!isNaN(minlength)) {\n\t\t\tself.addValidator(attrname, minlength, self.InvalidMessages[attrname])\n\t\t}\n\t}\n\n\tattrname = 'maxlength'\n\tvar maxlength = self.Nodes.Input.getAttribute(attrname)\n\tif (maxlength != null) {\n\t\tmaxlength = parseInt(maxlength)\n\t\tif (!isNaN(maxlength)) {\n\t\t\tself.addValidator(attrname, maxlength, self.InvalidMessages[attrname])\n\t\t}\n\t}\n\n\tattrname = 'pattern'\n\tvar pattern = self.Nodes.Input.getAttribute(attrname)\n\tif (pattern != null) {\n\t\tif (pattern.trim() !== '') {\n\t\t\tself.addValidator('pattern', pattern, self.InvalidMessages[attrname])\n\t\t}\n\t}\n\n\n\tattrname = 'min'\n\tvar min = self.Nodes.Input.getAttribute(attrname)\n\tif (min != null) {\n\t\tvar msg = self.InvalidMessages[attrname]\n\t\tif (cname==\"Datepicker\") {\n\t\t\tvar mindate = new Date(min)\n\t\t\tclearTime(mindate)\n\t\t\tself.addValidator('mindate', mindate, msg)\n\t\t} else if (cname==\"Timepicker\") {\n\t\t\tvar mintime = min\n\t\t\tself.addValidator('mintime', mintime, msg)\n\t\t} else {\n\t\t\tmin = parseInt(min)\n\t\t\tif (!isNaN(min)) {\n\t\t\t\tself.addValidator(attrname, min, msg)\n\t\t\t}\n\t\t}\n\t}\n\n\tattrname = 'max'\n\tvar max = self.Nodes.Input.getAttribute(attrname)\n\tif (max != null) {\n\t\tvar msg = self.InvalidMessages[attrname]\n\t\tif (cname==\"Datepicker\") {\n\t\t\tvar maxdate = new Date(max)\n\t\t\tclearTime(maxdate)\n\t\t\tself.addValidator('maxdate', maxdate, msg)\n\t\t} else if (cname==\"Timepicker\") {\n\t\t\tvar maxtime = max\n\t\t\tself.addValidator('maxtime', maxtime, msg)\n\t\t} else {\n\t\t\tmax = parseInt(max)\n\t\t\tif (!isNaN(max)) {\n\t\t\t\tself.addValidator(attrname, max, msg)\n\t\t\t}\n\t\t}\n\t}\n\n\n\tvar validator = self.Nodes.Input.getAttribute('validator')\n\tif (validator != null && validator.trim() !== '') {\n\t\tvalidator = validator.split(';')\n\t\tfor (var i=0; i<validator.length; i++) {\n\t\t\tvar str = validator[i].trim()\n\t\t\tvar { fnName, fnParams } = parseFunctionParam(self, str)\n\t\t\tself.addValidator(fnName, fnParams, self.InvalidMessages[fnName])\n\t\t}\n\t}\n}\n\n\nfunction parseFunctionParam(self, paramString) {\n\tconst [fnName, ...fnParams] = paramString.split(\":\");\n\tconst fnParamsString = fnParams.length > 0 ? fnParams.join(\":\") : null;\n\t\n\treturn {\n\t\tfnName,\n\t\tfnParams: fnParamsString !== null \n\t\t\t? (!isNaN(fnParamsString) ? Number(fnParamsString) : fnParamsString) \n\t\t\t: null\n\t};\n}\n\n\nfunction input_markAsRequired(self, required) {\n\tvar attrname = 'required'\n\tvar label = self.Nodes.Label;\n\tif (label!=null && label !=undefined) {\n\t\tif (required) {\n\t\t\tself.Nodes.Label.setAttribute(attrname, '')\n\t\t\tself.Nodes.Input.setAttribute(attrname, '')\n\t\t\tself.addValidator(attrname, null, self.InvalidMessages[attrname])\n\t\t} else {\n\t\t\tself.Nodes.Label.removeAttribute(attrname)\n\t\t\tself.Nodes.Input.removeAttribute(attrname)\n\t\t\tself.removeValidator(attrname)\n\t\t}\n\t}\n}","import Input from \"./Input.mjs\"\n\nconst InputEvent = (data)=>{ return new CustomEvent('input', data) }\nconst BlurEvent = (data)=>{ return new CustomEvent('blur', data) }\nconst KeydownEvent = (data)=> { return new KeyboardEvent('keydown', data) }\n\n\n\n\nexport default class Textbox extends Input {\n\n\tconstructor(id) {\n\t\tsuper(id)\n\t\ttxt_construct(this, id)\n\t}\n\n\tget value() { return txt_GetValue(this) }\n\tset value(v) { txt_SetValue(this, v) }\n\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\ttxt_setEditingMode(this, ineditmode)\n\t}\n\n\tnewData(initialvalue) {\n\t\tsuper.newData(initialvalue)\n\t}\n\n\tgetLastValue() {\n\t\treturn txt_getLastValue(this)\n\t} \n\n\tisChanged() { \n\t\treturn txt_isChanged(this)\n\t}\n\n\tfocus() {\n\t\tthis.Nodes.Input.focus()\n\t}\n\n}\n\n\n\nfunction txt_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\t\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(input)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(lastvalue)\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Textbox')\n\tcontainer.setAttribute('input-id', id)\n\tif (input.style.width!='') {\n\t\tcontainer.style.width = input.style.width\n\t}\n\tif (input.style.marginTop!='') {\n\t\tcontainer.style.marginTop = input.style.marginTop\n\t\tinput.style.marginTop = ''\n\t}\n\tif (input.style.marginBottom!='') {\n\t\tcontainer.style.marginBottom = input.style.marginBottom\n\t\tinput.style.marginBottom=''\n\t}\n\tif (input.style.marginLeft!='') {\n\t\tcontainer.style.marginLeft = input.style.marginLeft\n\t\tinput.style.marginLeft=''\n\t}\n\tif (input.style.marginRight!='') {\n\t\tcontainer.style.marginRight = input.style.marginRight\n\t\tinput.style.marginRight=''\n\t}\n\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\n\n\t// setup input\n\tinput.classList.add('fgta5-entry-input')\n\tinput.getInputCaption = () => {\n\t\tif (label!=null) {\n\t\t\treturn label.innerHTML\n\t\t} else {\n\t\t\treturn input.getAttribute('placeholder')\n\t\t}\n\t}\n\tconst nonFgtaClasses = Array.from(input.classList).filter(className =>\n\t\t!className.startsWith('fgta5-')\n\t);\n\tfor (var classname of nonFgtaClasses) {\n\t\tinput.classList.remove(classname)\n\t\tcontainer.classList.add(classname)\n\t}\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tinput.setAttribute('tabindex', tabIndex)\n\t}\n\n\n\t// label\n\tif (label!=null) {\n\t\tlabel.classList.add('fgta5-entry-label')\n\t}\n\t\n\n\n\t// set input value\n\tself._setLastValue(self.value)\n\n\t// set input description\n\tself._setupDescription()\n\n\t\n\t// aditional property setup\n\t// background\n\tif (input.style.backgroundColor !== '') {\n\t\twrapinput.style.backgroundColor = input.style.backgroundColor\n\t\tinput.style.backgroundColor = 'transparent'\n\t}\n\n\t// character casing\n\tvar charCase = input.getAttribute('character-case') \n\tif (charCase !== null && charCase.trim() !== '') {\n\t\tinput.charCase = charCase.trim().toLowerCase()\n\t}\n\n\t// required field\n\tvar required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\n\t// internal event listener\n\tinput.addEventListener(\"input\", (evt)=>{\n\t\tself.Listener.dispatchEvent(InputEvent({}))\n\t\t\n\t\t// jika tidak ada form, tidak ada perubahan change notifications\n\t\tif (self.Form==null) {\n\t\t\treturn\n\t\t}\n\n\t\tif (self.getLastValue() != self.value) {\n\t\t\tinput.setAttribute('changed', 'true')\n\t\t} else {\n\t\t\tinput.removeAttribute('changed')\n\t\t}\n\t})\n\n\tinput.addEventListener('blur', (evt)=> {\n\t\ttxt_blur(self, evt)\n\t\tself.Listener.dispatchEvent(BlurEvent({}))\n\t})\t\n\n\tinput.addEventListener('keydown', (evt)=>{\n\t\tconst e = KeydownEvent({\n\t\t\tcancelable: true,\n\t\t\tkey: evt.key,\n\t\t\tcode: evt.code,\n\t\t\tctrlKey: evt.ctrlKey,\n\t\t\taltKey: evt.altKey,\n\t\t\tshiftKey: evt.shiftKey,\n\t\t\tsrcElement: evt.srcElement,\n\t\t\ttarget: evt.target\n\t\t})\n\t\tself.Listener.dispatchEvent(e)\n\n\t\tif (e.defaultPrevented) {\n\t\t\tevt.preventDefault()\n\t\t}\n\t})\n\t\n}\n\nfunction txt_getValueCased(self, v) {\n\tvar value = v\n\tvar input = self.Nodes.Input\n\tif (input.charCase === 'uppercase') {\n\t\tvalue = v.toUpperCase()\n\t} else if (input.charCase === 'lowercase') {\n\t\tvalue = v.toLowerCase()\n\t}\n\treturn value\n}\n\n\nfunction txt_GetValue(self) {\n\tvar input = self.Nodes.Input\n\tvar value = txt_getValueCased(self, input.value)\n\treturn value\n}\n\nfunction txt_SetValue(self, v) {\n\tif (v===null || v===undefined) {\n\t\tv=''\n\t}\n\tself.Element.value = txt_getValueCased(self, v)\n}\n\n\n\nfunction txt_isChanged(self) {\n\tvar lastvalue = self.getLastValue()\n\tvar currentvalue = self.value\n\tif (currentvalue!=lastvalue) {\n\t\tconsole.log(`Textbox '${self.Id}' is changed from '${lastvalue}' to '${currentvalue}'`)\n\t\treturn true\n\t} else {\n\t\treturn false\n\t}\n}\n\nfunction txt_getLastValue(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\treturn txt_getValueCased(self, lastvalue)\n}\n\nfunction txt_setEditingMode(self, ineditmode) {\n\tvar attrval = ineditmode ? 'true' : 'false'\n\tself.Nodes.Input.setAttribute('editmode', attrval)\n\tself.Nodes.InputWrapper.setAttribute('editmode', attrval)\n\n\tif (ineditmode) {\n\t\tself.Nodes.Input.removeAttribute('readonly')\n\t} else {\n\t\tself.Nodes.Input.setAttribute('readonly', 'true')\n\t\tself.setError(null)\n\t}\n}\n\n\nfunction txt_blur(self, e) {\n\tif (self.InEditMode) {\n\t\tself.setError(null)\n\t\tself.validate()\n\t}\n}\n\n","import Input from \"./Input.mjs\"\n\n\nconst ChangeEvent = (data)=>{ return new CustomEvent('change', data) }\n\n\nexport default class Numberbox extends Input {\n\n\tconstructor(id) {\n\t\tsuper(id)\n\n\n\t\t// default formatter angka\n\t\t// apabila akan diubah, lakukan di fungsi: nmb_formatValue(self, value)\n\t\tthis.formatterFixed = new Intl.NumberFormat('en-US', {\n\t\t\tminimumFractionDigits: 2,\n\t\t\tmaximumFractionDigits: 2,\n\t\t\tuseGrouping: true // apakah akan di group per ribuan\n\t\t});\n\n\t\tnmb_construct(this, id)\n\t}\n\n\tget value() { return nmb_getValue(this) }\n\tset value(v) { nmb_setValue(this, v) }\n\t\t\n\t\t\n\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\tnmb_setDisabled(this, v)\n\t}\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\tnmb_setEditingMode(this, ineditmode)\n\t}\n\n\n\tnewData(initialvalue) {\n\t\tif (initialvalue===undefined || initialvalue===null) {\n\t\t\tinitialvalue = 0\n\t\t}\n\t\tsuper.newData(initialvalue)\n\t}\n\n\n\tacceptChanges() {\n\t\tsuper.acceptChanges()\n\t\tnmb_acceptChanges(this)\n\t\t\n\t}\n\n\treset() {\n\t\tsuper.reset()\n\t\tnmb_Reset(this)\n\t}\n\n\tsetError(msg) {\n\t\tsuper.setError(msg)\n\t\tnmb_setError(this, msg)\n\t}\n\n\n\tgetLastValue() {\n\t\treturn nmb_getLastValue(this)\n\t} \n\n\n\tfocus() {\n\t\tthis.Nodes.Display.focus()\n\t}\n}\n\n\n\nfunction nmb_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst display = document.createElement('input')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(display)\n\twrapinput.appendChild(input)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(lastvalue)\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\tself.Nodes.Display = display\n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Numberbox')\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\t\n\t\n\t// precission and step\n\tconst {precision, step} = getPrecission(self.Element.getAttribute('precision'))\n\tself.formatterFixed.minimumFractionDigits = precision\n\tself.formatterFixed.maximumFractionDigits = precision  // minimum dan maksimum jumlah angka di belakang koma di set sama\n\n\n\n\n\t// setup input\n\tinput.classList.add('fgta5-entry-input')\n\tinput.maxlength = input.getAttribute('maxlength') \n\tinput.precision = precision\n\tinput.setAttribute('type', 'hidden')\n\tinput.setAttribute('step', step)\n\tinput.getInputCaption = () => { return label.innerHTML }\n\t\n\n\t// setup display\n\tdisplay.id = self.Id + '-display'\n\tdisplay.min = input.min\n\tdisplay.max = input.max\n\tdisplay.maxlength = input.maxlength\n\tdisplay.required = input.required\n\tdisplay.value = self.formatterFixed.format(input.value)\n\tdisplay.classList.add('fgta5-entry-display')\n\tdisplay.setAttribute('precision', precision)\n\tdisplay.setAttribute('step', step)\n\tdisplay.setAttribute('style', input.getAttribute('style') || '')\n\tdisplay.setAttribute('type', 'text')\n\tdisplay.setAttribute('fgta5-component', 'Numberbox')\n\tdisplay.setAttribute('autocomplete', 'off')\n\t\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tdisplay.setAttribute('tabindex', tabIndex)\n\t}\n\n\tconst dis = input.getAttribute('disabled')\n\tif (dis!=null) {\n\t\tnmb_setDisabled(self, true)\n\t}\n\n\tconst digitgrouping = input.getAttribute('digitgrouping') \n\tif (digitgrouping!=null) {\n\t\tif (digitgrouping.toLowerCase()==='false') {\n\t\t\tself.formatterFixed.useGrouping=false\n\t\t} else {\n\t\t\tself.formatterFixed.useGrouping=true\n\t\t}\n\t}\n\n\n\t// label\n\tlabel.setAttribute('for', display.id)\n\tlabel.classList.add('fgta5-entry-label')\n\n\n\t// additional property setup\n\tvar required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\n\tif (input.value === null || input.value === '') {\n\t\tinput.value = 0\n\t}\n\n\tself._setLastValue(input.value)\n\tself._setupDescription()\n\n\n\t// internal event listener\n\tdisplay.addEventListener('focus', (e)=>{\n\t\tnmb_displayFocus(self, e)\n\t})\n\n\tdisplay.addEventListener('blur', (e)=>{\n\t\tnmb_displayBlur(self, e)\n\t})\n\n\tdisplay.addEventListener(\"input\", (e)=>{\n\t\tif (display.value !== lastvalue.value) {\n\t\t\tdisplay.setAttribute('changed', 'true')\n\t\t} else {\n\t\t\tdisplay.removeAttribute('changed')\n\t\t}\n\t})\n\n\tdisplay.addEventListener(\"keydown\", (e)=>{\n\t\tif (display.type === \"number\" && (e.key === \"ArrowUp\" || e.key === \"ArrowDown\")) {\n        \te.preventDefault();\n    \t}\n\t})\n\n\n\t// batasi panjang entri data sesuai maxlength yang di set\n\tvar maxlegth = display.maxlength\n\tif (maxlegth !== null && maxlegth.trim() !== '') {\n\t\tmaxlegth = parseInt(maxlegth.trim())\n\t\tif (!isNaN(maxlegth) && maxlegth > 0) {\n\t\t\tdisplay.addEventListener('beforeinput', (e)=>{\n\t\t\t\tif (e.target.value.length >= maxlegth && e.inputType !== \"deleteContentBackward\" && e.inputType !== \"deleteContentForward\") {\n\t\t\t\t\te.preventDefault()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n}\n\n\nfunction getPrecission(precision) {\n\t// var precision = self.Element.getAttribute('precision')\n\tif (precision !== null && precision.trim() !== '') {\n\t\tprecision = parseInt(precision.trim())\n\t\tif (isNaN(precision) || precision < 0) {\n\t\t\tprecision = 0\n\t\t}\n\t} else {\n\t\tprecision = 0\n\t}\n\tvar step = Math.pow(10, -precision);\n\n\treturn {\n\t\tprecision: precision,\n\t\tstep: step\n\t}\n}\n\n\nfunction nmb_getValue(self) {\n\tvar num = Number(self.Nodes.Input.value)\n\treturn num\n}\n\n\nfunction nmb_setValue(self, v) {\n\tself.Nodes.Input.value = v\n\n\tif (isNaN(v)) {\n\t\tv = Number(v) // v buka Angka, ubah dulu ke angka\n\t}\n\tvar formattedValue = nmb_formatValue(self, v)\n\tif (self.Nodes.Display.type === 'text') {\n\t\tself.Nodes.Display.value = formattedValue\n\t} else {\n\t\tself.Nodes.Display.value = v\n\t}\n\n\tnmb_markChanged(self)\n}\n\n\nfunction nmb_setDisabled(self, v) {\n\tif (v) {\n\t\tself.Nodes.Display.disabled = true\n\t} else {\n\t\tself.Nodes.Display.disabled = false\n\t}\n}\n\nfunction nmb_setEditingMode(self, ineditmode) {\n\tvar attrval = ineditmode ? 'true' : 'false'\n\n\tself.Nodes.Display.setAttribute('editmode', attrval)\n\tself.Nodes.Input.setAttribute('editmode', attrval)\n\tself.Nodes.InputWrapper.setAttribute('editmode', attrval)\n\n\tif (ineditmode) {\n\t\tself.Nodes.Input.removeAttribute('readonly')\n\t\tself.Nodes.Display.removeAttribute('readonly')\n\t} else {\n\t\tself.Nodes.Input.setAttribute('readonly', 'true')\n\t\tself.Nodes.Display.setAttribute('readonly', 'true')\n\t\tself.setError(null)\n\t}\n}\n\nfunction nmb_displayFocus(self, e) {\n\tvar display = self.Nodes.Display\n\tvar input = self.Nodes.Input\n\t\n\tif (self.InEditMode) {\n\t\tdisplay.setAttribute('type', 'number')\n\t\n\t\tvar num = Number(input.value)\n\t\tdisplay.value = num\n\t}\n}\n\nfunction nmb_displayBlur(self, e) {\n\tvar display = self.Nodes.Display\n\tvar input = self.Nodes.Input\n\t\n\tif (self.InEditMode) {\n\t\tvar num = Number(display.value)\n\t\tif (isNaN(num)) {\n\t\t\tself.Listener.dispatchEvent(ChangeEvent({detail: {invalid:true}}))\n\t\t\tself.setError('Invalid number')\n\t\t} else {\n\t\t\tself.setError(null)\n\t\t\t\n\t\t\tinput.value = num\n\t\t\tvar invalid = !self.validate()\n\t\t\tvar formattedValue = nmb_formatValue(self, num)\n\t\t\tdisplay.setAttribute('type', 'text')\n\t\t\tdisplay.value = formattedValue\n\n\t\t\tself.Listener.dispatchEvent(ChangeEvent({detail: {invalid:invalid, value:num, formatted:formattedValue}}))\n\t\t}\n\n\t}\n}\n\n\nfunction nmb_formatValue(self, value) {\n\tconst formatter = new Intl.NumberFormat('en-US', {\n\t\t\tminimumFractionDigits: self.formatterFixed.minimumFractionDigits,\n\t\t\tmaximumFractionDigits: self.formatterFixed.minimumFractionDigits,\n\t\t\tuseGrouping: self.formatterFixed.useGrouping\n\t});\n\n\tconst formattedValue = formatter.format(value)\n\treturn formattedValue\n}\n\nfunction nmb_acceptChanges(self) {\n\tself.Nodes.Display.removeAttribute('changed')\n}\n\nfunction nmb_Reset(self) {\n\tself.value = self.getLastValue()\n}\n\nfunction nmb_setError(self, msg) {\n\tvar display = self.Nodes.Display\n\tif (msg!== null && msg !== '') {\n\t\tdisplay.setAttribute('invalid', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('invalid')\n\t}\n}\n\n\nfunction nmb_markChanged(self) {\n\tvar input = self.Nodes.Input\n\tvar display = self.Nodes.Display\n\t\n\tif (self.value!=self.getLastValue()) {\n\t\tinput.setAttribute('changed', 'true')\n\t\tdisplay.setAttribute('changed', 'true')\n\t} else {\n\t\tinput.removeAttribute('changed')\n\t\tdisplay.removeAttribute('changed')\n\t}\n}\n\nfunction nmb_getLastValue(self) {\n\tvar lastvalue = Number(self.Nodes.LastValue.value)\n\treturn lastvalue\n}\n","import Input from \"./Input.mjs\"\n\n\nconst CheckedEvent = (data)=>{ return new CustomEvent('checked', data) }\nconst UnCheckedEvent = (data)=>{ return new CustomEvent('unchecked', data) }\n\n/*\n* reference:\n* https://moderncss.dev/pure-css-custom-checkbox-style/\n*/\n\n\nexport default class Checkbox extends Input {\n\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tchk_construct(this, id)\n\t}\n\n\tget value() { return chk_getValue(this) }\n\tset value(v) {\n\t\tchk_setValue(this, v)\n\t}\n\n\n\tget disabled() { return chk_getDisabled(this) }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\tchk_setDisabled(this, v)\n\t}\n\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\tchk_setEditingMode(this, ineditmode)\n\t}\n\n\tnewData(initialvalue) {\n\t\tsuper.newData(initialvalue)\n\t\tchk_NewData(this, initialvalue)\n\t}\n\n\tgetLastValue() {\n\t\treturn chk_getLastValue(this)\n\t} \n\n\tisChanged() { \n\t\treturn chk_isChanged(this)\n\t}\n\n\treset() {\n\t\tchk_Reset(this)\n\t}\n\n\t_setLastValue(v) {\n\t\tchk_setLastValue(this, v)\n\t}\n}\n\n\n\nfunction chk_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\tconst checkboxlabel = document.createElement(\"label\")\n\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\n\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\tcheckboxlabel.appendChild(input)\n\tcheckboxlabel.appendChild(document.createTextNode(label.innerHTML))\n\tcontainer.appendChild(checkboxlabel)\n\tcontainer.appendChild(lastvalue)\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.Label = label \n\t\n\t\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Checkbox')\n\n\t// setup input\n\tinput.classList.add('fgta5-checkbox-input')\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tinput.setAttribute('tabindex', tabIndex)\n\t}\n\n\t\n\t// setup checkbox label untuk menampung checkbox\n\tcheckboxlabel.classList.add('fgta5-checkbox')\n\t\n\t\n\t// ganti original label tag menjadi div \n\t// karena label di form harus mereferensi ke input\n\t// sedangkan label di checkbox kita fungsikan sebagai text pada checkbox untuk di klik\n\tvar replLabel = document.createElement('div')\n\treplLabel.innerHTML = \"&nbsp\";\n\treplLabel.style.display = \"inline-block\"\n\treplLabel.setAttribute('label', '')\n\tlabel.parentNode.replaceChild(replLabel, label);\n\n\n\t// inisialisasi last value\n\tself._setLastValue(self.Element.checked)\n\n\n\n\n\tconst dis = input.getAttribute('disabled')\n\tif (dis!=null) {\n\t\tchk_setDisabled(self, true)\n\t}\n\n\t// tambahkan event listener internal\n\tinput.addEventListener('change', (event) => {\n\t\tchk_checkedChanged(self)\t\t\n\t});\n\n}\n\nfunction chk_getDisabled(self) {\n\tvar disabled = self.Nodes.Input.getAttribute('permanent-disabled')\n\tif (disabled === null) {\n\t\treturn false\n\t}\n\tif (disabled === 'true') {\n\t\treturn true\n\t}\n\n\treturn false\n}\n\nfunction chk_setDisabled(self, v) {\n\tvar input = self.Nodes.Input\n\n\tvar editmode = input.getAttribute('editmode')\n\tvar ineditmode = ((editmode==null || editmode=='' || editmode=='false')) ? false : true\n\n\tif (v) {\n\t\tinput.setAttribute('permanent-disabled', 'true')\n\t\tinput.parentNode.setAttribute('permanent-disabled', 'true')\n\t} else {\n\t\tinput.removeAttribute('permanent-disabled')\n\t\tinput.parentNode.removeAttribute('permanent-disabled')\n\t\tif (!ineditmode) {\n\t\t\tinput.disabled = true\t\n\t\t}\n\t}\n}\n\n\nfunction chk_setEditingMode(self, ineditmode) {\n\tvar input = self.Nodes.Input\n\tvar attrval = ineditmode ? 'true' : 'false'\n\tvar permdisattr = input.getAttribute('permanent-disabled')\n\tvar permanentDisabled = ((permdisattr==null || permdisattr=='' || permdisattr=='false')) ? false : true\n\n\tinput.setAttribute('editmode', attrval)\n\tif (ineditmode) {\n\t\tif (permanentDisabled) {\n\t\t\tinput.setAttribute('disabled', 'true')\n\t\t} else {\n\t\t\tinput.removeAttribute('disabled')\n\t\t}\n\t} else {\n\t\tinput.setAttribute('disabled', 'true')\n\t}\n}\n\nfunction chk_setLastValue(self, v) {\n\tvar lastvalue = 1\n\tif (v==='off' || v==='0' || v===0 || v===false) {\n\t\tlastvalue = 0\n\t}\n\tself.Nodes.LastValue.value = lastvalue\n}\n\n\nfunction chk_checkedChanged(self) {\n\tvar input = self.Nodes.Input\n\tinput.value = input.checked ? 1 : 0\n\tif (self.getLastValue() != self.value) {\n\t\tinput.setAttribute('changed', 'true')\n\t} else {\n\t\tinput.removeAttribute('changed')\n\t}\n\n\tif (input.checked) {\n\t\tself.Listener.dispatchEvent(CheckedEvent({}))\n\t} else {\n\t\tself.Listener.dispatchEvent(UnCheckedEvent({}))\n\t}\n}\n\n\nfunction chk_isChanged(self) {\n\tvar lastvalue = self.getLastValue()\n\tvar currentvalue = self.value\n\tif (currentvalue!=lastvalue) {\n\t\t// console.log(`Checkbox '${self.Id}' is changed from '${lastvalue}' to '${currentvalue}'`)\n\t\treturn true\n\t} else {\n\t\treturn false\n\t}\n}\n\n\n\nfunction chk_getBoolValue(v) {\n\tif (v===0||v==='0'||v===false||v===undefined) {\n\t\treturn false\n\t} else {\n\t\treturn true\n\t}\n}\n\n\n\nfunction chk_getValue(self) {\n\treturn self.Element.checked\n}\n\nfunction chk_setValue(self, v) {\n\tvar input = self.Nodes.Input\n\tvar checked = chk_getBoolValue(v)\n\tinput.checked = checked\n\tif (checked) {\n\t\tinput.value = 1\n\t} else {\n\t\tinput.value = 0\n\t}\n\n\tchk_markChanged(self)\n}\n\nfunction chk_getLastValue(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\treturn chk_getBoolValue(lastvalue)\n}\n\nfunction chk_Reset(self) {\n\tvar checked = self.getLastValue()\n\tself.value = checked\n\tself._setLastValue(checked)\n}\n\n\nfunction chk_NewData(self, initialvalue) {\n\tvar checked = chk_getBoolValue(initialvalue)\n\tself.value = checked\n\tself._setLastValue(checked)\n}\n\nfunction chk_markChanged(self) {\n\tvar input = self.Nodes.Input\n\tif (self.value!=self.getLastValue()) {\n\t\tinput.setAttribute('changed', 'true')\n\t} else {\n\t\tinput.removeAttribute('changed')\n\t}\n}","import Input from \"./Input.mjs\"\n\n\nconst button_icon = `<svg transform=\"translate(0 3)\" width=\"12\" height=\"12\" stroke=\"currentColor\" stroke-linecap=\"round\" version=\"1.1\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<rect x=\"1.3095\" y=\"6.6682\" width=\"21.393\" height=\"1.8579\" fill=\"none\" stroke-width=\"2\"/>\n\t\t<rect x=\".81949\" y=\"10\" width=\"22.341\" height=\"13.251\" fill=\"none\" stroke-width=\"1.02\"/>\n\t\t<rect x=\"3.8664\" y=\"1.1531\" width=\"2.5776\" height=\"1.4923\" fill=\"none\" stroke-width=\"2\"/>\n\t\t<rect x=\"17.223\" y=\"1.1203\" width=\"2.5776\" height=\"1.6958\" fill=\"none\" stroke-width=\"2\"/>\n\t\t<path d=\"m1.2888 16.278 21.367-0.13566\" fill=\"none\" stroke-width=\"1.02\"/>\n\t\t<path d=\"m8.2775 10.07-0.13566 12.888\" fill=\"none\" stroke-width=\"1.02\"/>\n\t\t<path d=\"m15.799 9.9671-0.13566 12.888\" fill=\"none\" stroke-width=\"1.02\"/>\n\t\t</svg>`\n\n\n/*\n * https://weblog.west-wind.com/posts/2023/Feb/06/A-Button-Only-Date-Picker-and-JavaScript-Date-Control-Binding\n */\n\nconst ChangeEvent = (data) => { return new CustomEvent('change', data) }\n\n\nexport default class Datepicker extends Input {\n\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tdtp_construct(this, id)\n\t}\n\n\tget value() { return dtp_getValue(this) }\n\tset value(v) { dtp_setValue(this, v) }\n\n\n\tget min() { \n\t\tif (this.Element.min!=\"\") {\n\t\t\tvar dt = new Date(this.Element.min );\n\t\t\treturn dt\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\tset min(v) {\n\t\tif (v instanceof Date) {\n\t\t\tthis.Element.min = v.toISOString().split(\"T\")[0]\n\t\t} else if (typeof v === \"string\") {\n\t\t\tthis.Element.min = v\n\t\t}\n\t}\n\n\tget max() { \n\t\tif (this.Element.max!=\"\") {\n\t\t\tvar dt = new Date(this.Element.max);\n\t\t\treturn dt\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\tset max(v) {\n\t\tif (v instanceof Date) {\n\t\t\tthis.Element.max = v.toISOString().split(\"T\")[0]\n\t\t} else if (typeof v === \"string\") {\n\t\t\tthis.Element.max = v\n\t\t}\n\t}\n\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\tdtp_setDisabled(this, v)\n\t}\n\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\tdtp_setEditingMode(this, ineditmode)\n\t}\n\n\n\n\n\tnewData(initialvalue) {\n\t\tif (initialvalue===undefined || initialvalue===null) {\n\t\t\tinitialvalue = ''\n\t\t}\n\t\t// super.newData(initialvalue)\n\t\tdtp_Newdata(this, initialvalue)\n\t}\n\n\tacceptChanges() {\n\t\tsuper.acceptChanges()\n\t\tdtp_acceptChanges(this)\n\t\t\n\t}\n\n\treset() {\n\t\tsuper.reset()\n\t\tdtp_reset(this)\n\t}\n\n\tsetError(msg) {\n\t\tsuper.setError(msg)\n\t\tdtp_setError(this, msg)\n\t}\n\n\tgetLastValue() {\n\t\treturn dtp_getLastValue(this)\n\t} \n\n\n\tfocus() {\n\t\tthis.Nodes.Display.focus()\n\t}\t\n}\n\nfunction dtp_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst display = document.createElement('input')\n\tconst button = document.createElement('button')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\n\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(display)\n\twrapinput.appendChild(button)\n\tbutton.appendChild(input)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(lastvalue)\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\tself.Nodes.Display = display\n\tself.Nodes.Button = button\n\n\t\n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Datepicker')\n\tif (input.style.width!='') {\n\t\tcontainer.style.width = input.style.width\n\t}\n\tif (input.style.marginTop!='') {\n\t\tcontainer.style.marginTop = input.style.marginTop\n\t\tinput.style.marginTop = ''\n\t}\n\tif (input.style.marginBottom!='') {\n\t\tcontainer.style.marginBottom = input.style.marginBottom\n\t\tinput.style.marginBottom=''\n\t}\n\tif (input.style.marginLeft!='') {\n\t\tcontainer.style.marginLeft = input.style.marginLeft\n\t\tinput.style.marginLeft=''\n\t}\n\tif (input.style.marginRight!='') {\n\t\tcontainer.style.marginRight = input.style.marginRight\n\t\tinput.style.marginRight=''\n\t}\n\t\t\n\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\n\n\n\t// display\n\tdisplay.setAttribute('id', `${id}-display`)\n\tdisplay.setAttribute('type', 'text')\n\tdisplay.setAttribute('fgta5-component', 'Datepicker')\n\tdisplay.setAttribute('readonly', 'true')\n\tdisplay.classList.add('fgta5-entry-display')\n\tdisplay.classList.add('fgta5-entry-display-datepicker')\n\tvar placeholder = input.getAttribute('placeholder')\n\tif (placeholder!=null && placeholder !='') {\n\t\tdisplay.setAttribute('placeholder', placeholder)\n\t}\n\t// var cssclass = input.getAttribute('class')\n\t// if (cssclass!=null && cssclass !='') {\n\t// \tdisplay.setAttribute('class', cssclass)\n\t// }\n\t// var cssstyle = input.getAttribute('style')\n\t// if (cssstyle!=null && cssstyle !='') {\n\t// \tdisplay.setAttribute('style', cssstyle)\n\t// }\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tdisplay.setAttribute('tabindex', tabIndex)\n\t}\n\n\t// main input\n\tconst nonFgtaClasses = Array.from(input.classList).filter(className =>\n\t\t!className.startsWith('fgta5-')\n\t);\n\n\tinput.setAttribute('type', 'date')\n\tinput.removeAttribute('class')\n\tinput.removeAttribute('style')\n\tinput.classList.add('fgta5-entry-input')\n\tinput.classList.add('fgta5-entry-input-datepicker')\n\tinput.getInputCaption = () => {\n\t\tif (label!=null) {\n\t\t\treturn label.innerHTML\n\t\t} else {\n\t\t\treturn input.getAttribute('placeholder')\n\t\t}\n\t}\n\t\n\tfor (var classname of nonFgtaClasses) {\n\t\t// console.log(classname)\n\t\tinput.classList.remove(classname)\n\t\tdisplay.classList.remove(classname)\n\t\tcontainer.classList.add(classname)\n\t}\n\n\n\n\t// picker button\n\tbutton.id = self.Id + '-button'\n\tbutton.insertAdjacentHTML(\"beforeend\", button_icon)\n\tbutton.classList.add('fgta5-entry-button-datepicker')\t\n\n\n\t// label\n\tif (label!=null) {\n\t\tlabel.setAttribute('for', button.id)\n\t\tlabel.classList.add('fgta5-entry-label')\n\t}\n\n\n\tconst dis = input.getAttribute('disabled')\n\tif (dis!=null) {\n\t\tdtp_setDisabled(self, true)\n\t}\n\n\n\t// additional property setup\n\n\t// required\n\tconst required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\tif (input.value != null && input.value != '') {\n\t\tself.value = input.value\n\t\tself._setLastValue(input.value)\n\t\tself.acceptChanges()\n\t}\n\n\t\n\t// set input description\n\tself._setupDescription()\n\n\n\n\t// internal event\n\tinput.addEventListener('change', (e)=>{\n\t\tdtp_changed(self)\n\t})\n\n\n}\n\n\n\nfunction dtp_setDisabled(self, v) {\n\tvar display = self.Nodes.Display\n\tvar inputwrap = self.Nodes.InputWrapper\n\tvar button = self.Nodes.Button\n\t\n\tif (v) {\n\t\tdisplay.disabled = true\n\t\tinputwrap.setAttribute('disabled', 'true')\n\t\tbutton.setAttribute('disabled', 'true')\n\t} else {\n\t\tdisplay.disabled = false\n\t\tinputwrap.removeAttribute('disabled')\n\t\tbutton.removeAttribute('disabled')\n\t}\n}\n\n\nfunction dtp_setEditingMode(self, ineditmode) {\n\tvar attrval = ineditmode ? 'true' : 'false'\n\tvar input = self.Nodes.Input\n\tvar display = self.Nodes.Display\n\tvar inputwrap = self.Nodes.InputWrapper\n\n\tdisplay.setAttribute('editmode', attrval)\n\tinput.setAttribute('editmode', attrval)\n\tinputwrap.setAttribute('editmode', attrval)\n\n\tif (ineditmode) {\n\t\tinput.removeAttribute('readonly')\n\t} else {\n\t\tinput.setAttribute('readonly', 'true')\n\t\tself.setError(null)\n\t}\n}\n\n\nfunction dtp_getValue(self) {\n\tif (self.Nodes.Input.value=='') {\n\t\treturn null\n\t} else {\n\t\treturn dtp_getIsoDateValue(self.Nodes.Input.value) \n\t}\n}\n\n\nfunction dtp_setValue(self, dt) {\n\ttry {\n\n\t\tif (dt!=null) {\n\t\t\tif (dt instanceof Date) {\n\t\t\t\tconst isoformat = dt.toISOString()\n\t\t\t\tconst isodate = isoformat.slice(0, 10)\n\t\t\t\tself.Nodes.Input.value = isodate\n\t\t\t} else {\n\t\t\t\tconst isodate = dt.slice(0, 10)\n\t\t\t\tself.Nodes.Input.value = isodate\n\t\t\t}\n\t\t} else {\n\t\t\tself.Nodes.Input.value = null\n\t\t}\n\t\t\n\n\t\tdtp_setDisplay(self, dt)\n\t\tdtp_markChanged(self)\n\t} catch (err) {\n\t\tthrow err\n\t}\n\n}\n\n\nfunction dtp_Newdata(self, initialvalue) {\n\tself.value = initialvalue\n\tself.acceptChanges()\n}\n\n\nfunction dtp_acceptChanges(self) {\n\tself.Nodes.Display.removeAttribute('changed')\n}\n\nfunction dtp_reset(self) {\n\tvar lastvalue = self.getLastValue()\n\tif (lastvalue==null) {\n\t\tself.value = ''\n\t} else {\n\t\tself.value = lastvalue\n\t}\n}\n\nfunction dtp_changed(self) {\n\tvar input = self.Nodes.Input\n\tdtp_setDisplay(self, input.value)\n\n\t// trigger object change\n\ttry {\n\t\tself.Listener.dispatchEvent(ChangeEvent({\n\t\t\tsender: self,\n\t\t\tdetail: {value:  input.value, sender: self}\n\t\t}))\n\t} catch (err) {\n\t\tconsole.error(err.message)\n\t}\n\t\n\t\n\tdtp_markChanged(self)\n\tif (self.InEditMode) {\n\t\tself.setError(null)\n\t\tself.validate()\n\t}\n}\n\n\nfunction dtp_getIsoDateValue(v) {\n\tvar dt\n\tif (typeof v==='string') {\n\t\tdt = new Date(v)\n\t} else if (v instanceof Date) {\n\t\tdt = v\n\t} \n\treturn dt.toISOString().split(\"T\")[0]\n}\n\n// function dtp_getFormattedValue(isodate) {\n// \tvar date = new Date(isodate);\n//     var options = { day: '2-digit', month: 'short', year: 'numeric' };\n// \tvar formattedDate = date.toLocaleDateString('en-ID', options).replace('.', ''); \n// \treturn formattedDate\n// }\n\n\nfunction dtp_markChanged(self) {\n\tif (self.Form==null) {\n\t\treturn\n\t}\n\n\tvar display = self.Nodes.Display\n\tif (self.value!=self.getLastValue()) {\n\t\tdisplay.setAttribute('changed', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('changed')\n\t}\n}\n\nfunction dtp_setDisplay(self, dtiso) {\n\tvar display = self.Nodes.Display\n\tif (dtiso=='') {\n\t\tdisplay.value = ''\n\t} else {\n\t\tconst date = new Date(dtiso);\n\t\tconst options = { day: '2-digit', month: 'short', year: 'numeric' };\n\t\tconst formattedDate = date.toLocaleDateString('en-ID', options).replace('.', ''); \n\t\tdisplay.value = formattedDate\n\t}\n}\n\n\nfunction dtp_setError(self, msg) {\n\tvar display = self.Nodes.Display\n\tif (msg!== null && msg !== '') {\n\t\tdisplay.setAttribute('invalid', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('invalid')\n\t}\n}\n\nfunction dtp_getLastValue(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\tif (lastvalue=='') {\n\t\treturn null\n\t} else {\n\t\treturn lastvalue\n\t}\n}\n\n","import Input from \"./Input.mjs\"\n\nconst timeRegex = /^([01]\\d|2[0-3]):([0-5]\\d)$/;\n\nconst button_icon = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg transform=\"translate(0 3)\" width=\"12\" height=\"12\" stroke=\"currentColor\" stroke-linecap=\"round\" version=\"1.1\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m12.339 12.142 0.01403-6.5322\" fill=\"none\" stroke-width=\"2\"/>\n<path d=\"m8.4232 14.469 3.7103-1.9861\" fill=\"none\" stroke-width=\"2.4\"/>\n<ellipse cx=\"12.004\" cy=\"11.983\" rx=\"10.102\" ry=\"9.9964\" fill=\"none\" stroke-width=\"2.4\"/>\n</svg>\n\n`\n\n\n/*\n * https://weblog.west-wind.com/posts/2023/Feb/06/A-Button-Only-Date-Picker-and-JavaScript-Date-Control-Binding\n */\nexport default class Timepicker extends Input {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\ttpck_construct(this, id)\n\t}\n\n\tget min() { return this.Element.min }\n\tset min(v) { this.Element.min = v }\n\n\tget max() { return this.Element.max }\n\tset max(v) { this.Element.max = v }\n\n\n\tget value() { return tpck_getValue(this) }\n\tset value(v) { tpck_setValue(this, v) }\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\ttpck_setDisabled(this, v)\n\t}\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\ttpck_setEditingMode(this, ineditmode)\n\t}\n\n\t\n\tnewData(initialvalue) {\n\t\tif (initialvalue=='' || initialvalue==null) {\n\t\t\tinitialvalue = '00:00'\n\t\t}\n\t\tsuper.newData(initialvalue)\n\t\t// tpck_Newdata(this, initialvalue)\n\t}\n\n\tacceptChanges() {\n\t\tsuper.acceptChanges()\n\t\ttpck_acceptChanges(this)\n\t\t\n\t}\n\n\treset() {\n\t\tsuper.reset()\n\t\ttpck_reset(this)\n\t}\n\t\n\n\tsetError(msg) {\n\t\tsuper.setError(msg)\n\t\ttpck_setError(this, msg)\n\t}\n\n\tgetLastValue() {\n\t\treturn tpck_getLastValue(this)\n\t} \n\n\tfocus() {\n\t\tthis.Nodes.Display.focus()\n\t}\t\n}\n\n\n\n\nfunction tpck_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst display = document.createElement('input')\n\tconst button = document.createElement('button')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\t\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(display)\n\twrapinput.appendChild(button)\n\tbutton.appendChild(input)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(lastvalue)\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\tself.Nodes.Display = display\n\tself.Nodes.Button = button\n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Timepicker')\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\n\n\t// display\n\tdisplay.setAttribute('id', `${id}-display`)\n\tdisplay.setAttribute('type', 'text')\n\tdisplay.setAttribute('picker', 'time')\n\tdisplay.setAttribute('fgta5-component', 'Timepicker')\n\tdisplay.setAttribute('readonly', 'true')\n\tdisplay.classList.add('fgta5-entry-display')\n\tdisplay.classList.add('fgta5-entry-display-datepicker')\n\tvar placeholder = input.getAttribute('placeholder')\n\tif (placeholder!=null && placeholder !='') {\n\t\tdisplay.setAttribute('placeholder', placeholder)\n\t}\n\tvar cssclass = input.getAttribute('class')\n\tif (cssclass!=null && cssclass !='') {\n\t\tdisplay.setAttribute('class', cssclass)\n\t}\n\tvar cssstyle = input.getAttribute('style')\n\tif (cssstyle!=null && cssstyle !='') {\n\t\tdisplay.setAttribute('style', cssstyle)\n\t}\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tdisplay.setAttribute('tabindex', tabIndex)\n\t}\n\n\t// main input\n\tinput.setAttribute('type', 'time')\n\tinput.setAttribute('picker', 'time')\n\tinput.removeAttribute('class')\n\tinput.removeAttribute('style')\n\tinput.classList.add('fgta5-entry-input')\n\tinput.classList.add('fgta5-entry-input-datepicker')\n\tinput.getInputCaption = () => {\n\t\treturn label.innerHTML\n\t}\n\n\t\n\t// picker button\n\tbutton.id = self.Id + '-button'\n\tbutton.insertAdjacentHTML(\"beforeend\", button_icon)\n\tbutton.classList.add('fgta5-entry-button-datepicker')\t\n\n\n\t// label\n\tlabel.setAttribute('for', button.id)\n\tlabel.classList.add('fgta5-entry-label')\n\n\n\n\n\t// additional property setup\n\n\t// required field\n\tvar required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\tif (input.value == null || input.value == '') {\n\t\tinput.value = '00:00'\n\t}\n\tself.value = input.value\n\tself._setLastValue(input.value)\n\tself.acceptChanges()\n\n\n\t// set input description\n\tself._setupDescription()\n\n\n\tinput.addEventListener('change', (e)=>{\n\t\ttpck_changed(self)\n\t})\n}\n\n\nfunction tpck_setDisabled(self, v) {\n\tvar display = self.Nodes.Display\n\tvar inputwrap = self.Nodes.InputWrapper\n\tvar button = self.Nodes.Button\n\n\tif (v) {\n\t\tdisplay.disabled = true\n\t\tinputwrap.setAttribute('disabled', 'true')\n\t\tbutton.setAttribute('disabled', 'true')\n\t} else {\n\t\tdisplay.disabled = false\n\t\tinputwrap.removeAttribute('disabled')\n\t\tbutton.removeAttribute('disabled')\n\t}\n}\n\n\nfunction tpck_setEditingMode(self, ineditmode) {\n\tvar attrval = ineditmode ? 'true' : 'false'\n\tvar input = self.Nodes.Input\n\tvar display = self.Nodes.Display\n\tvar inputwrap = self.Nodes.InputWrapper\n\n\tdisplay.setAttribute('editmode', attrval)\n\tinput.setAttribute('editmode', attrval)\n\tinputwrap.setAttribute('editmode', attrval)\n\n\tif (ineditmode) {\n\t\tinput.removeAttribute('readonly')\n\t} else {\n\t\tinput.setAttribute('readonly', 'true')\n\t\tself.setError(null)\n\t}\n}\n\n\nfunction tpck_acceptChanges(self) {\n\tself.Nodes.Display.removeAttribute('changed')\n}\n\nfunction tpck_reset(self) {\n\tvar lastvalue = self.getLastValue()\n\tif (lastvalue==null) {\n\t\tself.value = ''\n\t} else {\n\t\tself.value = lastvalue\n\t}\n}\n\n\nfunction tpck_changed(self) {\n\tvar input = self.Nodes.Input\n\ttpck_setDisplay(self, input.value)\n\t\n\ttpck_markChanged(self)\n\tif (self.InEditMode) {\n\t\tself.setError(null)\n\t\tself.validate()\n\t}\n}\n\n\nfunction tpck_markChanged(self) {\n\tvar display = self.Nodes.Display\n\tif (self.value!=self.getLastValue()) {\n\t\tdisplay.setAttribute('changed', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('changed')\n\t}\n}\n\n\n\nfunction tpck_getValue(self) {\n\tvar input = self.Nodes.Input\n\tif (input.value=='') {\n\t\treturn null\n\t} else {\n\t\treturn input.value\n\t}\n}\n\n\n\nfunction tpck_setValue(self, dt) {\n    if (!timeRegex.test(dt)) {\n\t\tthrow new Error(`invalid HH:ss format for '${dt}'`)\n\t}\n\n\tself.Nodes.Input.value = dt\n\ttpck_setDisplay(self, dt)\n\ttpck_markChanged(self)\n}\n\n\nfunction tpck_setDisplay(self, tm) {\n\tself.Nodes.Display.value = tm\n}\n\nfunction tpck_setError(self, msg) {\n\tvar display = self.Nodes.Display\n\tif (msg!== null && msg !== '') {\n\t\tdisplay.setAttribute('invalid', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('invalid')\n\t}\n}\n\n\nfunction tpck_getLastValue(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\tif (lastvalue=='') {\n\t\treturn null\n\t} else {\n\t\treturn lastvalue\n\t}\n}\n","'use strict';\n\nimport Input from \"./Input.mjs\"\n\nconst SelectedEvent = (data) => { return new CustomEvent('selected', data) }\nconst PopulatingEvent = (data) => { return new CustomEvent('populating', data) }\nconst SelectingEvent = (data) => { return new CustomEvent('selecting', data) }\n\n\nconst icon_cbo_button = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg transform=\"translate(0 3)\" width=\"12\" height=\"12\" stroke-linecap=\"round\" version=\"1.1\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n<path transform=\"matrix(.8169 0 0 -.64538 10.987 14.119)\" d=\"m11.299 11.275h-10.157l-10.157-1e-6 10.157-17.593 5.0786 8.7965z\"/>\n</svg>\n`\n\nconst icon_cbo_close = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg transform=\"translate(0 3)\" width=\"12\" height=\"12\" stroke=\"currentColor\" stroke-linecap=\"round\" version=\"1.1\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m3.5642 20.295 16.853-16.833\" fill=\"none\" stroke-width=\"4\"/>\n<path d=\"m3.5741 3.4523 16.833 16.853\" fill=\"none\" stroke-width=\"4\"/>\n</svg>`\n\n\n\nconst ATTR_EDITMODE = 'editmode'\nconst ATTR_SHOWED = 'showed'\nconst ATTR_REMOVING = 'removing'\nconst ATTR_SELECTED = 'selected'\nconst ATTR_INDEX = 'data-index'\n\nconst DEF_LIMIT = 30\n\nexport default class Combobox extends Input {\n\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tcbo_construct(this, id)\n\t}\n\n\tget value() { return cbo_getValue(this) }\n\tset value(v) {  throw Error('Value is readonly') }\n\n\tget text() { return  cbo_getText(this) }\n\tset text(v) { throw Error('Text is readonly') }\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\tcbo_setDisabled(this, v)\n\t}\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\tcbo_SetEditingMode(this, ineditmode)\n\t}\n\n\tnewData(initialdata) {\n\t\tcbo_newData(this, initialdata)\n\t}\n\n\tacceptChanges() {\n\t\tsuper.acceptChanges()\n\t\tcbo_acceptChanges(this)\n\t}\n\t\n\treset() {\n\t\tcbo_reset(this)\n\t}\n\n\tclear() {\n\t\tcbo_clear(this)\n\t}\n\n\t_setLastValue(v, t) {\n\t\tsuper._setLastValue(v)\n\t\tcbo_setLastValue(this, v, t)\n\t}\n\n\tgetLastValue() {\n\t\treturn cbo_getLastValue(this)\n\t} \n\n\tgetLastText() {\n\t\treturn cbo_getLastText(this)\n\t} \n\n\tsetSelected(value, text) {\n\t\tif (text===undefined || text===null) {\n\t\t\ttext = value\n\t\t}\n\t\tcbo_setSelected(this, value, text)\n\t}\n\n\tgetDisplayBinding() {\n\t\treturn this.Nodes.Input.getAttribute('data-display')\n\t}\n\n\taddOptions(data) {\n\t\tcbo_addOptions(this, data)\n\t}\n\n\tsetOptions(data) {\n\t\tcbo_setOptions(this, data)\n\t}\n\n\t\n\n\t#iswaiting = false\n\tisWaiting() { return this.#iswaiting }\n\twait(iswaiting) {\n\t\tthis.#iswaiting = iswaiting===undefined ? true : iswaiting\n\t\tcbo_wait(this, iswaiting)\n\t}\n\t\n\t// untuk keperluan abort fetch data yang dibatalkan\n\t// apabila belum selesai tapi dialog sudah ditutup\n\tAbortHandler = null\n\n\n\tHasStaticOption = null\n\n\n\n\tfocus() {\n\t\tthis.Nodes.Display.focus()\n\t}\n}\n\n\nfunction cbo_setSelected(self, value, text) {\n\tself.Nodes.Input.value = value\n\tself.Nodes.Display.value = text\n\tcbo_markChanged(self)\n}\n\nfunction cbo_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst display = document.createElement('input')\n\tconst button = document.createElement('button')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\tconst datalist = input.parentNode.querySelector(`datalist[for=\"${id}\"]`)\n\tconst dialog = document.createElement('dialog')\n\tconst lasttext = document.createElement('input')\n\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(input)\n\twrapinput.appendChild(display)\n\twrapinput.appendChild(button)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(lastvalue)\n\tcontainer.appendChild(lasttext)\n\tcontainer.appendChild(dialog) \n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\tself.Nodes.Display = display\n\tself.Nodes.Button = button\n\tself.Nodes.Dialog = dialog\n\tself.Nodes.LastText = lasttext\n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Combobox')\n\tif (input.style.width!='') {\n\t\tcontainer.style.width = input.style.width\n\t}\n\tif (input.style.marginTop!='') {\n\t\tcontainer.style.marginTop = input.style.marginTop\n\t\tinput.style.marginTop = ''\n\t}\n\tif (input.style.marginBottom!='') {\n\t\tcontainer.style.marginBottom = input.style.marginBottom\n\t\tinput.style.marginBottom=''\n\t}\n\tif (input.style.marginLeft!='') {\n\t\tcontainer.style.marginLeft = input.style.marginLeft\n\t\tinput.style.marginLeft=''\n\t}\n\tif (input.style.marginRight!='') {\n\t\tcontainer.style.marginRight = input.style.marginRight\n\t\tinput.style.marginRight=''\n\t}\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\n\t// setup input\n\tinput.classList.add('fgta5-entry-input')\n\tinput.setAttribute('type', 'hidden')\n\tinput.getInputCaption = () => {\n\t\tif (label!=null) {\n\t\t\treturn label.innerHTML\n\t\t} else {\n\t\t\treturn input.getAttribute('placeholder')\n\t\t}\n\t}\n\tconst nonFgtaClasses = Array.from(input.classList).filter(className =>\n\t\t!className.startsWith('fgta5-')\n\t);\n\tfor (var classname of nonFgtaClasses) {\n\t\tinput.classList.remove(classname)\n\t\tcontainer.classList.add(classname)\n\t}\n\n\n\t// setup display\n\tdisplay.id = self.Id + '-display'\n\tdisplay.classList.add('fgta5-entry-display')\n\tdisplay.setAttribute('style', input.getAttribute('style') || '')\n\tdisplay.setAttribute('type', 'text')\n\tdisplay.setAttribute('readonly', 'true')\n\tdisplay.setAttribute('fgta5-component', 'Combobox')\n\tdisplay.setAttribute('placeholder', input.getAttribute('placeholder'))\n\tdisplay.setAttribute('tabindex', '-1')\n\t\n\tdisplay.required = input.required\n\n\tconst dis = input.getAttribute('disabled')\n\tif (dis!=null) {\n\t\tcbo_setDisabled(self, true)\n\t}\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tbutton.setAttribute('tabindex', tabIndex)\n\t}\n\n\t// setup button\n\tbutton.setAttribute('type', 'button')\n\tbutton.classList.add('fgta5-entry-button-combobox')\t\n\tbutton.innerHTML = icon_cbo_button\n\tbutton.addEventListener('click', (e)=>{\n\t\tcbo_buttonClick(self, e)\n\t})\n\n\n\t// setup lasttext\n\tlasttext.setAttribute('type', 'hidden')\n\n\t// setup label\n\tif (label!=null) {\n\t\tlabel.setAttribute('for', display.id)\n\t\tlabel.classList.add('fgta5-entry-label')\n\t}\n\n\n\t// required field\n\tvar required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\t// dialog\n\tif (datalist!=null) {\n\t\tself.HasStaticOption = true\n\t}\n\tcbo_createDialog(self, dialog)\n\tdialog.addEventListener(\"cancel\", (e)=>{\n\t\tdialog.setAttribute(ATTR_REMOVING, 'true')\n\t\te.preventDefault()\n\t\tsetTimeout(() => {\n\t\t\tdialog.close()\n\t\t\tdialog.removeAttribute(ATTR_REMOVING)\n\t\t\tdialog.removeAttribute(ATTR_SHOWED)\n\t\t\tcbo_closed(self)\n\t\t}, 200);\n    });\n\n\tdialog.addEventListener('close', (evt)=>{\n\t\tcbo_dialogClose(self)\n\t})\n\n\t\n\n\t// datalist\n\tif (datalist!=null) {\n\t\tdatalist.remove()\n\t\tvar opt = cbo_createStaticOptions(self, dialog, datalist)\n\t\tif (opt.default!=null) {\n\t\t\tinput.value = opt.default.value\n\t\t\tdisplay.value = opt.default.text\n\t\t}\n\n\t\tif (opt.count>0) {\n\t\t\tself.HasStaticOption = true\n\t\t}\n\t} else {\n\t\tinput.value = ''\n\t\tdisplay.value = ''\n\t}\n\n\n\t// baca attribut kelengkapan combobox\n\tself._read\n\n\t// set input description\n\tself._setupDescription()\n\tself._setLastValue(input.value, display.value)\n\t\n}\n\n\nfunction cbo_getValue(self) {\n\tvar input = self.Nodes.Input\n\tif (input.value=='') {\n\t\treturn null\n\t} else {\n\t\treturn input.value\n\t}\n}\n\nfunction cbo_getText(self) {\n\treturn self.Nodes.Display.value\n}\n\n\nfunction cbo_newData(self, initialdata) {\n\tvar input = self.Nodes.Input\n\tvar display = self.Nodes.Display\n\n\n\tif (initialdata===undefined) {\n\t\tinput.value = ''\n\t\tdisplay.value = ''\n\t} else if (typeof initialdata==='string') {\n\t\tinput.value = initialdata\n\t\tdisplay.value = initialdata\n\t} else if (initialdata!=null) {\n\t\tinput.value = initialdata.value\n\t\tdisplay.value = initialdata.text\n\t} else {\n\t\tinput.value = ''\n\t\tinput.value = ''\n\t}\n\tself.Nodes.Display.removeAttribute('changed')\n\n\tself.setError(null)\n\tself.acceptChanges()\n\n\tcbo_resetSelected(self)\n}\n\nfunction cbo_acceptChanges(self) {\n\tself.Nodes.Display.removeAttribute('changed')\n\tself._setLastValue(self.value, self.text)\n}\n\nfunction cbo_reset(self) {\n\tvar lastValue = self.getLastValue()\n\tvar lastText =  self.getLastText()\n\n\tconsole.log('reset:', lastValue, lastText)\n\tself.Nodes.Input.value = lastValue\n\tself.Nodes.Display.value = lastText\n\tself.Nodes.Display.removeAttribute('changed')\n\n\tself.acceptChanges()\n}\n\nfunction cbo_setLastValue(self, v, t) {\n\tself.Nodes.LastValue.value = v\n\tself.Nodes.LastText.value = t\n}\n\nfunction cbo_setDisabled(self, v) {\n\tif (v) {\n\t\tself.Nodes.Display.disabled = true\n\t\tself.Nodes.Button.disabled = true\n\t} else {\n\t\tself.Nodes.Display.disabled = false\n\t\tself.Nodes.Button.disabled = false\n\t}\n}\n\nfunction cbo_markSelected(self, tr) {\n\ttr.setAttribute(ATTR_SELECTED, '')\n\t\n\tsetTimeout(()=>{\n\t\tlet d = tr.getAttribute('data-none')\n \t\tif (d=='') {\n\t\t\t// taruh paling atas\n\t\t\t// TODO: geser TR di awal tbody\n\t\t} else {\n\t\t\t// geser tr ke atas atau setelah none \n\t\t\tconst dialog = self.Nodes.Dialog\n\t\t\tconst tbody = dialog.getElementsByTagName('tbody')[0]\n\t\t\tconst none = tbody.querySelector('tr[data-none]')\n\t\t\tif (none!=null) {\n\t\t\t\tnone.after(tr)\t\n\t\t\t}\n\t\t}\n\t}, 100)\n\t\n}\n\n\nfunction cbo_SetEditingMode(self, ineditmode) {\n\tvar attrval = ineditmode ? 'true' : 'false'\n\n\tself.Nodes.Display.setAttribute(ATTR_EDITMODE, attrval)\n\tself.Nodes.Input.setAttribute(ATTR_EDITMODE, attrval)\n\tself.Nodes.InputWrapper.setAttribute(ATTR_EDITMODE, attrval)\n\tself.Nodes.Button.setAttribute(ATTR_EDITMODE, attrval)\n\n\tif (ineditmode) {\n\t\tself.Nodes.Input.removeAttribute('readonly')\n\t} else {\n\t\tself.Nodes.Input.setAttribute('readonly', 'true')\n\t\tself.setError(null)\n\t}\n}\n\nfunction isMobileDevice() {\n\treturn /Mobi|Android|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);\n}\n\n\nfunction cbo_selectRow(self, tr, td, value, text, data) {\n\t\t// reset dulu jika ada option yang terpilih sebelumnya\n\t\tcbo_resetSelected(self)\n\n\t\t// tandai baris yang sekarang dilih\n\t\tcbo_markSelected(self, tr)\n\n\t\tself.Nodes.Input.value = value\n\t\tif (value=='' && text=='none') {\n\t\t\tconsole.log('none dipilih')\n\t\t\tself.Nodes.Display.value = ''\n\t\t} else {\n\t\t\tself.Nodes.Display.value = text\n\t\t}\n\n\n\t\t\n\t\tcbo_userSelectValue(self, value, text, data)\n}\n\nfunction cbo_createOptionRow(self, value, text, data) {\n\tlet tr = document.createElement('tr')\n\tvar td = document.createElement('td')\n\n\ttr.classList.add('fgta-combobox-option-row')\n\ttr.setAttribute('value', value)\n\n\ttd.setAttribute('option', '')\n\ttd.setAttribute('value', value)\n\ttd.innerHTML = text\n\n\n\n\n\ttd.addEventListener('dblclick', (e)=>{\n\t\tif (isMobileDevice()) {\n\t\t\treturn\n\t\t}\n\n\t\tcbo_selectRow(self, tr, td, value, text, data)\n\t})\n\n\ttd.addEventListener('click', (e)=>{\n\t\t// click hanya untuk mobile\n\t\tif (!isMobileDevice()) {\n\t\t\treturn\n\t\t}\n\n\t\tcbo_selectRow(self, tr, td, value, text, data)\n\t\t/*\n\t\t// untuk menghindari kesalah jika melakukan double click\n\t\t// karena efek animate\n\t\tif (self.pauseClickEvent===true) {\n\t\t\treturn\n\t\t}\n\t\tself.pauseClickEvent = true\n\t\tsetTimeout(()=>{\n\t\t\tself.pauseClickEvent = false\n\t\t}, 500)\n\t\t*/\n\t})\n\n\ttr.appendChild(td)\n\n\n\n\t// CATATAN:\n\t// dispatch event di sini tidak berlaku untuk static options\n\t// karena event handler pada main program baru akan diexekusi setelah pembuatan content option statis\n\tself.Listener.dispatchEvent(PopulatingEvent({\n\t\tdetail: {\n\t\t\tvalue: value,\n\t\t\ttext: text,\n\t\t\ttr: tr,\n\t\t\tdata: data\n\t\t}\n\t}))\n\n\n\t// tandai baris pilihan ini jika merupakan opsi yang dipilih user saat ini\n\tvar valueselected=self.value??''\n\tif (value==valueselected) {\n\t\tcbo_markSelected(self, tr)\n\t}\n\n\n\treturn tr\n} \n\nfunction cbo_createStaticOptions(self, dialog, datalist) {\n\tconst options = datalist.getElementsByTagName(\"option\");\n\t\n\tconst thead = dialog.getElementsByTagName('thead')[0]\n\tconst tbody = dialog.getElementsByTagName('tbody')[0]\n\tconst tfoot = dialog.getElementsByTagName('tfoot')[0]\n\tvar defaultOption = null\n\t\n\tthead.style.display='none'\n\ttfoot.style.display='none'\n\n\n\t// jika tidak harus diisi,\n\t// tambahkan opsi none\n\tif (!self.isRequired()) {\n\t\tvar tr = cbo_createOptionRow(self, '', 'none', {})\n\t\ttr.setAttribute('data-none', '')\n\t\ttr.setAttribute(ATTR_INDEX, 0)\n\t\ttbody.appendChild(tr)\n\t}\n\n\t// selanjutnya isi data berdasar options default\n\tvar i = 0\n\tfor (let option of options) {\n\t\ti++\n\t\tlet text = option.textContent || option.innerText\n\t\tlet value = (option.value==null || option.value=='') ? text : option.value\n\n\t\tvar def = option.getAttribute('default')\n\t\tif (def!=null) {\n\t\t\tdefaultOption = {\n\t\t\t\tvalue: value,\n\t\t\t\ttext: text\n\t\t\t}\n\t\t}\n\n\t\tvar idx = tbody.rows.length - 1\n\t\tvar tr = cbo_createOptionRow(self, value, text, { option: option })\n\t\t\n\t\ttr.setAttribute(ATTR_INDEX, idx)\n\t\ttbody.appendChild(tr)\n\t}\n\n\treturn {\n\t\tcount: i,\n\t\tdefault: defaultOption\n\t}\n\n}\n\nfunction cbo_createDialog(self, dialog) {\n\tdialog.classList.add('fgta5-combobox-dialog')\n\t\n\n\n\t// buat header dialog\n\tvar head = document.createElement('div')\n\thead.classList.add('fgta5-combobox-dialog-head')\n\thead.innerHTML = self.Nodes.Input.getInputCaption()\n\tdialog.appendChild(head)\n\n\t// tombol tutup dialog (tanpa memilih)\n\tvar btnClose = document.createElement('button')\n\tbtnClose.setAttribute('type', 'button')\n\tbtnClose.innerHTML = icon_cbo_close\n\thead.appendChild(btnClose)\n\n\n\n\t\n\t// filtering\n\tif (!self.HasStaticOption) {\n\t\tvar srccontainer = document.createElement('div')\n\t\tvar srcinput = document.createElement('input')\n\t\tvar srcbuton = document.createElement('button')\n\t\tvar btnnext = document.createElement('a')\n\n\t\t\n\t\tsrcinput.setAttribute('placeholder', 'Search')\n\t\tsrcinput.setAttribute('maxlength', 30)\n\t\tsrcinput.addEventListener('keypress', (evt)=>{\n\t\t\tif (evt.key===\"Enter\") {\n\t\t\t\tsrcbuton.click()\n\t\t\t}\n\t\t})\n\t\t\n\t\tsrcbuton.setAttribute('type', 'type')\n\t\tsrcbuton.innerHTML = 'Submit'\n\t\tsrcbuton.addEventListener('click', (evt)=>{\n\t\t\tvar searchtext = srcinput.value\n\t\t\tvar limit = DEF_LIMIT\n\t\t\tvar offset = 0\n\n\t\t\tbtnnext.searchtext = searchtext\n\t\t\tcbo_resetSelected(self)\n\t\t\tcbo_search(self, searchtext, limit, offset)\n\t\t})\n\n\t\tsrccontainer.classList.add('fgta5-combobox-dialog-filter')\n\t\tsrccontainer.appendChild(srcinput)\n\t\tsrccontainer.appendChild(srcbuton)\n\t\tdialog.appendChild(srccontainer)\n\n\t}\n\n\n\n\n\n\n\t// template tabel dialog\n\tvar table = document.createElement('table')\n\tvar thead = document.createElement('thead')\n\tvar tbody = document.createElement('tbody')\n\tvar tfoot = document.createElement('tfoot')\n\tdialog.appendChild(table)\n\t\n\t\n\ttable.appendChild(tbody)\n\ttable.appendChild(tfoot)\n\ttable.appendChild(thead)\n\n\n\tif (!self.HasStaticOption) {\n\t\t// siapkan tombol next,\n\t\t// jikalau nanti ada data yang panjang dan perlu paging\n\t\tbtnnext.classList.add('fgta5-combobox-dialog-nextbutton')\n\t\tbtnnext.innerHTML = 'next data'\n\t\tbtnnext.style.display = 'none'\n\t\tbtnnext.setAttribute('href', 'javascript:void(0)')\n\t\tbtnnext.addEventListener('click', (evt)=>{\n\t\t\t// ketiak, eh ketika tombol next di klik\n\t\t\tvar searchtext = btnnext.searchtext\n\t\t\tvar limit = btnnext.limit\n\t\t\tvar nextoffset = btnnext.nextoffset\n\t\t\tcbo_search(self, searchtext, limit, nextoffset)\n\t\t})\n\t\tdialog.appendChild(btnnext)\n\n\t\tdialog.setNext = (nextoffset, limit) => {\n\t\t\tbtnnext.nextoffset = nextoffset\n\t\t\tbtnnext.limit = limit\n\t\t\tif (nextoffset!=null && nextoffset!=0) {\n\t\t\t\tbtnnext.style.display = 'inline-block'\n\t\t\t} else {\n\t\t\t\tbtnnext.style.display = 'none'\n\t\t\t}\n\t\t}\n\t} else {\n\t\tdialog.setNext = (nextoffset, limit) => {\n\t\t\tconsole.log('not implemented')\n\t\t}\n\t}\t\n\t\n\t\n}\n\nfunction cbo_userSelectValue(self, value, text, data) {\n\t// trigger event\n\tconst changed = cbo_markChanged(self)\n\n\tself.Listener.dispatchEvent(SelectedEvent({\n\t\tsender: self,\n\t\tdetail: {value, text, data, changed, sender: self}\n\t}))\n\n\t// tutup\n\tself.Nodes.Dialog.removeAttribute(ATTR_SHOWED)\n\tsetTimeout(() => {\n\t\tself.Nodes.Dialog.close()\n\t\tcbo_closed(self)\n\t}, 200);\n}\n\nfunction cbo_markChanged(self) {\n\tif (self.Form==null) {\n\t\treturn\n\t}\n\n\tvar display = self.Nodes.Display\n\tif (self.value!=self.getLastValue()) {\n\t\tdisplay.setAttribute('changed', 'true')\n\t\treturn true\n\t} else {\n\t\tdisplay.removeAttribute('changed')\n\t\treturn false\n\t}\n}\n\n\nfunction cbo_getLastValue(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\tif (lastvalue=='') {\n\t\treturn null\n\t} else {\n\t\treturn lastvalue\n\t}\n}\n\nfunction cbo_getLastText(self) {\n\treturn self.Nodes.LastText.value\n}\n\n\nfunction cbo_clearOptions(self, tbody) {\n\tconst dialog = self.Nodes.Dialog\n\tif (tbody==undefined || tbody==null) {\n\t\ttbody = dialog.getElementsByTagName('tbody')[0]\n\t}\n\n\ttbody.innerHTML = ''\n}\n\nfunction cbo_addOptions(self, data, tbody) {\n\tif (data==undefined || data==null) {\n\t\treturn\n\t}\n\n\tconst dialog = self.Nodes.Dialog\n\tif (tbody==undefined || tbody==null) {\n\t\ttbody = dialog.getElementsByTagName('tbody')[0]\n\t}\n\n\tfor (let row of data) {\n\t\ttbody.appendChild(cbo_createOptionRow(self, row.value, row.text, data))\n\t}\n}\n\nfunction cbo_setOptions(self, data) {\n\tconst dialog = self.Nodes.Dialog\n\tconst tbody = dialog.getElementsByTagName('tbody')[0]\n\n\t// hapus dulu datanya\n\tcbo_clearOptions(self, tbody)\n\t\n\t// cek apakah tidak required\n\t// jika tidak required, tambahkan none di paling atas\n\tif (!self.isRequired()) {\n\t\t// cbo_addOptionRow(self, tbody, '', '')\n\t}\n\n\n\t// tampilkan data pada pilihan\n\tcbo_addOptions(self, data, tbody)\n}\n\nfunction cbo_closed(self) {\n\tif (typeof self.abortHandler==='function') {\n\t\tself.abortHandler()\n\t}\n}\n\n\nfunction cbo_clear(self) {\n\tconst dialog = self.Nodes.Dialog\n\tvar selectedTr = dialog.querySelectorAll(`table tr[${ATTR_SELECTED}]`)\n\tselectedTr.forEach(tr=>{\n\t\ttr.removeAttribute(ATTR_SELECTED)\n\t})\n}\n\nfunction cbo_search(self, searchtext, limit, offset) {\n\tconst dialog = self.Nodes.Dialog\n\tconst tbody = dialog.getElementsByTagName('tbody')[0]\n\n\n\t// required atau nggak\n\tvar addNoneIfNotRequired = () => {\n\t\tvar none = tbody.querySelector('tr[data-none]')\n\t\tif (self.isRequired()) {\n\t\t\t// hilangkan none\n\t\t\tif (none!=null) {\n\t\t\t\tnone.remove()\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\t// tambahkan none jika belum ada\n\t\t\tif (none==null) {\n\t\t\t\tvar tr = cbo_createOptionRow(self, '', 'none', {})\n\t\t\t\ttr.setAttribute('data-none', '')\n\t\t\t\ttr.setAttribute(ATTR_INDEX, 0)\n\t\t\t\ttbody.prepend(tr)\n\t\t\t\tconsole.log('add none')\n\t\t\t}\n\t\t}\n\t}\n\n\tvar execute_selecting = true\n\tif (offset==0) {\n\t\tvar prevselected = dialog.querySelector(`table tr[${ATTR_SELECTED}]`)\n\t\tif (prevselected != null) {\n\t\t\t// kalau sudah ada yang dipilih sebelumnya\n\t\t\t// tidak perlu query selecting lagi \n\t\t\texecute_selecting = false\n\t\t} else {\n\t\t\texecute_selecting = true\n\t\t\tcbo_clearOptions(self, tbody)\n\t\t\tdialog.setNext(null)\n\t\t}\n\t}\n\t\n\n\n\tif (execute_selecting) {\n\n\t\t// selecting event\n\t\taddNoneIfNotRequired()\n\n\n\t\tself.Listener.dispatchEvent(SelectingEvent({\n\t\t\tdetail: {\n\t\t\t\tsender: self,\n\t\t\t\tdialog: dialog,\n\t\t\t\tsearchtext: searchtext,\n\t\t\t\tlimit: limit, \n\t\t\t\toffset: offset,\n\t\t\t\taddRow: (value, text, data) => {\n\t\t\t\t\tvar idx = tbody.rows.length - 1\n\t\t\t\t\tvar tr = cbo_createOptionRow(self, value, text, data)\n\t\t\t\t\ttr.setAttribute(ATTR_INDEX, idx)\n\t\t\t\t\ttbody.appendChild(tr)\n\t\t\t\t}\n\t\t\t}\n\t\t}))\n\t}\n\n\n}\n\n\nfunction cbo_buttonClick(self, e) {\n\tconst dialog = self.Nodes.Dialog\n\n\tif (self.Form!=null) {\n\t\tvar editmode = self.Nodes.Button.getAttribute(ATTR_EDITMODE)\n\t\tif (editmode!==\"true\") {\n\t\t\treturn\n\t\t}\n\t}\n\n\tif (self.HasStaticOption) {\n\t\t// populasi data option statis melalui definisi datalist pada element\n\t\tself.Listener.dispatchEvent(SelectingEvent({\n\t\t\tdetail: {\n\t\t\t\tsender: self,\n\t\t\t\tdialog: dialog,\n\t\t\t\tsearchtext: '', limit: 0, offset: 0,\n\t\t\t\taddRow: (value, text, data) => {\n\t\t\t\t\tvar tr = cbo_createOptionRow(self, value, text, data)\n\t\t\t\t\ttbody.appendChild(tr)\n\t\t\t\t}\n\t\t\t}\n\t\t}))\n\n\t} else {\n\t\t// populasi data option dengan secara dinamis,\n\t\tvar searchtext = null // diisi null berarti saat klik pertama kali\n\t\tvar limit = DEF_LIMIT\n\t\tvar offset = 0\n\n\t\t// tambahkan data yang dipilih\n\t\tcbo_search(self, searchtext, limit, offset)\n\n\t\t// set focus pada input search\n\t\tsetTimeout(()=>{\n\t\t\tvar inputsearch = dialog.querySelector(\".fgta5-combobox-dialog-filter input\")\n\t\t\tif (inputsearch!=null) {\n\t\t\t\tinputsearch.value = ''\n\t\t\t\tinputsearch.focus()\n\t\t\t}\n\t\t}, 100)\n\n\n\t}\n\n\t// set jika dalam waktu 1 detik masih dalam posisi waiting, munculkan mask\n\tsetTimeout(()=>{\n\t\tif (self.isWaiting()) {\n\t\t\tdialog.mask = $fgta5.Modal.createMask()\n\t\t}\n\t}, 1000)\n\n\t// tampilkan modal dialog untuk options\n\tdialog.showModal()\n\tdialog.setAttribute(ATTR_SHOWED, 'true')\n\n\n\t// handler tombol untuk menutup dialog pilihan combobox\n\tvar btnClose = dialog.querySelector('.fgta5-combobox-dialog-head > button')\n\tif (btnClose.onclick==null) {\n\t\tbtnClose.onclick=(e) => {\n\t\t\tdialog.setAttribute(ATTR_REMOVING, 'true')\n\t\t\tsetTimeout(() => {\n\t\t\t\tdialog.close()\n\t\t\t\tdialog.removeAttribute(ATTR_REMOVING)\n\t\t\t\tdialog.removeAttribute(ATTR_SHOWED)\n\t\t\t\tcbo_closed(self)\n\t\t\t}, 200);\n\t\t}\n\t}\n\n}\n\n\nfunction cbo_wait(self, iswaiting) {\n\tconst dialog = self.Nodes.Dialog\n\tvar tbody = dialog.getElementsByTagName('tbody')[0]\n\n\tiswaiting = iswaiting===undefined ? true : iswaiting\n\tif (iswaiting) {\n\t\tvar tr = document.createElement('tr')\n\t\tvar td = document.createElement('td')\n\n\t\ttr.setAttribute('data-waiting', '')\n\t\ttd.innerHTML = 'fetching data from server ...'\n\t\ttr.appendChild(td)\n\t\ttbody.appendChild(tr)\n\n\t\t\n\t} else {\n\t\tvar el = tbody.querySelector('[data-waiting]')\n\t\tif (el!=null) {\n\t\t\tel.remove()\n\t\t}\n\n\t\tif (dialog.mask!=null) {\n\t\t\tdialog.mask.close()\n\t\t\tdelete dialog.mask\n\t\t}\n\t}\n\n}\n\n\nfunction cbo_resetSelected(self) {\n\t// ambil baris yang dipilih sebelumnya\n\tconst prevselected = self.Nodes.Dialog.querySelector(`table tr[${ATTR_SELECTED}]`)\n\tif (prevselected != null) {\n\n\t\t// kemablikan ke urutan sesuai index\n\t\tconst idx = prevselected.getAttribute(ATTR_INDEX)\t\n\t\tif (idx!='' && idx!=null) {\n\t\t\tconst index = Number(idx)\n\t\t\tconst tbody = prevselected.closest('tbody')\n\t\t\tconst trs = tbody.querySelectorAll('tr')\n\t\t\tfor (var tr of trs) {\n\t\t\t\tvar rowidx = tr.getAttribute(ATTR_INDEX) ?? 0\n\t\t\t\tvar rowindex = Number(rowidx)\n\t\t\t\tif (rowindex==0) continue\n\t\t\t\tif (rowindex==index) continue\n\n\t\t\t\tif (index<rowindex) {\n\t\t\t\t\ttr.insertAdjacentElement(\"beforebegin\", prevselected);\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\t\n\n\t\t// remove status selected\n\t\tprevselected.removeAttribute(ATTR_SELECTED)\n\t}\n}\n\n\nfunction cbo_dialogClose(self) {\n\t// kembalikan yang saat ini di select ke baris semula\n\t// const dialog = self.Nodes.Dialog\n\t// const selected = dialog.querySelector(`table tr[${ATTR_SELECTED}]`)\n\t// const idx = selected.getAttribute(ATTR_INDEX)\n\t// if (idx!='' && idx!=null) {\n\t// \tconst tbody = dialog.getElementsByTagName('tbody')[0]\n\t// \tconst trs = tbody.querySelectorAll('tr')\n\t// \tfor (var tr of trs) {\n\t// \t\tvar rowidx = tr.getAttribute(ATTR_INDEX) ?? 0\n\t// \t\tif (rowidx==0) continue\n\n\t// \t\tif (idx>rowidx) {\n\t// \t\t\ttr.after(selected)\n\t// \t\t\tbreak\n\t// \t\t}\n\t// \t}\n\t// }\n}","import Input from \"./Input.mjs\"\n\n\nconst button_icon = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg transform=\"translate(0 3)\" width=\"12\" height=\"12\" stroke=\"currentColor\" version=\"1.1\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m3.0207 17.447v3.9708h18.328v-3.9708\" fill=\"none\" stroke-linecap=\"square\" stroke-width=\"4\"/>\n<path d=\"m18.595 8.3606-6.4542-4.0017-6.3622 4.0017m6.3622-1.8991v7.1708\" fill=\"none\" stroke-linecap=\"square\" stroke-width=\"4\"/>\n</svg>\n`\n\n\nexport default class Filebox extends Input {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tflb_construct(this, id)\n\t}\n\n\t#value = ''\n\tset value(v) { this.#value = v }\n\tget value() { \n\t\tif (this.Element.files.length===0) {\n\t\t\treturn this.#value\n\t\t} else {\n\t\t\treturn this.Element.files[0].name\n\t\t}\n\t}\n\t\n\n\tget file() {\n\t\tif (this.Element.files.length===0) {\n\t\t\treturn 0\n\t\t} else {\n\t\t\treturn this.Element.files[0]\n\t\t}\n\t}\n\n\tget disabled() { return this.Element.disabled }\n\tset disabled(v) { \n\t\tthis.Element.disabled = v \n\t\tflb_setDisabled(this, v)\n\t}\n\n\t#_ineditmode = true\n\tget InEditMode() { return this.#_ineditmode }\n\tsetEditingMode(ineditmode) {\n\t\tthis.#_ineditmode = ineditmode\n\t\tflb_setEditingMode(this, ineditmode)\n\t}\n\n\tnewData() {\n\t\tflb_newData(this)\n\t}\n\n\tacceptChanges() {\n\t\tflb_acceptChanges(this)\n\t}\n\n\treset() {\n\t\tflb_Reset(this)\n\t}\n\n\tisChanged() { \n\t\treturn flb_isChanged(this)\n\t}\n\n\tsetError(msg) {\n\t\tsuper.setError(msg)\n\t\tflb_setError(this, msg)\n\t}\n\n\n\tsetDisplay(value) {\n\t\tflb_setDisplay(this, value)\n\t}\n\n\n\tsetDownloadLink(linktext, url) {\n\t\tflb_setDownloadLink(this, linktext, url)\n\t}\n\n\tvalidate() { \n\t\treturn flb_validate(this) \n\t}\n\n\tfocus() {\n\t\tthis.Nodes.Display.focus()\n\t}\t\n}\n\n\nfunction flb_validate(self) {\n\tif (self.isRequired()) {\n\t\tif (self.Nodes.Display.value=='') {\n\t\t\t// return false\n\t\t\tvar err = self.getErrorValidation('required') // prioritas utama untuk validasi\n\t\t\tif (err!=null) {\n\t\t\t\tself.setError(err.message)\n\t\t\t} else {\n\t\t\t\tself.setError('file harus diisi')\n\t\t\t}\n\t\t\treturn false\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t} else {\n\t\treturn true\n\t}\n}\n\nfunction flb_setDownloadLink(self, linktext=null, url=null) {\n\tconst downloadLink = self.Nodes.DownloadLink\n\t\n\tif (linktext==null) {\n\t\t// sembunyikan link\n\t\tdownloadLink.classList.add('hidden')\n\t\tdownloadLink.innerHTML = 'download'\n\t\tdownloadLink.onclick = null\n\t\tdownloadLink.removeAttribute('href')\t\n\t} else {{\n\t\t// munculkan link\n\t\tdownloadLink.classList.remove('hidden')\n\t\tdownloadLink.innerHTML = linktext\n\t\tif (typeof url==='function') {\n\t\t\tdownloadLink.removeAttribute('target', '_blank')\n\t\t\tdownloadLink.setAttribute('href', 'javascript:void(0)')\n\t\t\tdownloadLink.onclick = () => {\n\t\t\t\turl()\n\t\t\t}\t\n\t\t} else {\n\t\t\tdownloadLink.setAttribute('target', '_blank')\n\t\t\tdownloadLink.setAttribute('href', url)\n\t\t\tdownloadLink.onclick = null\n\t\t}\n\t}}\t\n\n}\n\n\nfunction flb_construct(self, id) {\n\tconst container = self.Nodes.Container\n\tconst lastvalue = self.Nodes.LastValue\n\tconst input = self.Nodes.Input\n\tconst wrapinput = document.createElement('div')\n\tconst display = document.createElement('input')\n\tconst button = document.createElement('button')\n\tconst label = document.querySelector(`label[for=\"${id}\"]`)\n\tconst downloadLink = document.createElement('a')\n\n\t// setup container, (harus di awal seblum yang lain-lain)\n\t// diperlukan untuk menampung semua element yang akan ditampilkan\n\tinput.parentNode.insertBefore(container, input)\n\t\n\n\tdownloadLink.innerHTML = 'download'\n\tdownloadLink.classList.add('fgta5-entry-download-link')\n\tdownloadLink.classList.add('hidden')\n\t\n\n\n\n\t// tambahkan elemen-element ke container\n\t// penambahakn container ke body document pada saat Input_construct di parent class Input\n\twrapinput.appendChild(display)\n\twrapinput.appendChild(button)\n\tbutton.appendChild(input)\n\tcontainer.appendChild(wrapinput)\n\tcontainer.appendChild(downloadLink)\n\tcontainer.appendChild(lastvalue)\n\t\n\n\n\t// tambahkan referensi elemen ke Nodes\n\tself.Nodes.InputWrapper = wrapinput\n\tself.Nodes.Label = label \n\tself.Nodes.Display = display\n\tself.Nodes.Button = button\n\tself.Nodes.DownloadLink = downloadLink\n\n\n\t// setup container\n\tcontainer.setAttribute('fgta5-component', 'Filebox')\n\n\n\t// setup wrapper\n\twrapinput.classList.add('fgta5-entry-input-wrapper')\n\n\n\t// display\n\tdisplay.setAttribute('id', `${id}-display`)\n\tdisplay.setAttribute('type', 'text')\n\tdisplay.setAttribute('picker', 'file')\n\tdisplay.setAttribute('fgta5-component', 'Filebox')\n\tdisplay.setAttribute('readonly', 'true')\n\tdisplay.classList.add('fgta5-entry-display')\n\tdisplay.classList.add('fgta5-entry-display-filebox')\n\tvar placeholder = input.getAttribute('placeholder')\n\tif (placeholder!=null && placeholder !='') {\n\t\tdisplay.setAttribute('placeholder', placeholder)\n\t}\n\tvar cssclass = input.getAttribute('class')\n\tif (cssclass!=null && cssclass !='') {\n\t\tdisplay.setAttribute('class', cssclass)\n\t}\n\tvar cssstyle = input.getAttribute('style')\n\tif (cssstyle!=null && cssstyle !='') {\n\t\tdisplay.setAttribute('style', cssstyle)\n\t}\n\n\tconst tabIndex = input.getAttribute('data-tabindex')\n\tif (tabIndex!=null) {\n\t\tdisplay.setAttribute('tabindex', tabIndex)\n\t}\n\n\n\t// main input\n\tinput.setAttribute('type', 'file')\n\tinput.setAttribute('picker', 'file')\n\tinput.removeAttribute('class')\n\tinput.removeAttribute('style')\n\tinput.classList.add('fgta5-entry-input')\n\tinput.classList.add('fgta5-entry-input-filebox')\n\tinput.getInputCaption = () => {\n\t\tif (label!=null) {\n\t\t\treturn label.innerHTML\n\t\t} else {\n\t\t\treturn input.getAttribute('placeholder')\n\t\t}\n\t}\n\n\t\n\t// picker button\n\tbutton.id = self.Id + '-button'\n\tbutton.insertAdjacentHTML(\"beforeend\", button_icon)\n\tbutton.classList.add('fgta5-entry-button-filebox')\t\n\n\t// label\n\tlabel.setAttribute('for', button.id)\n\tlabel.classList.add('fgta5-entry-label')\n\n\n\n\n\t// additional property setup\n\n\t// required field\n\tvar required = input.getAttribute('required')\n\tif (required != null) {\n\t\tself.markAsRequired(true)\n\t}\n\n\tself._setLastValue(input.value)\n\tself.acceptChanges()\n\n\n\t// set input description\n\tself._setupDescription()\n\n\n\tinput.addEventListener('change', (e)=>{\n\t\tflb_changed(self)\n\t})\n\n\n}\n\nfunction flb_setDisplay(self, value) {\n\tvar display = self.Nodes.Display\n\tdisplay.value = value\n}\n\nfunction flb_setDisabled(self, v) {\n\tvar display = self.Nodes.Display\n\tvar button = self.Nodes.Button\n\tif (v) {\n\t\tdisplay.disabled = true\n\t\tbutton.disabled = true\n\t} else {\n\t\tdisplay.disabled = false\n\t\tbutton.disabled = false\n\t}\n}\n\n\nfunction flb_setEditingMode(self, ineditmode) {\n\tvar display = self.Nodes.Display\n\tvar input = self.Nodes.Input\n\tvar attrval = ineditmode ? 'true' : 'false'\n\n\tdisplay.setAttribute('editmode', attrval)\n\tinput.setAttribute('editmode', attrval)\n\tself.Nodes.InputWrapper.setAttribute('editmode', attrval)\n\n\tif (ineditmode) {\n\t\tinput.disabled = false\n\t} else {\n\t\tinput.disabled = true\n\t\tself.setError(null)\n\t}\n}\n\n\nfunction flb_changed(self) {\n\tvar input = self.Nodes.Input\n\n\tif (input.files.length === 0) {\n\t\treturn\n\t}\n\n\tself.Nodes.Display.value = input.files[0].name\n\tflb_markChanged(self)\n\tif (self.InEditMode) {\n\t\tself.setError(null)\n\t\tself.validate()\n\t}\n}\n\nfunction flb_markChanged(self) {\n\tvar display = self.Nodes.Display\n\tif (self.value!=self.getLastValue()) {\n\t\tdisplay.setAttribute('changed', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('changed')\n\t}\n}\n\n\n\nfunction flb_setError(self, msg) {\n\tvar display = self.Nodes.Display\n\tif (msg!== null && msg !== '') {\n\t\tdisplay.setAttribute('invalid', 'true')\n\t} else {\n\t\tdisplay.removeAttribute('invalid')\n\t}\n}\n\nfunction flb_newData(self) {\n\tself.Nodes.Input.value = ''\n\tself.Nodes.Display.value = ''\n\tself.acceptChanges()\n}\n\n\nfunction flb_Reset(self) {\n\t// let newFileInput = self.Nodes.Input.cloneNode();\n\t// newFileInput.addEventListener('change', (e)=>{\n\t// \tflb_changed(self)\n\t// })\n\t\n\t// self.Nodes.Input.replaceWith(newFileInput)\n\t// self.Nodes.Input = newFileInput\n\tself.Nodes.Input.value = ''\n\t\n\tvar lastvalue = self.getLastValue()\n\tself.Nodes.Display.value = lastvalue\n\tself.acceptChanges()\n}\n\nfunction flb_acceptChanges(self) {\n\tvar display = self.Nodes.Display\n\tvar input = self.Nodes.Input\n\tvar currentvalue = ''\n\tif (input.files.length>0) {\n\t\tcurrentvalue = input.files[0].name\n\t}\n\t\n\tself._setLastValue(currentvalue)\n\tinput.removeAttribute('changed')\n\tdisplay.removeAttribute('changed')\n\tself.setError(null)\n}\n\n\nfunction flb_isChanged(self) {\n\tvar lastvalue = self.Nodes.LastValue.value\n\tvar currentvalue = self.value\n\tif (currentvalue!=lastvalue) {\n\t\tconsole.log(`Input '${self.Id}' is changed from '${lastvalue}' to '${currentvalue}'`)\n\t\treturn true\n\t} else {\n\t\treturn false\n\t}\n}","import Component from \"./Component.mjs\"\nimport Textbox from \"./Textbox.mjs\"\nimport Numberbox from \"./Numberbox.mjs\"\nimport Checkbox from \"./Checkbox.mjs\"\nimport Datepicker from \"./Datepicker.mjs\"\nimport Timepicker from \"./Timepicker.mjs\"\nimport Combobox from \"./Combobox.mjs\"\nimport Filebox from \"./Filebox.mjs\"\n\n\nconst formLockedEvent = new CustomEvent('locked')\nconst formUnLockedEvent = new CustomEvent('unlocked')\n\n\nexport default class Form extends Component {\n\t#_locked = false\n\t#_autoid = false\n\t#_primarykey\n\n\tInputs = {}\n\n\tconstructor(id) {\n\t\tsuper(id)\n\n\t\tthis.#readAttributes()\n\t\tfrm_construct(this, id)\n\t}\n\n\n\tget AutoID() { return this.#_autoid }\n\tget PrimaryKey() { return this.#_primarykey } \n\n\tlock(lock) { \n\t\tthis.#_locked = frm_lock(this, lock) \n\t}\n\n\tisLocked() { \n\t\treturn this.#_locked\n\t}\n\n\t#isnew\n\tisNew() {\n\t\treturn this.#isnew\n\t}\n\n\tsetAsNewData() {\n\t\tthis.#isnew = true\n\t}\n\n\treset() { \n\t\tthis.#isnew = false\n\t\tfrm_reset(this) \n\t}\n\n\tclear(text) {\n\t\tfrm_clear(this, text)\n\t}\n\n\tacceptChanges() { \n\t\tthis.#isnew = false\n\t\tfrm_acceptChanges(this) \n\t}\n\n\tisChanged() { return frm_isChanged(this) }\n\n\t\n\t#lastError\n\t_setLastError(msg) {\n\t\tthis.#lastError = msg\n\t}\n\n\tgetLastError() {\n\t\treturn this.#lastError\n\t}\n\n\tgetPrimaryInput() {\n\t\tconst pk = this.PrimaryKey\n\t\tconst obj = this.Inputs[pk]\n\t\treturn obj\n\t}\n\n\tnewData(data) { \n\t\tthis.#isnew = true\n\t\tthis.lock(false)\n\t\tfrm_newData(this, data) \n\t}\n\n\trender() { frm_render(this) }\n\n\tvalidate() { return frm_validate(this) }\n\n\n\n\n\tgetFiles() {\n\t\treturn frm_getFiles(this)\n\t}\n\t\n\tgetDataChanged() {\n\t\tvar changedOnly = true\n\t\treturn frm_getData(this, changedOnly)\n\t}\n\n\n\t#originalData\n\tsetData(data) {\n\t\tthis.#originalData = data\n\t\tfrm_setData(this, data)\n\t}\n\n\tgetData() {\n\t\treturn frm_getData(this) // data current form\n\t}\n\n\tgetOriginalData() {\n\t\treturn this.#originalData // data saat diset pertama kali dari setData\n\t}\n\n\n\n\n\taddEventListener(event, callback) {\n\t\tthis.Element.addEventListener(event, callback)\n\t}\n\n\n\tacceptInput() {\n\t\tconst prevFocusedElement = document.activeElement;\n\t\tprevFocusedElement.blur()\n\t\tsetTimeout(()=>{\n\t\t\t\tprevFocusedElement.focus()\n\t\t}, 100)\n\t}\n\n\t#readAttributes() {\n\t\tvar locked = this.Element.getAttribute('locked') \n\t\tif (locked == null) {\n\t\t\tlocked = 'false'\n\t\t}\n\t\tif (locked.toLowerCase() === 'true') {\n\t\t\tthis.#_locked = true\n\t\t} else {\n\t\t\tthis.#_locked = false\n\t\t}\n\n\t\tvar autoid = this.Element.getAttribute('autoid')\n\t\tif (autoid!=null) {\n\t\t\tif (autoid.toLowerCase() === 'true') {\n\t\t\t\tthis.#_autoid = true\n\t\t\t} else {\n\t\t\t\tthis.#_autoid = false\n\t\t\t}\n\t\t} \n\t\t\n\n\n\t\tvar primarykey = this.Element.getAttribute('primarykey')\n\t\tthis.#_primarykey = primarykey\n\n\t}\n\n}\n\n\nfunction frm_construct(self, id) {\n\tvar formEl =  document.getElementById(id)\n\n\tself.Id = id\n \tself.Element = formEl\n\tself.Inputs = {}\n\n\tself.Element.setAttribute('novalidate', '')\n\tself.Element.addEventListener('submit', (event) => {\n\t\tevent.preventDefault();\n\t});\n\n\n\n\t// ambil semua input\n\tvar inputs = formEl.querySelectorAll('input')\n\tfor (var i = 0; i < inputs.length; i++) {\n\t\tvar input = inputs[i]\n\t\tvar fgtacomp = input.getAttribute('fgta5-component')\n\t\tif (fgtacomp==null || input.id==null || input.id=='') {\n\t\t\tcontinue\n\t\t}\n\n\t\tif (fgtacomp=='Textbox') {\n\t\t\tself.Inputs[input.id] = new Textbox(input.id)\n\t\t} else if (fgtacomp=='Numberbox') {\n\t\t\tself.Inputs[input.id] = new Numberbox(input.id)\n\t\t} else if (fgtacomp=='Datepicker') {\n\t\t\tself.Inputs[input.id] = new Datepicker(input.id)\n\t\t} else if (fgtacomp=='Timepicker') {\n\t\t\tself.Inputs[input.id] = new Timepicker(input.id)\n\t\t} else if (fgtacomp=='Combobox') {\n\t\t\tself.Inputs[input.id] = new Combobox(input.id)\n\t\t} else if  (fgtacomp=='Checkbox') {\n\t\t\tself.Inputs[input.id] = new Checkbox(input.id)\n\t\t} else if (fgtacomp=='Filebox') {\n\t\t\tself.Inputs[input.id] = new Filebox(input.id)\n\t\t}\n\t\n\t}\n\t\n}\n\n\nfunction frm_render(self) {\n\t// render semua input\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tobj.bindForm(self)\n\t}\n\n\tvar locked = self.isLocked() ? true : false\n\tif (locked) {\n\t\tfrm_lock(self, true)\n\t} else {\n\t\tfrm_lock(self, false)\n\t}\n\n}\n\nfunction frm_lock(self, lock=true) {\n\tvar formEl = self.Element\n\tvar editmode = lock ? false : true\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tobj.setEditingMode(editmode)\n\t}\n\n\tif (lock) {\n\t\tformEl.dispatchEvent(formLockedEvent)\n\t\tformEl.setAttribute('locked', lock)\n\t} else {\n\t\tformEl.dispatchEvent(formUnLockedEvent)\n\t\tformEl.removeAttribute('locked')\n\t}\n\treturn lock\n}\n\n\n\n\nfunction frm_acceptChanges(self) {\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tobj.acceptChanges()\n\t}\n}\n\nfunction frm_reset(self) {\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tobj.reset()\n\t}\n}\n\nfunction frm_clear(self, text='') {\n\tconst inputs = self.Element.querySelectorAll('input:not([type=\"file\"]')\n\tinputs.forEach(element => {\n\t\telement.value = text\n\t});\n}\n\n\nfunction frm_setData(self, data) {\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name];\n\t\tvar bindingdata = obj.getBindingData();\n\t\tvar value = data[bindingdata]\n\t\tif (obj instanceof Combobox) {\n\t\t\tvar displayname = obj.getDisplayBinding()\n\t\t\tif (displayname!=null) {\n\t\t\t\tobj.setSelected(value, data[displayname])\n\t\t\t} else {\n\t\t\t\tobj.setSelected(value, value)\n\t\t\t}\n\t\t} else if (obj instanceof Filebox) {\n\t\t\tobj.setDisplay(value)\n\t\t} else {\n\t\t\tobj.value = value\n\t\t}\n\t}\n\tfrm_acceptChanges(self)\n}\n\n\nfunction frm_newData(self, data) {\n\tdata = data!=null ? data : {} \n\n\tfor (var name in self.Inputs) {\n\t\t\n\t\tvar obj = self.Inputs[name]\n\t\tvar bindingdata = obj.getBindingData()\n\t\tvar initialvalue = data[bindingdata]\n\n\t\tif (obj instanceof Combobox) {\n\t\t\tvar initialdata = (initialvalue!=null) ? initialvalue : {value:'',text:''}\n\t\t\tobj.newData({\n\t\t\t\tvalue: initialdata.value,\n\t\t\t\ttext: initialdata.text\n\t\t\t})\n\t\t} else {\n\t\t\tobj.newData(initialvalue)\n\t\t}\n\t}\n}\n\nfunction frm_isChanged(self) {\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tif (obj.isChanged()) {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n} \n\nfunction frm_validate(self) {\n\tvar isValid = true\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tisValid &&= obj.validate()\n\n\t\tif (!isValid) {\n\t\t\tvar lastError = obj.getLastError()\n\t\t\tself._setLastError(lastError)\n\t\t\treturn false\n\t\t}\n\t}\n\n\tself._setLastError(null)\n\treturn true\n}\n\n\nfunction frm_getData(self, changedOnly=false) {\n\tvar primarykey = self.PrimaryKey\n\tvar obj_pk = self.Inputs[primarykey]\n\tvar pkBinding = obj_pk.getBindingData()\n\n\n\tvar data = {}\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tvar currBinding = obj.getBindingData()\n\n\t\tif (changedOnly) {\n\t\t\t// jika ambil data hanya yang berubah\n\t\t\t// data primary key harus selalu diambil\n\t\t\tif (currBinding!=pkBinding) {\n\t\t\t\t// jika bukan primary key, cek apakah berubah\n\t\t\t\tif (!obj.isChanged()) {\n\t\t\t\t\t// jika tidak ada perubahan, skip\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar bindingdata = obj.getBindingData()\n\t\tif (bindingdata) {\n\t\t\tdata[bindingdata] = obj.value\n\t\t}\n\t}\n\treturn data\n}\n\n\nfunction frm_getFiles(self) {\n\tconst files = {}\n\tfor (var name in self.Inputs) {\n\t\tvar obj = self.Inputs[name]\n\t\tif (!(obj instanceof Filebox)) {\n\t\t\tcontinue\n\t\t}\n\n\t\tif (!obj.isChanged()) {\n\t\t\tcontinue\n\t\t}\n\n\t\tconst bindingdata = obj.getBindingData()\n\n\t\tconst file = obj.file\n\t\tif (file!=null) {\n\t\t\tfiles[bindingdata] = obj.file\n\t\t}\n\t}\n\n\tconst isEmpty = Object.keys(files).length === 0;\n\tif (isEmpty) {\n\t\treturn null\n\t} else {\n\t\treturn files\n\t}\n}","const iconsCss = {\n\t'info': 'fgta5-icon-info',\n\t'warning': 'fgta5-icon-warning',\n\t'error': 'fgta5-icon-error',\n\t'question': 'fgta5-icon-question',\n}\n\n\nconst ICON_ERROR = `<svg width=\"32\" height=\"32\" version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m2.6952 0.48756-2.2081 2.1923-0.010649 3.1118 2.193 2.208 3.112 0.010647 2.2075-2.1929 6.415e-4 -0.066396 0.010022-3.0448-2.1924-2.208z\" color=\"#000000\" fill=\"#f00\" stroke-width=\".32071\" style=\"-inkscape-stroke:none\"/>\n<path transform=\"translate(5.0428e-6 -.019403)\" d=\"m2.582 1.8223a0.33639 0.33639 0 0 0-0.23828 0.097656l-0.43164 0.43164a0.33639 0.33639 0 0 0 0 0.47656l1.4492 1.4492-1.4492 1.4473a0.33639 0.33639 0 0 0 0 0.47656l0.43164 0.43164a0.33639 0.33639 0 0 0 0.47656 0l1.4473-1.4492 1.4492 1.4492a0.33639 0.33639 0 0 0 0.47656 0l0.43164-0.43164a0.33639 0.33639 0 0 0 0-0.47656l-1.4492-1.4473 1.4492-1.4492a0.33639 0.33639 0 0 0 0-0.47656l-0.43164-0.43164a0.33639 0.33639 0 0 0-0.47656 0l-1.4492 1.4492-1.4473-1.4492a0.33639 0.33639 0 0 0-0.23828-0.097656z\" fill=\"#fff\" stroke-width=\".52389\"/>\n</svg>`\n\nconst ICON_INFO = `<svg width=\"32\" height=\"32\" version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m1.6397 0.49839h5.2163c0.63356 0 1.1436 0.51005 1.1436 1.1436v3.83c0 0.63356-0.51005 1.1436-1.1436 1.1436l-2.0655 0.041342-1.8192 1.3427 0.54046-1.384h-1.872c-0.63356 0-1.1436-0.51005-1.1436-1.1436v-3.83c0-0.63356 0.51005-1.1436 1.1436-1.1436z\" fill=\"#ececec\" stroke-width=\".29427\"/>\n<path d=\"m4.103 1.9561c-0.3426 0-0.62096 0.24685-0.62096 0.55066 0 0.30381 0.27836 0.55066 0.61025 0.55066 0.3533 0 0.63167-0.24685 0.63167-0.55066 0-0.30381-0.27836-0.55066-0.62096-0.55066z\" fill=\"#000080\" stroke-width=\".25205\"/>\n<path d=\"m4.7552 3.6379-2.191 0.038907v0.15209h0.59436c0.44285 0.00353 0.50112 0.024758 0.50112 0.17685v1.0116c-0.01164 0.053055-0.02332 0.074277-0.06993 0.091962-0.08157 0.031833-0.303 0.045981-0.80413 0.049518h-0.08157v0.12733h3.0184v-0.12733h-0.08157c-0.78082-0.00707-0.88571-0.024759-0.88571-0.15209v-0.15563z\" fill=\"#000080\" stroke-width=\".16051\"/>\n</svg>`\n\nconst ICON_QUESTION = `<svg width=\"32\" height=\"32\" version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<ellipse cx=\"4.2374\" cy=\"4.2692\" rx=\"3.6992\" ry=\"3.7484\" fill=\"#000080\"/>\n<path d=\"m4.8395 5.9237q0 0.23059-0.17562 0.3913-0.17562 0.16071-0.42928 0.16071-0.25757 0-0.43709-0.16071-0.17952-0.16071-0.17952-0.3913 0-0.22709 0.17952-0.38431 0.17952-0.15722 0.43709-0.15722 0.25367 0 0.42928 0.15722 0.17562 0.15722 0.17562 0.38431z\" fill=\"#fff\" stroke-width=\".18906\"/>\n<path d=\"m5.5497 2.9486q0 0.20872-0.10927 0.379-0.10927 0.16753-0.27318 0.31308-0.16001 0.14556-0.32391 0.28013-0.16001 0.13457-0.26928 0.27463-0.10927 0.14006-0.10927 0.29935 0 0.030209 0.01561 0.085137 0.01561 0.054927 0.01561 0.054927l-0.48782-0.0054933q-0.070246-0.10161-0.11708-0.21147-0.042928-0.1126-0.042928-0.27738 0-0.16753 0.093662-0.32407 0.097564-0.15929 0.22245-0.30484 0.12488-0.14556 0.21854-0.26914 0.097564-0.12359 0.097564-0.21971 0-0.14556-0.13659-0.24168-0.13659-0.096122-0.38245-0.096122-0.23415 0-0.33952 0.074151-0.10537 0.074151-0.1483 0.15105h-0.28879q-0.085856-0.054926-0.14049-0.13732-0.050733-0.08239-0.050733-0.14556 0-0.10985 0.12098-0.23344 0.12488-0.12633 0.39416-0.21421 0.26928-0.090629 0.69856-0.090629 0.43319 0 0.73368 0.12633 0.3005 0.12359 0.4527 0.32132 0.1561 0.19499 0.1561 0.41195z\" fill=\"#fff\" stroke-width=\".16762\"/>\n</svg>`\n\nconst ICON_WARNING = `<svg width=\"32\" height=\"32\" version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<path transform=\"matrix(.20595 0 0 .1924 3.8511 -.31824)\" d=\"m1.875 9.1397 18.269 31.643-18.269-1e-6h-18.269l9.1345-15.821z\" fill=\"#ff7f2a\"/>\n<path d=\"m4.751 6.4121q0 0.20413-0.14691 0.34641-0.14691 0.14227-0.35911 0.14227-0.21547 0-0.36564-0.14227-0.15017-0.14227-0.15017-0.34641 0-0.20104 0.15017-0.34022 0.15017-0.13918 0.36564-0.13918 0.2122 0 0.35911 0.13918 0.14691 0.13918 0.14691 0.34022z\" fill=\"#fff\" stroke-width=\".16269\"/>\n<path d=\"m4.8197 3.7022q0 0.098082-0.022286 0.19403-0.022286 0.093818-0.057939 0.20683l-0.31198 1.0832h-0.43232l-0.2897-1q-0.040112-0.15139-0.075767-0.26013-0.035655-0.11088-0.035655-0.22815 0-0.25373 0.16045-0.37101 0.1649-0.11727 0.46351-0.11727 0.29415 0 0.44569 0.10661 0.15599 0.10661 0.15599 0.38593z\" fill=\"#fff\" stroke-width=\".15783\"/>\n</svg>\n`\n\nexport class MessageBoxButton {\n\tText = 'button'\n\t\n\tconstructor(text) {\n\t\tthis.Text = text\n\t}\n\n}\n\nexport class MessageBox {\n\tstatic ButtonOkCancel = Object.freeze({ok:new MessageBoxButton('Ok'), cancel:new MessageBoxButton('Cancel')})\n\tstatic ButtonYesNo = Object.freeze({yes:new MessageBoxButton('Yes'), no:new MessageBoxButton('No')})\n\tstatic ButtonYesNoCancel = Object.freeze({yes:new MessageBoxButton('Yes'), no:new MessageBoxButton('No'), cancel:new MessageBoxButton('Cancel')})\n\n\tstatic async show (message, config) { return await msgbox_show(message, config) }\n\tstatic async error(message) { return await msgbox_error(message) }\n\tstatic async info(message) { return await msgbox_info(message) }\n\tstatic async warning(message) { return await msgbox_warning(message) }\n\tstatic async confirm(message, buttons) { return await msgbox_confirm(message, buttons) }\n}\n\n\n\n\n\nfunction createMessageDialog(message, config) {\n\tconst dialog = document.createElement('dialog')\n    dialog.classList.add('fgta5-messagebox-dialog')\n\n\tdialog.addEventListener('close', (evt) => {\n\t\tdialog.parentNode.removeChild(dialog)\n\t});\n\t\n\n    if (config.title) {\n\t\tdialog.divTitle = document.createElement('div')\n\t\tdialog.divTitle.classList.add('fgta5-messagebox-title')\n\t\tdialog.divTitle.innerHTML = config.title\n\t\tdialog.appendChild(dialog.divTitle)\n    }\n\n\t if (config.iconSvg!==undefined) {\n\t\tvar iconcss = iconsCss[config.iconcss] ? iconsCss[config.iconcss] : config.iconcss\n\t\tdialog.divIcon = document.createElement('div')\n\t\tdialog.divIcon.classList.add('fgta5-messagebox-icon')\n\t\t// dialog.divIcon.style.backgroundImage = `url:(\"data:image/svg+xml,${encodeURIComponent(config.iconSvg)}\")`\n\t\tdialog.divIcon.innerHTML = config.iconSvg\n\t\tdialog.appendChild(dialog.divIcon)\n\t} else if (config.iconcss!=undefined) {\n\t\tvar iconcss = iconsCss[config.iconcss] ? iconsCss[config.iconcss] : config.iconcss\n\t\tdialog.divIcon = document.createElement('div')\n\t\tdialog.divIcon.classList.add('fgta5-messagebox-icon')\n\t\tdialog.divIcon.classList.add(iconcss)\n\t\tdialog.appendChild(dialog.divIcon)\n\t}\n\n\tdialog.divContent = document.createElement('div')\n\tdialog.divContent.classList.add('fgta5-messagebox-content')\n\tdialog.divContent.innerHTML = message\n\tdialog.appendChild(dialog.divContent)\n\n\tdialog.divButtons = document.createElement('div')\n\tdialog.divButtons.classList.add('fgta5-messagebox-buttonsbar')\n\tdialog.appendChild(dialog.divButtons)\n\t\n\tdocument.body.appendChild(dialog)\n\treturn dialog\n}\n\n\nasync function msgbox_show(message, config) {\n\t\n\tif (config === undefined) config = {}\n\n\tvar dialog = createMessageDialog(message, config)\n\treturn new Promise((resolve)=>{\n\t\tif (config.buttons) {\n\t\t\tfor (const [key, btn] of Object.entries(config.buttons)) {\n\t\t\t\tconst btnEl = document.createElement('button')\n\t\t\t\tbtnEl.classList.add('fgta5-messagebox-button')\n\t\t\t\tbtnEl.innerHTML = btn.Text\n\t\t\t\tbtnEl.addEventListener('click', () => {\n\t\t\t\t\tdialog.close()\n\t\t\t\t\tresolve(key)\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\tdialog.divButtons.appendChild(btnEl)\n\t\t\t}\n\t\t} else {\n\t\t\tconst btnOk = document.createElement('button')\n\t\t\tbtnOk.classList.add('fgta5-messagebox-button')\n\t\t\tbtnOk.innerHTML = 'Ok'\n\t\t\tbtnOk.addEventListener('click', () => {\n\t\t\t\tdialog.close()\n\t\t\t\tresolve('ok')\n\t\t\t})\n\t\t\tdialog.divButtons.appendChild(btnOk) \n\t\t}\n\t\n\t\tdialog.showModal()\n\t});\n}\n\n\nasync function msgbox_error(message) {\n\treturn await msgbox_show(message, {iconSvg: ICON_ERROR})\n}\n\nasync function msgbox_info(message) {\n\treturn await msgbox_show(message, {iconSvg: ICON_INFO})\n}\nasync function msgbox_warning(message) {\n\treturn await msgbox_show(message, {iconSvg: ICON_WARNING})\n}\nasync function msgbox_confirm(message, buttons) {\n\tbuttons = buttons===undefined ? MessageBox.ButtonOkCancel : buttons \n\n\treturn await msgbox_show(message, {\n\t\ticonSvg: ICON_QUESTION,\n\t\tbuttons: buttons\n\t})\n}","export default class Modal  {\n\tstatic show (content) { return modal_show(content) }\n\tstatic createMask (message) { return modal_createMask(message) }\n\tstatic createProgress (config) { return modal_createProgress(config) }\n}\n\n\nfunction CreateModal() {\n\tconst modal = document.createElement('dialog')\n\tmodal.classList.add('fgta5-modal-message')\n\tmodal.addEventListener('close', (evt) => {\n\t\tmodal.parentNode.removeChild(modal)\n\t});\n\tdocument.body.appendChild(modal)\n\tmodal.showModal()\n\treturn modal\n}\n\n\nfunction modal_show(content) {\n\tconst modal = CreateModal()\n\treturn modal\n}\n\nfunction modal_createMask(message) {\n\tmessage =  message===undefined ? 'Please wait ...' : message\n\t\n\tconst modal = CreateModal()\n\n\tvar infoContainer = document.createElement('div')\n\tinfoContainer.classList.add('fgta5-modal-loadermask-msg')\n\tmodal.appendChild(infoContainer)\n\n\tvar spinner = document.createElement('div')\n\tspinner.classList.add('fgta5-modal-loadermask-msg-icon')\n\tspinner.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 200\"><radialGradient id=\"a11\" cx=\".66\" fx=\".66\" cy=\".3125\" fy=\".3125\" gradientTransform=\"scale(1.5)\"><stop offset=\"0\" stop-color=\"#575757\"></stop><stop offset=\".3\" stop-color=\"#575757\" stop-opacity=\".9\"></stop><stop offset=\".6\" stop-color=\"#575757\" stop-opacity=\".6\"></stop><stop offset=\".8\" stop-color=\"#575757\" stop-opacity=\".3\"></stop><stop offset=\"1\" stop-color=\"#575757\" stop-opacity=\"0\"></stop></radialGradient><circle transform-origin=\"center\" fill=\"none\" stroke=\"url(#a11)\" stroke-width=\"30\" stroke-linecap=\"round\" stroke-dasharray=\"200 1000\" stroke-dashoffset=\"0\" cx=\"100\" cy=\"100\" r=\"70\"><animateTransform type=\"rotate\" attributeName=\"transform\" calcMode=\"spline\" dur=\"1.8\" values=\"360;0\" keyTimes=\"0;1\" keySplines=\"0 0 1 1\" repeatCount=\"indefinite\"></animateTransform></circle><circle transform-origin=\"center\" fill=\"none\" opacity=\".2\" stroke=\"#575757\" stroke-width=\"30\" stroke-linecap=\"round\" cx=\"100\" cy=\"100\" r=\"70\"></circle></svg>`\n\tinfoContainer.appendChild(spinner)\n\n\tvar infoText = document.createElement('div')\n\tinfoText.classList.add('fgta5-modal-loadermask-msg-text')\n\tinfoText.innerHTML = message\n\tinfoContainer.appendChild(infoText)\n\n\tmodal.setText = (message) => {\n\t\tinfoText.innerHTML = message\n\t}\n\n\treturn modal\n}\n\n\nfunction modal_createProgress(config) {\n\tif (config === undefined) config = {}\n\t\n\n\tconst modal = CreateModal()\n\n\tmodal.IsError = false\n\t\n\n\tvar prgBarErrIcon = document.createElement('div')\n\tmodal.appendChild(prgBarErrIcon)\n\n\tvar prgBarContainer = document.createElement('div')\n\tprgBarContainer.classList.add('fgta5-modal-progressbar-container')\n\tmodal.appendChild(prgBarContainer)\n\n\tvar prgBar = document.createElement('label')\n\tprgBar.classList.add('fgta5-modal-progressbar')\n\tprgBarContainer.appendChild(prgBar)\n\n\tvar prgMsg = document.createElement('div')\n\tprgMsg.classList.add('fgta5-modal-progressbar-text')\n\tmodal.appendChild(prgMsg)\n\n\tmodal.setProgress = function (progress, message) {\n\t\tif (progress > 100) progress = 100\n\t\tprgBar.innerHTML = `${progress}%`\n\t\tprgBar.style.width = `${progress}%`\n\t\tprgMsg.innerHTML = message\n\t}\n\n\n\tmodal.setError = function (message) {\n\t\tmodal.IsError = true\n\n\t\tprgBarErrIcon.classList.add('fgta5-icon-error')\n\t\tprgBarErrIcon.style.height = '32px'\n\t\tprgBarErrIcon.style.marginBottom = '10px'\n\n\t\tprgMsg.innerHTML = message\n\t\tprgMsg.setAttribute('error', 'true')\n\t\tprgBar.setAttribute('error', 'true')\n\t}\n\n\tmodal.finish = function (text, completed) {\n\t\tif (text===undefined) text = 'Done'\n\t\tif (completed===undefined) completed = true\n\n\t\tif (config.buttonClose===true || modal.IsError) {\n\t\t\tif (completed) {\n\t\t\t\tprgMsg.style.display = 'none'\n\t\t\t\tprgBar.style.width = '100%'\n\t\t\t\tprgBar.innerHTML = '100%'\n\t\t\t}\n\n\t\t\tvar div = document.createElement('div')\n\t\t\tdiv.style.textAlign = 'center'\n\t\t\tdiv.style.marginTop = '10px'\n\t\t\tdiv.style.marginBottom = '0'\n\t\t\tvar btn = document.createElement('button')\n\t\t\tbtn.classList.add('fgta5-modal-button')\n\t\t\tbtn.innerHTML = text\n\t\t\tbtn.addEventListener('click', () => {\n\t\t\t\tmodal.close()\n\t\t\t})\n\t\t\tdiv.appendChild(btn)\n\t\t\tmodal.appendChild(div)\n\t\t} else {\n\t\t\tmodal.close()\n\t\t}\n\t}\n\n\treturn modal\n}\n\n","\n\nconst MENU = `<svg version=\"1.1\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n  <g stroke-linecap=\"square\">\n\t<rect x=\"19.5\" y=\"19.5\" width=\"12\" height=\"12\" fill=\"currentColor\"/>\n\t<rect x=\"2\" y=\"20\" width=\"12\" height=\"12\" fill=\"currentColor\"/>\n\t<rect x=\"20\" y=\"2\" width=\"12\" height=\"12\" fill=\"currentColor\"/>\n\t<rect x=\"2\" y=\"2\" width=\"12\" height=\"12\" fill=\"currentColor\"/>\n  </g>\n</svg>`\n\nconst CLOSE = `<svg version=\"1.1\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n  <g stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"5\">\n\t<path d=\"M4 4 L28 28\"/>\n\t<path d=\"M4 28 L28 4\"/>\n  </g>\n</svg>`\n\nconst BACK = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m5.5873 1.1684-2.515 3.0773 2.515 3.0773\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"1.3229\"/>\n</svg>`\n\nconst ACTION = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m3.4777 0.49839-1.3861 4.1094h1.945l-1.2743 3.3919 3.7782-4.663h-1.9226l1.252-2.8383z\"/>\n</svg>`\n\nconst USER = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<g stroke=\"#fff\" fill=\"currentColor\" stroke-linecap=\"round\" stroke-width=\".223\">\n<path d=\"m4.2633 4.9935c-0.85356-0.0027456-2.0017 0.17383-2.3611 0.28348-0.35939 0.10964-0.71426 0.67396-0.71727 0.93517 0.62166 0.68677 2.0469 1.1278 3.0784 1.3222 1.0315-0.19439 2.4572-0.6354 3.0789-1.3222-0.0030132-0.26121-0.35788-0.82553-0.71727-0.93517-0.35939-0.10964-1.5081-0.28622-2.3616-0.28348z\"/>\n<path d=\"m3.9018 5.7326-0.37517 1.8759 0.69032 0.57026 0.73534-0.55525-0.36016-1.8909z\" stroke-linejoin=\"bevel\"/>\n<rect x=\"3.8568\" y=\"4.9072\" width=\".76535\" height=\".76535\" stroke-linejoin=\"bevel\"/>\n<circle cx=\"4.2238\" cy=\"2.7633\" r=\"2.0523\"/>\n</g>\n</svg>`\n\n\nconst LOGOUT = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<g stroke=\"currentColor\" fill=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"bevel\">\n<path d=\"m5.0725 0.70989h-4.3649v7.0783h4.3649z\" fill=\"none\" stroke-width=\".423\"/>\n<path d=\"m5.0725 0.70989-3.1237 2.5006 0.021392 4.5776h-1.2627l-2.6e-7 -7.0783z\" stroke-width=\".423\"/>\n<path d=\"m3.1515 5.0723h3.4527v1.3606l1.3955-1.9759-1.3955-1.9759v1.3606h-3.4527z\" stroke-width=\".423\"/>\n</g>\n</svg>`\n\nconst SEARCH = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<g fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"square\">\n<circle cx=\"4.9312\" cy=\"3.5669\" r=\"2.7378\" stroke-width=\".66146\"/>\n<path d=\"m1.1989 7.1728 0.88885-0.80617\" stroke-width=\"1.3229\"/>\n</g>\n</svg>`\n\nconst SETTING = `<svg version=\"1.1\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n<g transform=\"matrix(.82343 0 0 .82343 4.0086 7.2155)\" fill=\"currentColor\" stroke-width=\"1.2144\">\n<path d=\"m0 0h48v48h-48z\" fill=\"none\"/>\n<path d=\"m38.86 25.95c0.08-0.64 0.14-1.29 0.14-1.95s-0.06-1.31-0.14-1.95l4.23-3.31c0.38-0.3 0.49-0.84 0.24-1.28l-4-6.93c-0.25-0.43-0.77-0.61-1.22-0.43l-4.98 2.01c-1.03-0.79-2.16-1.46-3.38-1.97l-0.75-5.3c-0.09-0.47-0.5-0.84-1-0.84h-8c-0.5 0-0.91 0.37-0.99 0.84l-0.75 5.3c-1.22 0.51-2.35 1.17-3.38 1.97l-4.98-2.01c-0.45-0.17-0.97 0-1.22 0.43l-4 6.93c-0.25 0.43-0.14 0.97 0.24 1.28l4.22 3.31c-0.08 0.64-0.14 1.29-0.14 1.95s0.06 1.31 0.14 1.95l-4.22 3.31c-0.38 0.3-0.49 0.84-0.24 1.28l4 6.93c0.25 0.43 0.77 0.61 1.22 0.43l4.98-2.01c1.03 0.79 2.16 1.46 3.38 1.97l0.75 5.3c0.08 0.47 0.49 0.84 0.99 0.84h8c0.5 0 0.91-0.37 0.99-0.84l0.75-5.3c1.22-0.51 2.35-1.17 3.38-1.97l4.98 2.01c0.45 0.17 0.97 0 1.22-0.43l4-6.93c0.25-0.43 0.14-0.97-0.24-1.28zm-14.86 5.05c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\n</g>\n</svg>`\n\n\nconst HOME = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<g fill=\"currentColor\">\n<rect x=\"4.2337\" y=\"3.9367\" width=\"3.0541\" height=\"4.063\"/>\n<rect x=\"1.2121\" y=\"3.9367\" width=\".9332\" height=\"4.0184\"/>\n<path d=\"m4.2479 1.0276 3.7518 3.4383-7.5035-1e-7z\"/>\n<rect x=\"1.6787\" y=\"3.9367\" width=\"3.2135\" height=\"1.4646\"/>\n</g>\n</svg>`\n\n\nconst TRASH = `<svg version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\">\n<g fill=\"currentColor\">\n<path d=\"m6.5113 2.4805h-4.775l0.85705 5.5191h3.0609z\" stroke-linecap=\"square\" stroke-width=\"1.3229\"/>\n<path d=\"m3.2115 0.40101v0.41341h-1.8266v0.86816h5.519v-0.86816h-1.8462v-0.41341z\"/>\n</g>\n</svg>`\n\nconst DIRDEF = '<svg width=\"32\" height=\"32\" version=\"1.1\" viewBox=\"0 0 8.4667 8.4667\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\".4961\" y=\"3.9307\" width=\"7.5035\" height=\"4.0689\"/><path d=\"m0.4961 3.2521h7.5035l1e-7 -0.71184h-4.2386l-0.87664-1.3525h-2.3883z\"/><rect x=\"5.8727\" y=\"5.303\" width=\"1.2058\" height=\"1.1077\" fill=\"#fff\"/></svg>'\n\n\n\nconst UNSORT = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg version=\"1.1\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m2.1656 5.2663 3.8057-4.6994 3.8057 4.6994z\" fill=\"currentColor\"/>\n<path d=\"m2.1656 6.6955 3.8057 4.6994 3.8057-4.6994z\" fill=\"currentColor\"/>\n</svg>`\n\nconst SORTASC = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg version=\"1.1\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m2.1943 9.1198 3.8057-6.5338 3.8057 6.5338z\" fill=\"currentColor\"/>\n</svg>`\n\nconst SORTDESC = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg version=\"1.1\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"m2.1943 2.586 3.8057 6.5338 3.8057-6.5338z\" fill=\"currentColor\"/>\n</svg>\n`\n\nconst YES = `<svg width=\"1rem\" height=\"1rem\" viewBox=\"0 0 30 30\" xmlns=\"http://www.w3.org/2000/svg\">\n<circle cx=\"15\" cy=\"15\" r=\"12\" stroke=\"currentColor\" stroke-width=\"1\" fill=\"none\" />\n<circle cx=\"15\" cy=\"15\" r=\"8\" fill=\"currentColor\" />\n</svg>`\n\nconst NO = `<svg width=\"1rem\" height=\"1rem\" viewBox=\"0 0 30 30\" xmlns=\"http://www.w3.org/2000/svg\">\n<circle cx=\"15\" cy=\"15\" r=\"12\" stroke=\"currentColor\" stroke-width=\"1\" fill=\"none\" />\n</svg>`\n\nconst NEWDOCUMENT = `<svg version=\"1.1\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n<g stroke-linecap=\"round\" stroke-linejoin=\"bevel\" stroke-width=\"2\">\n<path d=\"m40 34.75v-30.75h-30v41h20z\" fill=\"#e6e6e6\" stroke=\"#000\"/>\n<circle cx=\"25\" cy=\"21\" r=\"9\" fill=\"#59f\" stroke=\"#000\"/>\n<path d=\"m30 45v-10h10z\"/>\n<path d=\"m20 21h10\" stroke=\"#fff\"/>\n<path d=\"m25 16v10\" stroke=\"#fff\"/>\n</g>\n</svg>`\n\n\nconst PROGRAM = `<svg version=\"1.1\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n<g fill=\"currentColor\">\n<path d=\"m20.019 2c-2.9332 0-5.2348 2.3057-5.2348 5.2389v3.1417h-8.3806c-2.3047 0-4.1903 1.8856-4.1903 4.1903v7.9628h3.1417c3.1427 0 5.6567 2.514 5.6567 5.6567 0 3.1427-2.514 5.6567-5.6567 5.6567h-3.3547v7.9628c0 2.3047 1.8856 4.1903 4.1903 4.1903h7.9628v-3.1458c0-3.1427 2.514-5.6567 5.6567-5.6567 3.1427 0 5.6567 2.514 5.6567 5.6567v3.1458h7.9628c2.3047 0 4.1903-1.8856 4.1903-4.1903v-8.3806h3.1417c2.9332 0 5.2389-2.3057 5.2389-5.2389 0-2.9332-2.3057-5.2389-5.2389-5.2389h-3.1417v-8.3806c0-2.3047-1.8856-4.1903-4.1903-4.1903h-8.3806v-3.1417c0.20951-2.9332-2.0968-5.2389-5.03-5.2389z\"/>\n</g>\n</svg>`\n\n\nexport default class Icons {\n\tstatic get MENU() { return MENU }\n\tstatic get CLOSE() { return CLOSE }\n\tstatic get BACK() { return BACK }\n\tstatic get ACTION() { return ACTION }\n\tstatic get USER() { return USER }\n\tstatic get LOGOUT() { return LOGOUT }\n\tstatic get SEARCH() { return SEARCH }\n\tstatic get SETTING() { return SETTING }\n\tstatic get HOME() { return HOME }\n\tstatic get TRASH() { return TRASH }\n\tstatic get DIRDEF() { return DIRDEF }\n\tstatic get UNSORT() { return UNSORT }\n\tstatic get SORTASC() { return SORTASC }\n\tstatic get SORTDESC() { return SORTDESC }\n\tstatic get YES() { return YES }\n\tstatic get NO() { return NO }\n\tstatic get NEWDOCUMENT() { return NEWDOCUMENT }\n\tstatic get PROGRAM() { return PROGRAM }\n}","import ICONS from './Icons.mjs'\nimport Component from \"./Component.mjs\"\n\nconst ATTR_ROWSELECTOR = 'rowselector'\nconst ATTR_AUTONUMBER = 'autonumber'\nconst ATTR_BINDING = 'binding'\nconst ATTR_SORTING = 'sorting'\nconst ATTR_FORMATTER = 'formatter'\nconst ATTR_TEXTALIGN = 'text-align'\nconst ATTR_ROWSELECTED = 'data-selected'\nconst ATTR_COLNAME = 'data-name'\nconst ATTR_VALUE = 'data-value'\nconst ATTR_ROWKEY = 'key'\nconst ATTR_ROWKEYVALUE = 'keyvalue'\nconst ATTR_ROWPROCESSING = 'data-rowprocessing'\nconst ATTR_MAINHEADROW = 'data-mainrowhead' // menandai row utama header (berisi contol sorting)\nconst ATTR_LINENUMBER = \"linenumber\"\n\nconst TYPE_ROWSELECTOR = 'rowselector'\nconst TYPE_AUTONUMBER = 'autonumber'\nconst TYPE_STANDARD = 'standard'\n\nconst cellClickEvent = (data) => { return new CustomEvent('cellclick', data) }\nconst cellDblClickEvent = (data) => { return new CustomEvent('celldblclick', data) }\nconst rowRenderEvent = (data) => { return new CustomEvent('rowrender', data) }\nconst rowRemovingEvent = (data) => { return new CustomEvent('rowremoving', data) }\nconst sortingEvent = (data) => { return new CustomEvent('sorting', data) }\nconst nextDataEvent = (data) => { return new CustomEvent('nextdata', data) }\n\nexport default class Gridview extends Component {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\t\n\t\tvar el = this.Element\n\t\tif (el!=undefined) {\n\t\t\tif (el.tagName.toLowerCase()!='table' ) {\n\t\t\t\tthrow new Error(`element '${id}' is not table`)\n\t\t\t}\n\t\t\tgrv_construct(this)\n\t\t} else {\n\t\t\tthrow new Error(`element id '${id}' for gridview is not defined`)\n\t\t}\n\t}\n\n\t/* menambahkan satu baris */\n\taddRow(row) {\n\t\treturn grv_addRow(this, row)\n\t}\n\n\t/* menambahkan multi baris */\n\taddRows(rows) {\n\t\tgrv_addRows(this, rows)\n\t}\n\n\n\tupdateRow(tr, data) {\n\t\tgrv_updateRow(this, tr, data)\n\t}\n\n\n\tsetNext(nextoffset, limit) {\n\t\t// grv_setNext(this, nextoffset, limit)\n\t}\n\n\tscrollToFooter() {\n\t\tscrollToFooter(this)\n\t}\n\n\t#columndata\n\tget Columns() { return this.#columndata }\n\tsetColumnData(columndata) {\n\t\tthis.#columndata = columndata\n\t}\n\n\t#key\n\tget Key() { return this.#key }\n\tsetKey(key) {\n\t\tthis.#key = key\n\t}\n\n\n\n\trowRender(tr) {\n\t\tgrv_rowRender(this, tr)\n\t}\n\n\tremoveSelected(onFinished) {\n\t\tgrv_removeSelected(this, onFinished)\n\t}\n\n\tremoveRow(tr) {\n\t\tgrv_removeRow(this, tr)\n\t}\n\n\tgetSelected() {\n\t\treturn grv_getSelected(this)\n\t}\n\n\n\thasRowPendingProcess() {\n\t\treturn grv_hasRowPendingProcess(this)\n\t}\n\n\taddEventListener(evt, callback) {\n\t\tthis.Listener.addEventListener(evt, callback)\n\t}\n\n\tclear() {\n\t\tthis.Nodes.Tbody.innerHTML = ''\n\t}\n\n\tsetNext(nextoffset, limit)  {\n\t\tgrv_setNext(this, nextoffset, limit)\n\t}\n\n\tgetSort() {\n\t\treturn grv_getSort(this)\n\t}\n\n\t#criteria = {}\n\tget Criteria() { return this.#criteria } \n\tsetCriteria(criteria) {\n\t\tthis.#criteria = criteria\n\t}\n\n\n\t#currentRow\n\tget CurrentRow() { return this.#currentRow }\n\tset CurrentRow(tr) {\n\t\tthis.#currentRow = tr\n\t\tgrv_setCurentRow(this, tr)\n\t}\n\t\n\t\n\n\tpreviousRecord() {\n\t\tgrv_previousRecord(this)\n\t}\n\n\tnextRecord() {\n\t\tgrv_nextRecord(this)\n\t}\n}\n\n\nfunction grv_previousRecord(self) {\n\tconst currentRow = self.CurrentRow\n\tif (currentRow==null) {\n\t\t// set row pertama sebagai current row\n\t\tconsole.log('set current row to first row')\n\t\tconst tbody = self.Nodes.Tbody\n\t\tconst tr = tbody.querySelector('tr')\n\t\tself.CurrentRow = tr\n\t} else {\n\t\tconst tr = currentRow\n\t\tif (tr.previousElementSibling) {\n\t\t\tself.CurrentRow = tr.previousElementSibling\n\t\t}\n\t}\n}\n\n\nfunction grv_nextRecord(self) {\n\tconst currentRow = self.CurrentRow\n\tif (currentRow==null) {\n\t\t// set row pertama sebagai current row\n\t\tconsole.log('set current row to first row')\n\t\tconst tbody = self.Nodes.Tbody\n\t\tconst tr = tbody.querySelector('tr')\n\t\tself.CurrentRow = tr\n\t} else {\n\t\tconst tr = currentRow\n\t\tif (tr.nextElementSibling) {\n\t\t\tself.CurrentRow = tr.nextElementSibling\n\t\t}\n\t}\n}\n\n\nfunction grv_setCurentRow(self, tr) {\n\t// kosongkan atribute terpilih\t\n\tconst tbody = self.Nodes.Tbody\n\tconst rows = tbody.querySelectorAll('tr[data-currentrow]')\n\trows.forEach(tr=>{\n\t\ttr.removeAttribute('data-currentrow')\n\t})\n\n\tif (tr!=null) {\n\t\t// set atribut terpilih untuk tr\n\t\ttr.setAttribute('data-currentrow', '')\n\t\tif (!isElementInViewport(tr)) {\n\t\t\ttr.scrollIntoView({ behavior: 'smooth', block: 'center' });\n\t\t}\n\t}\n}\n\nfunction grv_removeRow(self, tr) {\n\tconst tbody = self.Nodes.Tbody\n\ttr.remove()\n\tif (tbody.children.length==0) {\n\t\tself.CurrentRow = null\n\t}\n}\n\nfunction isElementInViewport(el) {\n\tconst rect = el.getBoundingClientRect();\n\treturn (\n\t\trect.top >= 0 &&\n\t\trect.left >= 0 &&\n\t\trect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n\t\trect.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t);\n}\n\nfunction grv_construct(self) {\n\tvar tbl = self.Element\n\tvar thead = tbl.querySelector('thead')\n\tvar tbody = document.createElement('tbody')\n\tvar tfoot = document.createElement('tfoot')\n\t\n\t\n\t// tambahkan tbody dan tfoot sebelum thead\n\ttbl.prepend(tfoot)\n\ttbl.prepend(tbody)\n\n\t// tambahkan referensi elemen \n\tself.Formatters =  {}\n\tself.Listener = new EventTarget()\n\tself.Nodes = {\n\t\tTable: tbl,\n\t\tThead: thead,\n\t\tTbody: tbody,\n\t\tTfoot: tfoot\n\t}\n\n\n\t// setup table\n\ttbl.classList.add('fgta5-gridview')\n\ttbl.setAttribute('cellspacing', 0)\n\t\n\n\t// baca kolom\n\tconst {headrow, columns, key} =grv_getColumns(self)\n\tself.setColumnData(columns)\n\tself.setKey(key)\n\n\t// create header\n\theadrow.remove()\n\tgrv_setupHeader(self, columns)\n\n\t\n\n\n\t// const columns = grv_getColumns()\n\t// grv_createTableHaeder(self, tbl)\n\n\n}\n\nfunction scrollToFooter(self) {\n\tvar tfoot = self.Nodes.Tfoot\n\ttfoot.scrollIntoView({ behavior: 'smooth' });\n}\n\n\nfunction grv_getColumns(self) {\n\tvar columns = []\n\tvar thead = self.Nodes.Thead\n\tvar headrow = thead.querySelector(\"tr[data-header]\")\n\tvar ths = headrow.querySelectorAll(\"th\")\n\tfor (var th of ths) {\n\t\tlet column = {}\n\t\tvar rowselector = th.getAttribute(ATTR_ROWSELECTOR)\n\t\tvar autonumber = th.getAttribute(ATTR_AUTONUMBER)\n\t\tvar binding = th.getAttribute(ATTR_BINDING)\n\t\tvar name = th.getAttribute(ATTR_COLNAME)\n\t\tvar formatter = th.getAttribute(ATTR_FORMATTER)\n\t\tvar textalign = (th.getAttribute(ATTR_TEXTALIGN) ?? '').toLowerCase()\n\t\tvar sorting = (th.getAttribute(ATTR_SORTING) ?? '').toLowerCase() === \"true\" ? true : false\n\t\tvar cssclass = th.getAttribute('class')\n\t\tvar cssstyle = th.getAttribute('style')\n\t\tvar html = th.innerHTML\n\t\t\n\t\t\n\n\t\t// baca tipe column\n\t\tif (rowselector!=null) {\n\t\t\tcolumn.type = TYPE_ROWSELECTOR\n\t\t} else if (autonumber!=null) {\n\t\t\tcolumn.type = TYPE_AUTONUMBER\n\t\t} else {\n\t\t\tcolumn.type = TYPE_STANDARD\n\t\t}\n\n\t\t// ambil daftar class\n\t\tcolumn.cssclass = cssclass\n\t\tcolumn.cssstyle = cssstyle\n\t\tcolumn.binding = binding\n\t\tcolumn.name = name \n\t\tcolumn.formatter = formatter\n\t\tcolumn.textalign = textalign=='' ? 'left' : textalign\n\t\tcolumn.sorting = sorting\n\t\tcolumn.html = html\n\n\t\tcolumns.push(column)\n\t}\n\n\tvar key = headrow.getAttribute(ATTR_ROWKEY)\n\n\treturn {\n\t\theadrow: headrow,\n\t\tcolumns: columns,\n\t\tkey: key\n\t}\n}\n\n\nfunction grv_setupHeader(self, columns) {\n\tvar tr = document.createElement('tr')\n\ttr.setAttribute(ATTR_MAINHEADROW, '')\n\n\tfor (let column of columns) {\n\t\tvar th = document.createElement('th')\n\n\t\tsetAttributeIfNotNull(th, 'class', column.cssclass)\n\t\tsetAttributeIfNotNull(th, 'style', column.cssstyle)\n\t\tsetAttributeIfNotNull(th, ATTR_COLNAME, column.name)\n\n\t\tth.classList.add('fgta5-gridview-head')\n\t\tth.setAttribute(ATTR_TEXTALIGN, column.textalign)\n\n\t\tif (column.type==TYPE_ROWSELECTOR) {\n\t\t\tvar chk = createCheckbox()\n\t\t\tchk.addEventListener('change', (evt)=>{ grv_headerCheckboxChange(self, evt)})\n\t\t\t\n\t\t\tth.appendChild(chk)\n\t\t\tth.setAttribute(ATTR_ROWSELECTOR, '')\n\n\t\t} else if (column.type==TYPE_AUTONUMBER) {\n\t\t\tth.setAttribute(ATTR_AUTONUMBER, '')\n\t\t\tth.innerHTML = column.html\n\t\t} else {\n\n\t\t\tif (column.sorting) {\n\t\t\t\tvar container = document.createElement('span')\n\t\t\t\tcontainer.setAttribute('container', '')\n\t\t\t\tcontainer.setAttribute(ATTR_TEXTALIGN, column.textalign)\n\n\t\t\t\tlet sortbtn = document.createElement('button')\n\t\t\t\tsortbtn.innerHTML = ICONS.UNSORT\n\t\t\t\tsortbtn.setAttribute(ATTR_SORTING, '')\n\t\t\t\tsortbtn.setAttribute(ATTR_BINDING, column.binding)\n\t\t\t\tsortbtn.addEventListener('click', (evt)=>{ grv_sort(self, sortbtn) })\n\n\t\t\t\tvar text = document.createElement('div')\n\t\t\t\ttext.innerHTML = column.html\n\n\t\t\t\tcontainer.appendChild(sortbtn)\n\t\t\t\tcontainer.appendChild(text)\n\n\t\t\t\tth.classList.add('fgta5-gridview-colwithbutton')\n\t\t\t\tth.appendChild(container)\n\n\t\t\t} else {\n\n\t\t\t\tvar text = document.createTextNode(column.html)\n\t\t\t\tth.appendChild(text)\n\t\t\t}\n\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t}\n\n\t\ttr.appendChild(th)\n\t}\n\tself.Nodes.Thead.appendChild(tr)\n}\n\n\n\n\nfunction setAttributeIfNotNull(el, attrname, attrvalue) {\n\tif (attrvalue!=null) {\n\t\tel.setAttribute(attrname, attrvalue)\n\t}\n}\n\nfunction createCheckbox() {\n\tvar chk = document.createElement('label')\n\tvar input = document.createElement('input')\n\tvar span = document.createElement('span')\n\n\tchk.classList.add('fgta5-gridview-checkbox')\n\tchk.appendChild(input)\n\tchk.appendChild(span)\n\tchk.checkbox = input\n\n\tinput.setAttribute('type', 'checkbox')\n\n\tspan.classList.add('fgta5-gridview-checkmark')\n\n\treturn chk\n}\n\n\nfunction grv_headerCheckboxChange(self, evt) {\n\tvar headchk = evt.target\n\tvar trs = self.Nodes.Tbody.querySelectorAll('tr');\n\tfor (var tr of trs) {\n\t\tvar chk = tr.querySelector(`td[${ATTR_ROWSELECTOR}] input[type=\"checkbox\"]`)\n\t\tchk.checked = headchk.checked\n\t\tif (headchk.checked) {\n\t\t\ttr.setAttribute(ATTR_ROWSELECTED, '')\n\t\t} else {\n\t\t\ttr.removeAttribute(ATTR_ROWSELECTED)\n\t\t}\n\t}\n}\n\nfunction grv_rowCheckboxChange(self, evt) {\n\tvar chk = evt.target\n\tvar tr = chk.closest('tr')\n\tif (chk.checked) {\n\t\ttr.setAttribute(ATTR_ROWSELECTED, '')\n\t} else {\n\t\ttr.removeAttribute(ATTR_ROWSELECTED)\n\n\t\t// uncheck header\n\t\tvar headchk = self.Nodes.Thead.querySelector(`tr th[${ATTR_ROWSELECTOR}] input[type=\"checkbox\"]`)\n\t\theadchk.checked = false\n\t}\n}\n\nfunction grv_addRows(self, rows) {\n\tvar tbody = self.Nodes.Tbody\n\tfor (var row of rows) {\n\t\tgrv_addRow(self, row, tbody)\n\t}\n}\n\n\nfunction grv_updateRow(self, tr, data) {\n\tconst tds = tr.querySelectorAll('td')\n\ttds.forEach(td => {\n\t\tconst name = td.getAttribute('data-name')\n\t\tif (name!=null && data[name]!==undefined) {\n\t\t\t// ambil formater column\t\n\t\t\tlet value =  data[name]\n\t\t\tconst func = self.Formatters[name]\n\t\t\tif (typeof func==='function') {\n\t\t\t\tvalue = func(data[name])\n\t\t\t} \n\t\t\ttd.innerHTML = value\n\t\t}\t\n\t})\n\tgrv_rowRender(self, tr)\n}\n\n\n\nfunction grv_addRow(self, row, tbody) {\n\tif (tbody===undefined) {\n\t\ttbody = self.Nodes.Tbody\n\t}\n\n\tvar tr = document.createElement('tr')\n\ttr.classList.add('fgta5-gridview-row')\n\n\tvar key = self.Key\n\tif (key!=null) {\n\t\tvar keyvalue = row[key]\n\t\tif (keyvalue!=null) {\n\t\t\ttr.setAttribute(ATTR_ROWKEY, key)\n\t\t\ttr.setAttribute(ATTR_ROWKEYVALUE, keyvalue)\n\t\t}\n\t}\n\n\tfor (var column of self.Columns) {\n\t\tlet td = document.createElement('td')\n\n\t\tsetAttributeIfNotNull(td, 'class', column.cssclass)\n\t\tsetAttributeIfNotNull(td, 'style', column.cssstyle)\n\t\tsetAttributeIfNotNull(td, ATTR_COLNAME, column.name)\n\t\tsetAttributeIfNotNull(td, ATTR_BINDING, column.binding)\n\t\tsetAttributeIfNotNull(td, ATTR_FORMATTER, column.formatter)\n\t\tsetAttributeIfNotNull(td, ATTR_TEXTALIGN, column.textalign)\n\t\n\n\t\ttd.classList.add('fgta5-gridview-cell')\n\t\n\t\tif (column.type==TYPE_ROWSELECTOR) {\n\t\t\tvar chk = createCheckbox()\n\t\t\tchk.addEventListener('change', (evt)=>{ grv_rowCheckboxChange(self, evt) })\n\t\t\ttd.appendChild(chk)\n\t\t\ttd.setAttribute(ATTR_ROWSELECTOR, '')\n\t\t} else if (column.type==TYPE_AUTONUMBER) {\n\t\t\tvar linenumber = grv_getLastLineNumber(self)\n\n\t\t\tlinenumber++\n\t\t\ttd.setAttribute(ATTR_AUTONUMBER, '')\n\t\t\ttd.setAttribute(ATTR_LINENUMBER, linenumber)\n\t\t\ttd.innerHTML = linenumber\n\t\t\ttd.addEventListener('click', (evt)=>{ grv_cellClick(self, td, tr) })\n\t\t\ttd.addEventListener('dblclick', (evt)=>{ grv_cellDblClick(self, td, tr) })\n\t\t} else {\n\n\t\t\tlet value = row[column.binding]\n\t\t\ttd.setAttribute(ATTR_VALUE, value)\n\n\t\t\tif (column.formatter!=null) {\n\t\t\t\ttry {\n\t\t\t\t\t// \teval(`value=${column.formatter}`)\n\t\t\t\t\tlet func = self.Formatters[column.name]\n\t\t\t\t\tif (func===undefined) {\n\t\t\t\t\t\tfunc = grv_createFunction(column.formatter)\n\t\t\t\t\t\tif (typeof func === 'function') {\n\t\t\t\t\t\t\tself.Formatters[column.name] = func\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\tif (typeof func === 'function') {\n\t\t\t\t\t\tvalue = func(value)\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (value!=null) {\n\t\t\t\ttd.innerHTML = value\n\t\t\t} else {\n\t\t\t\ttd.innerHTML = ''\n\t\t\t}\n\n\t\t\ttd.addEventListener('click', (evt)=>{ grv_cellClick(self, td, tr) })\n\t\t\ttd.addEventListener('dblclick', (evt)=>{ grv_cellDblClick(self, td, tr) })\n\t\t}\n\n\t\t\n\t\n\t\ttr.appendChild(td)\n\t}\n\n\tgrv_rowRender(self, tr)\n\n\tif (tbody.children.length==0) {\n\t\tself.CurrentRow = tr\n\t}\n\n\n\ttbody.appendChild(tr)\n\t\n\treturn tr\n}\n\n\nfunction grv_cellClick(self, td, tr) {\n\tself.CurrentRow = tr\n\tself.Listener.dispatchEvent(cellClickEvent({\n\t\tdetail: {tr: tr, td: td}\n\t}))\n}\n\nfunction grv_cellDblClick(self, td, tr) {\n\tself.CurrentRow = tr\n\tself.Listener.dispatchEvent(cellDblClickEvent({\n\t\tdetail: {tr: tr, td: td}\n\t}))\n}\n\nfunction grv_rowRender(self, tr) {\n\tself.Listener.dispatchEvent(rowRenderEvent({\n\t\tdetail: {tr: tr}\n\t}))\n}\n\nfunction grv_sort(self, btn) {\n\tvar sorting = btn.getAttribute(ATTR_SORTING)\n\tvar binding = btn.getAttribute(ATTR_BINDING)\n\tvar th = btn.closest('th')\n\t\n\tth.setAttribute(ATTR_BINDING, binding)\n\n\tif (sorting==null || sorting=='') {\n\t\t// ubah ke ascending\n\t\tth.setAttribute(ATTR_SORTING, 'asc')\n\t\tbtn.setAttribute(ATTR_SORTING, 'asc')\n\t\tbtn.innerHTML = ICONS.SORTASC\n\t} else if (sorting=='asc') {\n\t\t// ubah ke desc\n\t\tth.setAttribute(ATTR_SORTING, 'desc')\n\t\tbtn.setAttribute(ATTR_SORTING, 'desc')\n\t\tbtn.innerHTML = ICONS.SORTDESC\n\t} else {\n\t\t// ubah ke unsort\n\t\tth.removeAttribute(ATTR_SORTING)\n\t\tbtn.setAttribute(ATTR_SORTING, '')\n\t\tbtn.innerHTML = ICONS.UNSORT\n\t}\n\n\t// ambil semua kolom yang di sort\n\tconst tr = btn.closest('tr')\n\tconst sort = grv_getSort(self, tr)\n\tconst criteria = self.Criteria\n\n\tself.Listener.dispatchEvent(sortingEvent({\n\t\tdetail: {\n\t\t\tsort: sort,\n\t\t\tcriteria: criteria\n\t\t\n\t\t}\n\t}))\n\n}\n\n\nfunction grv_getSelected(self) {\n\tvar chks = self.Nodes.Tbody.querySelectorAll(`tr td[${ATTR_ROWSELECTOR}] input[type=\"checkbox\"]:checked`);\n\tif (chks.length==0) {\n\t\treturn []\n\t}\n\n\tconst selected = []\n\tfor (let chk of chks) {\n\t\tconst tr = chk.closest('tr')\n\t\tconst keyvalue = tr.getAttribute(ATTR_ROWKEYVALUE)\n\t\tselected.push(keyvalue)\n\t}\n\n\treturn selected\n}\n\nfunction grv_removeSelected(self, onFinished) {\n\tvar chks = self.Nodes.Tbody.querySelectorAll(`tr td[${ATTR_ROWSELECTOR}] input[type=\"checkbox\"]:checked`);\n\tif (chks.length==0) {\n\t\tif (typeof onFinished==='function') {\n\t\t\tonFinished()\n\t\t}\n\t\treturn\n\t}\n\n\n\tfor (var chk of chks) {\n\t\tlet tr = chk.closest('tr')\n\t\ttr.MarkProcessing = (p)=>{\n\t\t\tif (p===true || p===undefined) {\n\t\t\t\ttr.setAttribute(ATTR_ROWPROCESSING, '')\n\t\t\t} else {\n\t\t\t\ttr.removeAttribute(ATTR_ROWPROCESSING)\n\t\t\t}\n\t\t}\n\n\t\tlet evt = rowRemovingEvent({\n\t\t\tdetail: {\n\t\t\t\ttr: tr,\n\t\t\t\tonFinished: onFinished\n\t\t\t}\n\t\t})\n\n\t\ttr.MarkProcessing()\n\t\tself.Listener.dispatchEvent(evt)\n\t\tif (!evt.handled) {\n\t\t\ttr.MarkProcessing(false)\n\t\t\tself.removeRow(tr)\n\t\t}\n\t}\n}\n\n\nfunction grv_hasRowPendingProcess(self) {\n\tvar rows = self.Nodes.Tbody.querySelectorAll(`tr[${ATTR_ROWPROCESSING}]`)\n\n\tconsole.log(rows.length)\n\tif (rows.length > 0) {\n\t\treturn true\n\t} else {\n\t\treturn false\n\t}\n}\n\n\nfunction grv_setNext(self, nextoffset, limit) {\n\tvar nextoffsetcontainer = self.Nodes.Tfoot.querySelector('tr[data-nextoffset]')\n\tif (nextoffsetcontainer!=null) {\n\t\tnextoffsetcontainer.remove()\n\t}\n\t\n\t\n\n\tif (nextoffset!=null) {\n\t\tvar tr = document.createElement('tr')\n\t\tvar td = document.createElement('td')\n\t\tvar next = document.createElement('a')\n\n\t\tnext.innerHTML = 'load next data'\n\t\tnext.setAttribute('href', 'javascript:void(0)')\n\t\tnext.addEventListener('click', (evt)=>{\n\t\t\tself.Listener.dispatchEvent(nextDataEvent({\n\t\t\t\tdetail: {\n\t\t\t\t\tcriteria: self.Criteria,\n\t\t\t\t\tnextoffset: nextoffset,\n\t\t\t\t\tlimit: limit,\n\t\t\t\t\tsort: self.getSort()\n\t\t\t\t}\n\t\t\t}))\n\t\t})\n\t\n\t\tvar colspan = self.Nodes.Tbody.rows[0].cells.length\n\t\ttd.setAttribute('colspan', colspan)\n\t\ttd.setAttribute('align', 'center')\n\t\ttd.setAttribute('data-nextoffset', '')\n\t\ttd.appendChild(next)\n\t\t\n\t\ttr.setAttribute('data-nextoffset', '')\n\t\ttr.appendChild(td)\n\t\tself.Nodes.Tfoot.appendChild(tr)\n\t\n\t} \n}\n\nfunction  grv_getSort(self, tr) {\n\tif (tr==null) {\n\t\ttr = self.Nodes.Thead.querySelector(`tr[${ATTR_MAINHEADROW}]`)\n\t}\n\n\tvar ths = tr.querySelectorAll(`th[${ATTR_SORTING}]`)\n\tvar sort = {}\n\tfor (var th of ths) {\n\t\tvar sorting = th.getAttribute(ATTR_SORTING)\n\t\tvar binding = th.getAttribute(ATTR_BINDING)\n\t\tsort[binding] = sorting\n\t}\n\n\treturn sort\n}\n\n\nfunction grv_getLastLineNumber(self) {\n\tvar lastrow = self.Nodes.Tbody.querySelector('tr:last-child td[autonumber]')\n\tif (lastrow==null) {\n\t\treturn 0\n\t}\n\n\tvar lastlinenumber = lastrow.getAttribute(ATTR_LINENUMBER)\n\tif (lastlinenumber==null) {\n\t\treturn 0\n\t}\n\n\treturn Number(lastlinenumber)\n}\n\n\nfunction grv_createFunction(expression) {\n    const match = expression.match(/(\\w+)\\(([^)]+)\\)/);\n    if (!match) return null;\n\n    const [, funcName, args] = match;\n    const parsedArgs = args.split(\",\").map(arg => parseFloat(arg.trim()));\n\n    if (funcName === \"decimal\") {\n        return (v) => grv_formatDecimal(v, parsedArgs[1]);\n    } else if (funcName === 'int') {\n\t\treturn (v) => grv_formatInteger(v)\n\t} else if (funcName === 'checkmark') {\n\t\treturn (v) => grv_formatCheckmark(v)\n\t} else if (funcName === 'dateiso') {\n\t\treturn (v) => grv_formatDateIso(v)\n\t} else if (funcName === 'datelong') {\n\t\treturn (v) => grv_formatDateLong(v)\n\t} else if (funcName === 'dateshort' || funcName=== 'date') {\n\t\treturn (v) => grv_formatDateShort(v)\n\t}\n    return null;\n}\n\n\nfunction grv_formatDecimal (value, precision)  { \n\tconst formatterFixed = new Intl.NumberFormat('en-US', {\n\t\tminimumFractionDigits: precision,\n\t\tmaximumFractionDigits: precision\n\t});\n\treturn formatterFixed.format(value)\n}\n\nfunction grv_formatInteger (value)  { \n\tconst formatterFixed = new Intl.NumberFormat('en-US', {\n\t\tminimumFractionDigits: 0,\n\t\tmaximumFractionDigits: 0,\n\t\tuseGrouping: false\n\t});\n\treturn formatterFixed.format(value)\n}\n\nfunction grv_formatCheckmark(value) {\n\tconst yes = ICONS.YES\n\tconst no = ICONS.NO\n\n\tif (value===undefined || value===null) {\n\t\treturn no\n\t}\n\n\tif (value===false) {\n\t\treturn no\n\t}\n\n\tif (value=='0' || value=='' ||value=='-' || value==0) {\n\t\treturn no\n\t}\n\n\treturn yes\n}\n\nfunction grv_formatDateIso(value) {\n\tconst dt = new Date(value)\n\tconst str = dt.toISOString().split(\"T\")[0]\n\treturn str\n}\n\nfunction grv_formatDateLong(value) {\n\tconst dt = new Date(value)\n\tconst options = { day: '2-digit', month: 'short', year: 'numeric' };\n\tconst formattedDate = dt.toLocaleDateString('en-ID', options).replace('.', ''); \n\treturn formattedDate\n}\n\nfunction grv_formatDateShort(value) {\n\tconst dt = new Date(value)\n\tconst options = { day: '2-digit', month: '2-digit', year: 'numeric' };\n\tconst formattedDate = dt.toLocaleDateString('en-ID', options).replace('.', ''); \n\treturn formattedDate\n}\n\n\n","const ICON_DEFAULT = `<svg version=\"1.1\" viewBox=\"0 0 48 48\" xmlns=\"http://www.w3.org/2000/svg\">\n<g fill=\"currentColor\">\n<path d=\"m20.019 2c-2.9332 0-5.2348 2.3057-5.2348 5.2389v3.1417h-8.3806c-2.3047 0-4.1903 1.8856-4.1903 4.1903v7.9628h3.1417c3.1427 0 5.6567 2.514 5.6567 5.6567 0 3.1427-2.514 5.6567-5.6567 5.6567h-3.3547v7.9628c0 2.3047 1.8856 4.1903 4.1903 4.1903h7.9628v-3.1458c0-3.1427 2.514-5.6567 5.6567-5.6567 3.1427 0 5.6567 2.514 5.6567 5.6567v3.1458h7.9628c2.3047 0 4.1903-1.8856 4.1903-4.1903v-8.3806h3.1417c2.9332 0 5.2389-2.3057 5.2389-5.2389 0-2.9332-2.3057-5.2389-5.2389-5.2389h-3.1417v-8.3806c0-2.3047-1.8856-4.1903-4.1903-4.1903h-8.3806v-3.1417c0.20951-2.9332-2.0968-5.2389-5.03-5.2389z\"/>\n</g>\n</svg>`\n\n\n\nexport default class {\n\tconstructor(param) {\n\t\tthis.#name = param.name\n\t\tthis.#title = param.title\n\t\tthis.#disabled = param.disabled\n\t\tthis.#icon = param.icon\n\t\tthis.#url = param.url\n\t}\n\n\tstatic get ICON_DEFAULT() { return ICON_DEFAULT }\n\n\t#name\n\tget name() { return this.#name }\n\n\t#title\n\tget title() { return this.#title }\n\n\t#disabled\n\tget disabled() { return this.#disabled===true ? true : false}\n\n\t#icon\n\tget icon() { return this.#icon }\n\n\t#url \n\tget url() { return this.#url }\n}","import ICONS from \"./Icons.mjs\"\nimport Component from \"./Component.mjs\"\nimport ModuleData from \"./ModuleData.mjs\"\n\nconst ATTR_NAVSHOWED = 'showed'\nconst ATTR_MODULENAME = 'data-module'\nconst ATTR_FAVOURITE = \"data-favourite\"\nconst ATTR_OPENEDMODULE = 'data-openedmodule'\nconst ATTR_CURRENTUSER = 'data-currentuser'\nconst ATTR_MENUICONCONTAINER = 'data-iconcontainer'\nconst ATTR_MENUICONIMAGE = 'data-iconimage'\nconst ATTR_MENUICONTEXT = 'data-icontext'\nconst ATTR_GRIDAREA = 'data-gridarea'\nconst ATTR_SHORTCUT_ICON = 'data-icon'\nconst ATTR_SHORTCUT_TITLE = 'data-title'\nconst ATTR_SHORTCUT_INFO = 'data-info'\nconst ATTR_SHORTCUT_CLOSE = 'data-buttonclose'\nconst ATTR_DRAGOVER = 'data-dragover'\nconst ATTR_LABEL = 'data-label'\nconst ATTR_ICON = 'data-icon'\nconst ATTR_MAINBUTTON = 'data-mainbutton'\nconst ATTR_DRAGGABLE = 'draggable'\n\nconst CLS_BUTTONHEAD = 'fgta5-button-head'\nconst CLS_BUTTONMENU = 'fgta5-button-menu'\nconst CLS_SHORTCUTBUTTONCLOSE = 'fgta5-button-shorcutclose'\nconst CLS_HIDDEN = 'hidden'\n\nconst EVT_CLICK = 'click'\nconst EVT_DBLCLICK = 'dblclick'\nconst EVT_DRAGSTART = 'dragstart'\n\nconst TXT_FAVOURITE = 'Favourite Programs'\nconst TXT_OPENED = 'Opened Programs'\n\nconst C_SHORTCUT_PREFIX = 'fgta5-sch-mod-'\n\n\nconst openingModuleEvent = (data) => { return new CustomEvent('openingmodule', data) }\nconst actionEvent = (data) => { return new CustomEvent('action', data) }\nconst logoutEvent = (data) => { return new CustomEvent('logout', data) }\nconst openProfileEvent = (data) => { return new CustomEvent('openprofile', data) }\nconst openPreferenceEvent = (data) => { return new CustomEvent('openpreference', data) }\nconst addToFavouriteEvent = (data) => { return new CustomEvent('addtofavourite', data) }\nconst removeFromFavouriteEvent = (data) => { return new CustomEvent('removefavourite', data) }\n\n\nlet current_dragged_modulename\nlet current_drag_action\nlet drop_valid = false\n\nexport default class AppManager extends Component {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tappmgr_construct(this)\n\t\tappmgr_listenMessage(this)\n\t}\n\n\n\tRootIcons\n\n\t#modules = {}\n\tget Modules() { return this.#modules }\n\n\n\t#title\n\tget Title() { return this.#title }\n\tsetTitle(title) {\n\t\tthis.#title = title\n\t\tappmgr_setTitle(this, title)\n\t}\n\n\tsetMenu(data) {\n\t\tappmgr_setMenu(this, data)\n\t}\n\n\tshowMenu() {\n\t\tappmgr_showMenu(this)\t\n\t}\n\n\t\n\n\tsetFavourite(data) {\n\t\tappmgr_setFavourite(this, data)\n\t}\n\n\tasync openModule(module) {\n\t\tawait appmgr_openModule(this, module)\n\t\tappmgr_closeMenu(this)\n\t}\n\n\t#userdata\n\tget User() { return this.#userdata }\n\tsetUser(data) {\n\t\tthis.#userdata = data\n\t\tappmgr_setUser(this, data)\n\t}\n\t\n\n\taddEventListener(evt, callback) {\n\t\tthis.Listener.addEventListener(evt, callback)\n\t}\n}\n\nfunction appmgr_construct(self) {\n\tconsole.log('constructiong application manager')\n\n\tconst title = document.createElement('span')\n\tconst main = self.Element  \n\tconst head = document.createElement('header')\n\tconst iframes = document.createElement('div')\n\tconst nav = document.createElement('nav')\n\tconst favourite = main.querySelector(`div[${ATTR_FAVOURITE}]`)\n\tconst trahsbox = document.createElement('div')\n\tconst currentuser = main.querySelector(`div[${ATTR_CURRENTUSER}]`)\n\tconst btnmenu = appmgr_createHeadButton(self, ICONS.MENU, ()=>{\n\t\tappmgr_showMenu(self)\n\t})\n\t\n\tmain.after(head)\n\thead.after(iframes)\n\tiframes.after(nav)\n\n\ttitle.innerHTML = 'Application Manager' // default title, nanti diganti dengan SetTitle\n\n\n\thead.classList.add('fgta5-app-head')\n\thead.appendChild(title)\n\thead.appendChild(btnmenu)\n\n\tmain.classList.add('fgta5-app-main')\n\tnav.classList.add('fgta5-appmanager-nav')\n\n\tconst {Opened} = appmgr_createOpenedBoard(self, main)\n\tconst {MenuBoard, MenuFooter, ProfileButton, LogoutButton, MenuResetButton} = appmgr_createMenuBoard(self, nav)\n\n\n\tself.Listener = new EventTarget()\n\tself.Nodes = {\n\t\tHead: head,\n\t\tNav: nav,\n\t\tMain: main,\n\t\tIFrames: iframes,\n\t\tFavourite: favourite,\n\t\tOpened: Opened,\n\t\tCurrentuser: currentuser,\n\t\tMenuBoard: MenuBoard,\n\t\tMenuFooter: MenuFooter, \n\t\tProfileButton: ProfileButton,\n\t\tLogoutButton: LogoutButton,\n\t\tMenuResetButton: MenuResetButton,\n\t\tTrashBox: trahsbox,\n\t\tTitle: title\n\t}\n\n}\n\nfunction appmgr_listenMessage(self) {\n\twindow.addEventListener(\"message\", (evt) => {\n\t\tif (evt.data.action!=undefined) {\n\t\t\tvar action = evt.data.action\n\t\t\tif (action==Component.ACTION_SHOWMENU) {\n\t\t\t\tappmgr_showMenu(self)\n\t\t\t} else if (action==Component.ACTION_SHOWHOME) {\n\t\t\t\tappmgr_showHome(self)\n\t\t\t} else if (action==Component.ACTION_APPLICATIONLOADED) {\n\t\t\t\t// applikasi client di iframe terbuka\n\t\t\t} else if (action=='REDIRECT_TO_LOGIN') {\n\t\t\t\t// ke halaman login\n\t\t\t\tconst nexturl = window.location.href // login dari container akan diredirect kembali ke container\n\t\t\t\tconst nextmodule = evt.data.nexturl // next url yang dikirim dari client adalah url untuk module\n\t\t\t\tconst url = `${evt.data.href}?nexturl=${nexturl}&nextmodule=${nextmodule}`\n\t\t\t\tlocation.href = url\n\t\t\t}\n\t\t}\n\t})\n\n\n\twindow.history.pushState(null, \"\", window.location.href);\n\twindow.addEventListener(\"popstate\", function(evt) {\n\t\tevt.preventDefault()\n\t\twindow.history.pushState(null, \"\", window.location.href);\n\t});\n}\n\n\n\n\nfunction appmgr_createHeadButton(self, svg, fn_click) {\n\treturn Component.createSvgButton(svg, CLS_BUTTONHEAD, fn_click )\n}\n\nfunction appmgr_setTitle(self, title) {\n\tself.Nodes.Title.innerHTML = title\n}\n\n\nfunction appmgr_createMenuBoard(self, nav) {\n\tconst menuhead = document.createElement('div')\n\tconst btnmenureset = appmgr_createHeadButton(self, ICONS.MENU, ()=>{ appmgr_resetMenu(self) })\n\tconst divcenter = document.createElement('div')\n\tconst btnclose = appmgr_createHeadButton(self, ICONS.CLOSE, ()=>{ appmgr_closeMenu(self) })\n\tconst main = document.createElement('div')\n\tconst toppanel = document.createElement('div')\n\tconst toppanel_left = document.createElement('div')\n\tconst toppanel_center = document.createElement('div')\n\tconst toppanel_right = document.createElement('div')\n\tconst txtsearch = document.createElement('input')\n\tconst btnsearch = document.createElement('button')\n\tconst btnlogout = document.createElement('a')\n\t\n\t\n\tconst menuboard = document.createElement('div')\n\tconst footer = document.createElement('div')\n\tconst divleft = document.createElement('div')\n\n\t\n\t// divleft untuk button reset\n\tdivleft.appendChild(btnmenureset)\n\n\t// header\n\tmenuhead.setAttribute('header', '')\n\tmenuhead.appendChild(divleft)\n\tmenuhead.appendChild(divcenter)\n\tmenuhead.appendChild(btnclose)\n\tdivcenter.innerHTML = 'Menu'\n\n\n\t// footer\n\tfooter.classList.add(CLS_HIDDEN)\n\tfooter.classList.add('fgta5-menu-footer')\n\tfooter.appendChild(btnlogout)\n\n\n\n\t// main\n\tmain.setAttribute('main', '')\n\tmain.appendChild(toppanel)\n\tmain.appendChild(menuboard)\n\tmain.appendChild(footer)\n\tmain.addEventListener('scroll', ()=>{\n\t\t if (main.scrollTop > 10) {\n\t\t\tmenuhead.classList.add('fgta5-fixheader-scrolled')\n\t\t } else {\n\t\t\tmenuhead.classList.remove('fgta5-fixheader-scrolled')\n\t\t }\n\t})\n\n\n\t// top panel: home, search, logout, profile\n\ttoppanel.classList.add('fgta5-menu-toppanel')\n\ttoppanel.appendChild(toppanel_left)\n\ttoppanel.appendChild(toppanel_center)\n\ttoppanel.appendChild(toppanel_right)\n\n\n\t// home\n\tconst btnhome = Component.createSvgButton(ICONS.HOME, CLS_BUTTONMENU, ()=>{\n\t\tappmgr_showHome(self)\n\t})\n\n\t// preference\n\tconst btnpreference = Component.createSvgButton(ICONS.SETTING, CLS_BUTTONMENU, ()=>{\n\t\tappmgr_openPreference(self)\n\t})\n\t\n\t\n\t// search\n\tconst menusearch = document.createElement('div')\n\tmenusearch.classList.add('fgta5-menu-search')\n\tmenusearch.appendChild(txtsearch)\n\tmenusearch.appendChild(btnsearch)\n\n\ttxtsearch.classList.add('fgta5-menu-search')\n\ttxtsearch.setAttribute('name', 'menusearch')\n\ttxtsearch.setAttribute('placeholder', 'search module')\n\ttxtsearch.addEventListener('keydown', (evt)=>{\n\t\tif (evt.key=='Enter') {\n\t\t\tappmgr_searchModule(self, txtsearch.value)\n\t\t}\n\t})\n\n\tbtnsearch.classList.add('fgta5-menu-search')\n\tbtnsearch.innerHTML = ICONS.SEARCH\n\tbtnsearch.addEventListener(EVT_CLICK, (evt)=>{\n\t\ttxtsearch.focus()\n\t\tappmgr_searchModule(self, txtsearch.value)\n\t})\n\n\n\t// user\n\tconst btnprofile = Component.createSvgButton(ICONS.USER, CLS_BUTTONMENU)\n\tbtnprofile.classList.add(CLS_HIDDEN)\n\t\n\n\t// toppanel content\n\ttoppanel_left.setAttribute(ATTR_GRIDAREA, 'left')\n\ttoppanel_left.appendChild(btnhome)\n\ttoppanel_left.appendChild(btnpreference)\n\t\n\ttoppanel_center.setAttribute(ATTR_GRIDAREA, 'center')\n\ttoppanel_center.appendChild(menusearch)\n\n\n\ttoppanel_right.setAttribute(ATTR_GRIDAREA, 'right')\n\ttoppanel_right.appendChild(btnprofile)\n\n\n\t// main menuboard\n\tmenuboard.classList.add('fgta5-menu')\n\n\n\t// button logout\n\tbtnlogout.innerHTML = `<div icon>${ICONS.LOGOUT}</div><div>Sign Out</div>`\n\tbtnlogout.setAttribute('href', 'javascript:void(0)')\n\n\n\t// setup nav\n\tnav.appendChild(main)\n\tnav.appendChild(menuhead)\n\n\n\n\n\treturn {\n\t\tMenuBoard: menuboard,\n\t\tMenuFooter: footer,\n\t\tProfileButton: btnprofile,\n\t\tLogoutButton: btnlogout,\n\t\tMenuResetButton: btnmenureset\n\t}\n}\t\n\n\nfunction appmgr_showMenu(self) {\n\tconsole.log('show menu')\n\tconst nav = self.Nodes.Nav\n\n\tnav.setAttribute(ATTR_NAVSHOWED, '')\n}\n\nfunction appmgr_showHome(self) {\n\tappmgr_closeMenu(self)\n\tself.Nodes.IFrames.classList.add(CLS_HIDDEN)\n}\n\nfunction appmgr_closeMenu(self) {\n\tconst nav = self.Nodes.Nav\n\tnav.removeAttribute(ATTR_NAVSHOWED)\n}\n\n\nfunction appmgr_iframeLoaded(self, iframe, module) {\n\t// client iframe kirim message ke parent window\n\t// informasi bahwa client sudah selesai di load\n\tiframe.contentWindow.postMessage({\n\t\taction: Component.ACTION_APPLICATIONLOADED,\n\t\tmodule: {\n\t\t\ttitle: module.title,\n\t\t\tname: module.name\n\t\t}\n\t}, '*')\n\n\t// saat module pertama di load\n\tself.Listener.dispatchEvent(actionEvent({\n\t\tdetail: {\n\t\t\tname: 'moduleloaded',\n\t\t\tmodulename: module.name,\n\t\t\ttitle: module.title,\n\t\t\tiframe: iframe\n\t\t}\n\t}))\n\n\t// module terbuka\n\tself.Listener.dispatchEvent(actionEvent({\n\t\tdetail: {\n\t\t\tname: 'moduleopened',\n\t\t\tmodulename: module.name,\n\t\t\ttitle: module.title,\n\t\t\tiframe: iframe\n\t\t}\n\t}))\n\n\t// tambahkan di recent app\n\tappmgr_addOpenedModule(self, iframe, module)\n}\n\nfunction appmgr_iframeReOpen(self, iframe, module) {\n\t// tampilkan iframe\n\tiframe.classList.remove(CLS_HIDDEN)\n\n\t// module terbuka\n\tself.Listener.dispatchEvent(actionEvent({\n\t\tdetail: {\n\t\t\tname: 'moduleopened',\n\t\t\tmodulename: module.name,\n\t\t\ttitle: module.title,\n\t\t\tiframe: iframe\n\t\t}\n\t}))\n\n\t// untuk geser shortcut ke awal\n\tappmgr_addOpenedModule(self, iframe, module)\n}\n\n\n\nasync function appmgr_openModule(self, module) {\n\tconst iframes = self.Nodes.IFrames\n\tconst modulename = module.name\n\n\t\n\tconsole.log(module)\n\n\tconst qry = `iframe[${ATTR_MODULENAME}=\"${modulename}\"]`\n\tconst ifr = iframes.querySelector(qry)\n\tif (ifr==null) {\n\t\t// buka iframe baru\n\t\tconst mask = $fgta5.Modal.createMask('Please wait...')\n\n\t\tconst url = new URL(module.url);\n\t\turl.searchParams.append('prog', module.name);\n\n\t\tlet newframe = document.createElement('iframe')\n\t\tnewframe.classList.add('fgta5-iframe')\n\t\tnewframe.classList.add(CLS_HIDDEN)\n\t\tnewframe.setAttribute(ATTR_MODULENAME, modulename)\n\t\t\n\t\tnewframe.onload = (evt) => {\n\t\t\tappmgr_iframeLoaded(self, newframe, module)\n\t\t\tnewframe.classList.remove(CLS_HIDDEN)\n\t\t\tmask.close()\n\t\t}\n\n\t\tfetch(url)\n\t\t\t.then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(`HTTP Error: ${response.status}`);\n\t\t\t\t}\n\t\t\t\tnewframe.src = url\n\t\t\t\tiframes.appendChild(newframe)\n\t\t\t\tself.Nodes.IFrames.classList.remove(CLS_HIDDEN)\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error(error)\n\t\t\t\t$fgta5.MessageBox.error(error)\n\t\t\t\tmask.close()\n\t\t\t});\n\t} else {\t\n\t\t// tampilkan iframe\n\t\t// hide semua iframe kecuali iframe yang akan dibuka\n\t\tvar frames = iframes.querySelectorAll('iframe')\n\t\tfor (var f of frames) {\n\t\t\tvar fname = f.getAttribute(ATTR_MODULENAME)\n\t\t\tif (fname==modulename) {\n\t\t\t\tappmgr_iframeReOpen(self, f, module)\n\t\t\t} else {\n\t\t\t\tf.classList.add(CLS_HIDDEN)\n\t\t\t}\n\t\t} \n\t\tself.Nodes.IFrames.classList.remove(CLS_HIDDEN)\n\t}\n}\n\n\nfunction appmgr_setFavourite(self, data)\t {\n\t// apakah div untuk favourite sudah didefinisikan\n\tif (self.Nodes.Favourite==null) {\n\t\treturn\n\t}\n\t\n\tconst favourite = self.Nodes.Favourite\n\tconst title = document.createElement('div')\n\tconst trahscontainer = self.Nodes.TrashBox\n\tconst trashbox = document.createElement('div')\n\tconst trashicon = document.createElement('div')\n\tconst trashlabel = document.createElement('div')\n\t\n\t// <div class='fgta5-roundbox'>?</div>\n\ttitle.innerHTML = `${TXT_FAVOURITE}&nbsp;&nbsp;&nbsp;&nbsp;`\n\ttitle.classList.add('fgta5-appmanager-home-subtitle')\n\n\ttrashicon.setAttribute(ATTR_ICON, '')\n\ttrashicon.innerHTML = ICONS.TRASH\n\t\n\ttrashicon.setAttribute(ATTR_LABEL, '')\n\ttrashlabel.innerHTML = 'Delete'\n\n\ttrashbox.setAttribute(ATTR_MAINBUTTON,'')\n\ttrashbox.appendChild(trashicon)\n\ttrashbox.appendChild(trashlabel)\n\n\ttrahscontainer.classList.add('fgta5-favourite-trashcontainer')\n\ttrahscontainer.classList.add(CLS_HIDDEN)\n\ttrahscontainer.appendChild(trashbox)\n\tself.Nodes.Head.after(trahscontainer)\n\n\n\tfavourite.before(title)\n\tfavourite.classList.add('fgta5-menu')\n\tfavourite.classList.add('fgta5-favourite')\n\tfavourite.addEventListener('dragover', (evt)=>{ appmgr_FavouriteDragOver(self, evt, favourite) })\n\tfavourite.addEventListener('dragleave', (evt)=>{ appmgr_FavouriteDragLeave(self, evt, favourite) })\n\tfavourite.addEventListener('drop', (evt)=>{ appmgr_FavouriteDrop(self, evt, favourite)  })\n\n\tfor (let modulename of data) {\n\t\tlet module = self.Modules[modulename]\n\t\tif (module!=null) {\n\t\t\tlet mi = appmgr_createModuleIcon(self, module.data)\n\t\t\tappmgr_setAsFavouriteIcon(self, mi, modulename, favourite)\n\t\t\tfavourite.appendChild(mi)\n\t\t}\n\t}\n}\n\n\n\nfunction appmgr_createModuleIcon(self, module) {\n\tconst container = document.createElement('div')\n\tconst icon = document.createElement('div')\n\tconst text = document.createElement('div')\n\t\n\tcontainer.setAttribute('name', module.name)\n\tcontainer.setAttribute(ATTR_MENUICONCONTAINER, '')\n\tif (module.disabled) {\n\t\tcontainer.setAttribute('disabled', '')\n\t}\n\n\ticon.setAttribute(ATTR_MENUICONIMAGE, '')\n\tif (module.icon!=null) {\n\t\ticon.setAttribute(ATTR_MENUICONIMAGE, '')\n\t\ticon.style.backgroundImage = `url('${module.icon}')`\n\t} else {\n\t\ticon.innerHTML = ModuleData.ICON_DEFAULT\n\t}\n\n\ttext.innerHTML = module.title\n\ttext.setAttribute(ATTR_MENUICONTEXT, '')\n\n\n\tcontainer.appendChild(icon)\n\tcontainer.appendChild(text)\n\n\n\tconst clickEventName = Component.isMobileDevice() ? EVT_CLICK : EVT_DBLCLICK;\n\ticon.addEventListener(clickEventName, ()=>{\n\t\tself.openModule(module)\n\t\ticon.style.animation = 'iconClicked 0.2s forwards'\n\t\tsetTimeout(()=>{\n\t\t\ticon.style.animation = 'unset'\n\t\t\tappmgr_closeMenu(self)\n\t\t}, 300)\n\t})\n\treturn container\n}\n\n\nfunction appmgr_createGroupIcon(self, group) {\n\tconst container = document.createElement('div')\n\tconst icon = document.createElement('div')\n\tconst text = document.createElement('div')\n\t\n\tcontainer.setAttribute(ATTR_MENUICONCONTAINER, '')\n\tif (group.disabled) {\n\t\tcontainer.setAttribute('disabled', '')\n\t}\n\n\n\ticon.setAttribute(ATTR_MENUICONIMAGE, '')\n\tif (group.icon!=null) {\n\t\t// tampilkan icon sesuai data\n\t\ticon.style.backgroundImage = `url('${group.icon}')`\n\t} else {\n\t\t// tampilkan icon standard\n\t\ticon.style.backgroundImage = `url('data:image/svg+xml,${encodeURIComponent(ICONS.DIRDEF)}')`\n\t}\n\n\ttext.innerHTML = group.title\n\ttext.setAttribute(ATTR_MENUICONTEXT, '')\n\n\n\tcontainer.appendChild(icon)\n\tcontainer.appendChild(text)\n\n\ticon.addEventListener(EVT_CLICK, ()=>{\n\t\ticon.style.animation = 'iconClicked 0.4s forwards'\n\t\t\n\t\tsetTimeout(()=>{\n\t\t\ticon.style.animation = 'unset'\n\t\t}, 400)\n\n\t\tsetTimeout(()=>{\n\t\t\tappmgr_populateMenuIcons(self, group.icons, group.parent)\n\t\t}, 200)\n\t})\n\n\n\n\treturn container\n}\n\n\nfunction appmgr_setMenu(self, data) {\n\tself.RootIcons = appmgr_readMenu(self, data)\n\tappmgr_populateMenuIcons(self, self.RootIcons)\n}\n\n\nfunction appmgr_resetMenu(self) {\n\tappmgr_populateMenuIcons(self, self.RootIcons)\n\n}\n\nfunction appmgr_readMenu(self, data) {\n\tlet icons = []\n\tfor (var node of data) {\n\t\tif (node instanceof $fgta5.ModuleData || node.type=='program') {\n\t\t\t// module\n\t\t\tlet module = (node instanceof $fgta5.ModuleData) ? node : new $fgta5.ModuleData(node)\n\t\t\tlet mi = appmgr_createModuleIcon(self, module)\n\t\t\ticons.push(mi)\n\n\t\t\t// set keyword\n\t\t\tvar keyword\n\t\t\tif (node.keyword!=null) {\n\t\t\t\tkeyword = `${node.name} : ${node.keyword}`\n\t\t\t} else {\n\t\t\t\tkeyword = node.name\n\t\t\t}\n\n\t\t\t// add moduledata to library\n\t\t\tself.Modules[node.name] = {\n\t\t\t\tkeyword: keyword,\n\t\t\t\tdata: node\n\t\t\t}\n\t\t} else {\n\t\t\t// direktory\n\t\t\tvar groupicons = appmgr_readMenu(self, node.items)\n\t\t\tvar di = appmgr_createGroupIcon(self, {\n\t\t\t\ttitle: node.title,\n\t\t\t\ticon: node.icon,\n\t\t\t\ticons: groupicons,\n\t\t\t\tparent: icons\n\t\t\t})\n\t\t\tif (node.border!==false) {\n\t\t\t\tdi.classList.add('fgta5-icongroup')\n\t\t\t}\n\t\t\ticons.push(di)\n\t\t}\n\t\t\n\t}\n\treturn icons\n}\n\nfunction appmgr_populateMenuIcons(self, icons, parent) {\n\tconst menuboard = self.Nodes.MenuBoard\n\tconst menureset = self.Nodes.MenuResetButton\n\n\t/* tambahkan back icon jika belum ada */\n\tif (parent!=null) {\n\t\tif (icons[0].isbackIcon!==true) {\n\t\t\tvar backicon = {\n\t\t\t\ttitle: '',\n\t\t\t\ticon: `data:image/svg+xml,${encodeURIComponent(ICONS.BACK)}`,\n\t\t\t\ticons: parent,\n\t\t\t\tparent: parent.parent\n\t\t\t}\n\t\t\tvar di = appmgr_createGroupIcon(self, backicon)\n\t\t\tdi.isbackIcon = true\n\t\t\ticons.unshift(di)\n\t\t}\n\n\t\t// munculkan tombol reset menu kiri atas\n\t\tmenureset.classList.remove(CLS_HIDDEN)\n\n\t} else {\n\t\t// sembunyikan tombol reset menu kiri atas\n\t\tmenureset.classList.add(CLS_HIDDEN)\n\n\t}\n\t\n\n\tmenuboard.style.animation = \"fadeOutLeft 0.05s forwards\";\n\tsetTimeout(()=>{\n\t\tmenuboard.innerHTML = ''\n\t\tmenuboard.style.animation = \"fadeInRight 0.3s forwards\";\n\t\tfor (var icon of icons) {\n\t\t\tmenuboard.appendChild(icon)\n\t\t}\n\t}, 50)\n} \n\nasync function appmgr_searchModule(self, searchtext) {\n\tif (searchtext.trim()=='') {\n\t\tif (self.previousSearch===undefined) {\n\t\t\tself.previousSearch=''\n\t\t\treturn\n\t\t}\n\n\t\tif (searchtext==self.previousSearch) {\n\t\t\treturn\n\t\t}\n\n\t\tself.previousSearch=''\n\t\tappmgr_resetMenu(self)\n\t\treturn\n\t}\n\n\tself.previousSearch=searchtext\n\n\tconst menuboard = self.Nodes.MenuBoard\n\tconst modules = self.Modules\n\n\tmenuboard.innerHTML = ''\n\tvar i = 0\n\tfor (var modulename in modules) {\n\t\tconst m = modules[modulename]\n\t\tconst moduleTitle = m.data.title\n\t\tif (moduleTitle.toLowerCase().includes(searchtext)) {\n\t\t\ti++\n\t\t\tvar module = modules[modulename]\n\t\t\tif (module!=null) {\n\t\t\t\tvar mi = appmgr_createModuleIcon(self, module.data)\n\t\t\t\tmi.style.animation = 'dropped 0.3s forwards'\n\t\t\t\tmenuboard.appendChild(mi)\n\t\t\t\tif (i<10) {\n\t\t\t\t\tawait Component.sleep(100)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction appmgr_setUser(self, data) {\n\tconst btnprofile = self.Nodes.ProfileButton\n\tconst btnlogout = self.Nodes.LogoutButton\n\n\t// munculkan footer menu untuk logout\n\tself.Nodes.MenuFooter.classList.remove(CLS_HIDDEN)\n\n\t// munculkan profile icon\n\tbtnprofile.classList.remove(CLS_HIDDEN)\n\tbtnprofile.addEventListener(EVT_CLICK, (evt)=>{\n\t\tappmgr_profileClick(self)\n\t})\n\n\n\tbtnlogout.addEventListener(EVT_CLICK, (evt)=>{\n\t\tappmgr_logout(self)\n\t})\n\t// munculkan nama di home\n\tself.Nodes.Currentuser.innerHTML = data.displayname\n\n}\n\nfunction appmgr_profileClick(self) {\n\tself.Listener.dispatchEvent(openProfileEvent({\n\t\tdetail: {\n\t\t\tuser: self.User,\n\t\t}\n\t}))\n}\n\nasync function appmgr_logout(self) {\n\tvar ret = await $fgta5.MessageBox.confirm(\"are you sure to log out ?\")\n\tif (ret=='ok') {\n\t\tself.Listener.dispatchEvent(logoutEvent({\n\t\t\tdetail: {\n\t\t\t\tuser: self.User,\n\t\t\t}\n\t\t}))\n\t}\n}\n\nasync function appmgr_openPreference(self) {\n\tself.Listener.dispatchEvent(openPreferenceEvent({\n\t\tdetail: {\n\t\t\tuser: self.User,\n\t\t}\n\t}))\n}\n\nfunction appmgr_createOpenedBoard(self, main) {\n\tconst opened = main.querySelector(`div[${ATTR_OPENEDMODULE}]`)\n\tconst title = document.createElement('div')\n\t\n\n\topened.classList.add('fgta5-openedmodule')\n\n\ttitle.innerHTML = `${TXT_OPENED}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`\n\ttitle.classList.add('fgta5-appmanager-home-subtitle')\n\ttitle.classList.add(CLS_HIDDEN)\n\n\topened.classList.add(CLS_HIDDEN)\n\topened.before(title)\n\topened.hide = () => {\n\t\ttitle.classList.add(CLS_HIDDEN)\n\t\topened.classList.add(CLS_HIDDEN)\n\t}\n\n\topened.show = () => {\n\t\ttitle.classList.remove(CLS_HIDDEN)\n\t\topened.classList.remove(CLS_HIDDEN)\n\t}\n\n\treturn {\n\t\tOpened: opened\n\t}\n}\n\nfunction appmgr_addOpenedModule(self, iframe, module) {\n\tconst opened = self.Nodes.Opened\n\tconst id = `${C_SHORTCUT_PREFIX}-${module.name}`\n\tconst shortcut = document.getElementById(id)\n\tif (shortcut==null) {\n\t\t// tambahkan di awal\n\t\tconst newshortcut = appmgr_createOpenedShortcut(self, module, iframe, id)\n\t\topened.prepend(newshortcut)\n\t} else {\n\t\t// geser di awal\n\t\topened.prepend(shortcut);\n\t}\n\n\topened.show()\n}\n\n\nfunction appmgr_createOpenedShortcut(self, module, iframe, id) {\n\tconst opened = self.Nodes.Opened\n\tconst shortcut = document.createElement('div')\n\tconst icon = document.createElement('div') \n\tconst title = document.createElement('div')\n\tconst info = document.createElement('div')\n\tconst closebutton = document.createElement('a')\n\tconst clickEventName = Component.isMobileDevice() ? EVT_CLICK : EVT_DBLCLICK;\n\n\tshortcut.id = id\n\tshortcut.classList.add('fgta5-openedmodule-shortcut')\n\tshortcut.setAttribute(ATTR_DRAGGABLE, 'true')\n\tshortcut.appendChild(icon)\n\tshortcut.appendChild(title)\n\tshortcut.appendChild(info)\n\tshortcut.appendChild(closebutton)\n\n\tshortcut.addEventListener(clickEventName, async (evt)=>{ await appmgr_openModule(self, module) })\n\tshortcut.addEventListener(EVT_DRAGSTART, (evt)=>{ appmgr_DragModule(self, evt, module) })\n\n\n\ticon.setAttribute(ATTR_SHORTCUT_ICON, '')\n\tif (module.icon!=null) {\n\t\ticon.style.backgroundImage = `url('${module.icon}')`\n\t} else {\n\t\ticon.innerHTML = ModuleData.ICON_DEFAULT\n\t}\n\n\ttitle.setAttribute(ATTR_SHORTCUT_TITLE, '')\t\n\ttitle.innerHTML = module.title\n\n\tinfo.setAttribute(ATTR_SHORTCUT_INFO, '')\n\tinfo.innerHTML = 'idle'\n\n\n\tvar btn = Component.createSvgButton(ICONS.CLOSE, CLS_SHORTCUTBUTTONCLOSE, (evt)=>{\n\t\tevt.stopPropagation()\n\t\tiframe.remove()\n\t\tshortcut.remove()\n\n\t\tif (opened.childNodes.length==0) {\n\t\t\topened.hide()\n\t\t}\n\t})\n\n\tclosebutton.setAttribute(ATTR_SHORTCUT_CLOSE, '')\n\tclosebutton.appendChild(btn)\n\n\treturn shortcut\n}\n\nfunction appmgr_DragModule(self, evt, module) {\n\tcurrent_drag_action = 'addtofave'\n\tevt.dataTransfer.setData('modulename', module.name);\n\tcurrent_dragged_modulename = module.name\n}\n\nfunction appmgr_FavouriteDragOver(self, evt, favourite) {\n\tif (current_drag_action=='addtofave') {\n\t\tvar exist = favourite.querySelector(`[name=\"${current_dragged_modulename}\"]`)\n\t\tif (exist==null) {\n\t\t\tevt.preventDefault()\n\t\t\tfavourite.setAttribute(ATTR_DRAGOVER, '')\n\t\t}\n\t} \n\t// else if (current_drag_action=='removefromfave') {\n\t// \tfavourite.setAttribute(ATTR_DRAGOVER, '')\n\t// }\n\n}\n\nfunction appmgr_FavouriteDragLeave(self, evt, favourite) {\n\tfavourite.removeAttribute(ATTR_DRAGOVER)\n}\n\nfunction appmgr_FavouriteDrop(self, evt, favourite) {\n\tfavourite.removeAttribute(ATTR_DRAGOVER)\n\n\tconst modulename = evt.dataTransfer.getData('modulename');\n\tif (modulename=='') {\n\t\treturn\n\t}\n\n\n\tvar exist = favourite.querySelector(`[name=\"${modulename}\"]`)\n\tif (exist==null) {\n\t\tevt.preventDefault()\n\t\tconst module = self.Modules[modulename]\n\t\tif (module==null) {\n\t\t\treturn\n\t\t}\n\n\t\tlet mi = appmgr_createModuleIcon(self, module.data)\n\t\tappmgr_setAsFavouriteIcon(self, mi, modulename, favourite)\n\t\tfavourite.prepend(mi)\n\t\tself.Listener.dispatchEvent(addToFavouriteEvent({\n\t\t\tdetail: {\n\t\t\t\tmodulename: modulename,\n\t\t\t}\n\t\t}))\n\t}\n}\n\nfunction appmgr_setAsFavouriteIcon(self, mi, modulename, favourite) {\n\tconst trahsbox = self.Nodes.TrashBox\n\tconst trashbutton = trahsbox.querySelector(`[${ATTR_MAINBUTTON}]`)\n\n\tmi.setAttribute(ATTR_DRAGGABLE, 'true')\n\tmi.addEventListener(EVT_DRAGSTART, (evt)=>{\n\t\tdrop_valid = false\n\t\tcurrent_drag_action = 'removefromfave'\n\t\tevt.dataTransfer.setData('modulename', modulename);\n\t\ttrahsbox.classList.remove(CLS_HIDDEN)\n\t})\n\n\tmi.addEventListener('dragend', (evt)=>{\n\t\tsetTimeout(()=>{\n\t\t\ttrahsbox.classList.add(CLS_HIDDEN)\n\t\t\ttrashbutton.removeAttribute(ATTR_DRAGOVER)\n\t\t}, 100)\n\t})\n\t\n\n\ttrashbutton.addEventListener('dragover', (evt)=>{\n\t\tif (current_drag_action=='removefromfave') {\n\t\t\tevt.preventDefault()\n\t\t\ttrashbutton.setAttribute(ATTR_DRAGOVER, '')\n\t\t}\n\t})\n\n\ttrashbutton.addEventListener('dragleave', (evt)=>{\n\t\ttrashbutton.removeAttribute(ATTR_DRAGOVER)\n\t})\n\n\ttrashbutton.addEventListener('drop', (evt)=>{\n\t\tif (current_drag_action=='removefromfave') {\n\t\t\tconst modulename = evt.dataTransfer.getData('modulename');\n\t\t\tif (modulename=='') {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar icon = favourite.querySelector(`[name=\"${modulename}\"]`)\n\t\t\tif (icon!=null) {\n\t\t\t\ticon.style.animation = 'removing 0.3s forwards'\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\ticon.remove()\n\t\t\t\t}, 300)\n\t\t\t\t\n\t\t\t\tself.Listener.dispatchEvent(removeFromFavouriteEvent({\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tmodulename: modulename,\n\t\t\t\t\t}\n\t\t\t\t}))\n\t\t\t}\n\t\t\tevt.preventDefault()\n\t\t\tcurrent_drag_action = ''\n\t\t}\n\t})\t\n}\n\n","import ICONS from './Icons.mjs'\nimport Component from \"./Component.mjs\"\n\nconst CLS_HIDDEN = 'hidden'\nconst CLS_SECTION = 'fgta5-app-section'\n\n\nconst ATTR_ACTIVE = 'data-active'\nconst ATTR_TITLE = 'data-title'\nconst ATTR_TOPBAR = 'data-topbar'\nconst ATTR_BACKBUTTON = 'data-backbutton'\n\nconst DIR_LEFT = 0\nconst DIR_RIGHT = 1\n\nconst EVT_BACKBUTTONCLICK = 'backbuttonclick'\nconst EVT_SECTIONSHOWING = 'sectionshowing'\n\nconst BackButtonClickEvent = (data) => { return new CustomEvent(EVT_BACKBUTTONCLICK, data) }\nconst SectionShowingEvent = (data) => { return new CustomEvent(EVT_SECTIONSHOWING, data) }\n\n\nexport default class Section {\n\t#id\n\t#element\n\t#index\n\t#name\n\t#title\n\t#previoussection\n\t#carousell\n\t#fn_getActiveSection\n\t#listener = new EventTarget()\n\n\tstatic get ATTR_ACTIVE() { return ATTR_ACTIVE }\n\tstatic get DIR_LEFT() { return DIR_LEFT }\n\tstatic get DIR_RIGHT() { return DIR_RIGHT }\n\tstatic get EVT_BACKBUTTONCLICK() { return EVT_BACKBUTTONCLICK }\n\tstatic get EVT_SECTIONSHOWING() { return EVT_SECTIONSHOWING }\n\n\n\tget Id() { return this.#id } \n\tget Index() { return this.#index }\n\tget Name() { return this.#name }\n\tget Title()  { return this.#title }\n\tget Element() { return this.#element }\n\tget PreviousSection() { return this.#previoussection}\n\tget getActiveSection() { return this.#fn_getActiveSection }\n\tget Listener() { return this.#listener }\n\tget Carousell() { return this.#carousell } \n\n\tset Title(v) {\n\t\tthis.#title = v\n\t\tsec_setTitle(this, v)\n\t}\n\n\n\tconstructor(el, args) {\n\t\tconst id = el.id\n\t\tconst name = id\n\t\tconst title = el.getAttribute(ATTR_TITLE)\n\n\t\tthis.#element = el\n\t\tthis.#id = id\n\t\tthis.#name = name\n\t\tthis.#title = title ?? 'section'\n\t\t\n\t\tif (args!=null) {\n\t\t\tif (args.index!=null) {\n\t\t\t\tthis.#index = args.index\n\t\t\t}\n\n\t\t\tthis.#carousell = args.carousell\n\n\t\t\tif (typeof args.fn_getActiveSection === 'function') {\n\t\t\t\tthis.#fn_getActiveSection = args.fn_getActiveSection\n\t\t\t} else {\n\t\t\t\tthis.#fn_getActiveSection = ()=>{return null}\n\t\t\t}\n\t\t}\n\t\tsec_construct(this, args) \n\t}\n\n\n\n\n\tasync show(args, fn_callback) {\n\t\tconst currSection = this.getActiveSection()\n\t\tthis.#previoussection = currSection // set current session ke previous untuk keperluan back\n\t\tawait sec_show(this, args, fn_callback)\n\t}\n\n\n\tsectionReturn\n\tsetSectionReturn(section) {\n\t\tthis.sectionReturn = section\n\t}\n\n\tsetIconUrl(iconUrl) {\n\t\tsec_setIconUrl(this, iconUrl)\n\t}\n\n\taddEventListener(eventname, callback) {\n\t\tthis.Listener.addEventListener(eventname, callback)\n\t}\t\n\n\tback() {\n\t\tif (this.sectionReturn!=null) {\n\t\t\tthis.sectionReturn.show({direction:1})\n\t\t}\n\t}\n}\n\n\nfunction sec_setIconUrl(self, iconUrl) {\n\tconst iconDiv = self.Nodes.iconDiv\n\ticonDiv.style.display = 'unset'\n\tif (iconUrl==null || iconUrl=='') {\n\t\ticonDiv.innerHTML = ICONS.PROGRAM\n\t} else {\n\t\ticonDiv.style.backgroundImage = `url('${iconUrl}')`;\n\t\ticonDiv.style.backgroundSize = \"cover\";\n\t\ticonDiv.style.backgroundRepeat = \"no-repeat\";\n\t\ticonDiv.style.backgroundPosition = \"center\";\n\n\t}\n}\n\nfunction sec_construct(self, args) {\n\tconst el = self.Element\n\t\n\tel.setAttribute('name', self.Name)\n\tel.classList.add(CLS_SECTION)\n\tif (self.Index==0) {\n\t\t// jadikan index section pertama yang active\n\t\tel.setAttribute(ATTR_ACTIVE, '')\n\t} else {\n\t\t// sembunyikan semua section berikutnya\n\t\tel.classList.add(CLS_HIDDEN)\n\t}\n\n\n\t// set title\n\tconst topbar = document.createElement('div')\n\tconst title = document.createElement('div')\n\tconst backbutton = Component.createSvgButton(ICONS.BACK, '', ()=>{\n\t\t// back ke previous section\n\t\tsec_backButtonClick(self)\n\t})\n\tconst iconDiv = document.createElement('div')\n\t\n\n\n\ttopbar.setAttribute(ATTR_TOPBAR, '')\n\ttopbar.appendChild(backbutton)\n\ttopbar.appendChild(iconDiv)\n\ttopbar.appendChild(title)\n\t\n\n\tbackbutton.setAttribute(ATTR_BACKBUTTON, '')\n\tif (self.Index==0) {\n\t\tbackbutton.classList.add('hidden')\n\t}\n\n\n\ticonDiv.classList.add('fgta5-app-section-icondiv')\n\ticonDiv.style.display = 'none'\n\n\n\n\ttitle.setAttribute(ATTR_TITLE, self.Title)\n\ttitle.innerHTML = self.Title\n\n\n\t\n\tel.prepend(topbar)\n\n\tself.Nodes = {\n\t\tBackButton: backbutton,\n\t\tTitle: title,\n\t\ticonDiv: iconDiv\n\t}\n\n}\n\n\nasync function sec_show(self, args, fn_callback) {\n\tif (typeof fn_callback==='function') {\n\t\tawait fn_callback()\n\t}\n\n\tlet direction = DIR_LEFT // Geser ke kiri\n\tif (args!=undefined) {\n\t\tdirection = args.direction ?? DIR_LEFT\n\t}\n\n\tlet moving = [\n\t\t{curr:'fadeOutLeft 0.1s forwards', comming:'fadeInRight 0.3s forwards'}, // geser kiri\n\t\t{curr:'fadeOutRight 0.1s forwards', comming:'fadeInLeft 0.3s forwards'} // geser kanan\n\t]\n\t\n\n\tconst commingSection = self\n\tconst comming = commingSection.Element\n\tconst currSection = self.PreviousSection\n\tif (currSection!=null) {\n\t\tif (commingSection.Name==currSection.Name) {\n\t\t\treturn\n\t\t}\n\n\t\t// CATATAN:\n\t\t// untuk showing section, selalu arah akan ke kiri (arah kanan digunakan saat back)\n\t\t// curr: fadeOutLeft // yang saat ini muncul, buang ke kiri\n\t\t// comming: fadeInRight // yang baru akan muncul dari kanan\n\n\t\tconst curr = currSection.Element\n\n\n\t\t// trigger event showing\n\t\tself.Carousell.setCurrentSection(commingSection)\n\t\tself.Carousell.dispatchSectionShowing(currSection, commingSection)\n\t\tself.Listener.dispatchEvent(SectionShowingEvent({\n\t\t\tdata: {\n\t\t\t\t// currSection: currSection,\n\t\t\t\t// commingSection: commingSection,\n\t\t\t\tdetail: {\n\t\t\t\t\tcurrSection: currSection,\n\t\t\t\t\tcommingSection: commingSection,\n\t\t\t\t}\n\t\t\t}\n\t\t}))\n\t\t\n\n\t\t// taruh dulu yang akan data ke kanan, posisi hiden\n\t\tcomming.style.animation = 'unset'\n\n\t\t// lalu keluarkan curr, buang ke kiri (fadeOutLeft)\n\t\tcurr.style.animation = moving[direction].curr // `fadeOutLeft 0.3s forwards` \n\t\tsetTimeout(()=>{\n\t\t\tcurr.classList.add(CLS_HIDDEN) // sembunyikan current\n\t\t\tcurr.style.animation = 'unset'\n\t\t\tcurr.removeAttribute(ATTR_ACTIVE)\n\n\t\t\t// tarik comming masuk dari kanan\n\t\t\tcomming.classList.remove(CLS_HIDDEN)\n\t\t\tcomming.style.animation = moving[direction].comming //  'fadeInRight 0.3s forwards' \n\t\t\tsetTimeout(()=>{\n\t\t\t\tcomming.style.animation = 'unset'\n\t\t\t\tcomming.setAttribute(ATTR_ACTIVE, '')\n\t\t\t}, 300)\n\t\t}, 100)\t\t\n\n\n\t} else {\n\t\t// langsung munculkan tanpa animasi\n\t\tcomming.classList.remove(CLS_HIDDEN)\n\t\tcomming.setAttribute(ATTR_ACTIVE, '')\n\t}\n\t\n}\n\n\nfunction sec_backButtonClick(self) {\n\t// back to self.PreviousSection\n\tself.Listener.dispatchEvent(BackButtonClickEvent({\n\t\tcancelable: true,\n\t\tdetail: {\n\t\t\tfn_ShowNextSection: ()=>{\n\t\t\t\tif (self.sectionReturn!=null) {\n\t\t\t\t\tself.sectionReturn.show({direction:DIR_RIGHT})\n\t\t\t\t} else {\n\t\t\t\t\tself.PreviousSection.show({direction:DIR_RIGHT})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}))\n}\n\n\nfunction sec_setTitle(self, v) {\n\tself.Nodes.Title.innerHTML = v\n}","import ICONS from './Icons.mjs'\nimport Component from \"./Component.mjs\"\nimport Section from './Section.mjs'\n\nconst CLS_BUTTONHEAD = 'fgta5-button-head'\n\n\nconst ID_TITLE = 'application-title'\nconst ATTR_WITHFOOTER = 'data-withfooter'\n\n\nexport default class App extends Component {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tapp_construct(this)\n\t}\n\n\t// #sections = {}\n\t// get Sections() { return this.#sections}\n\t// RenderSection() {\n\t\t// App_RenderSection(this)\n\t// }\n\tsetTitle(title) {\n\t\tapp_setTitle(this, title)\n\t}\n\n\n\tshowFooter(show) {\n\t\tapp_showFooter(this, show)\n\t}\n}\n\nfunction app_construct(self) {\n\tconsole.log('constructiong application')\n\n\tconst main = self.Element  \n\tconst head = document.createElement('header')\n\tconst footer = document.createElement('footer')\n\n\tmain.after(head)\n\thead.after(footer)\n\n\thead.classList.add('fgta5-app-head')\n\n\tmain.classList.add('fgta5-app-main')\n\n\tfooter.classList.add('fgta5-app-footer')\n\tfooter.classList.add('hidden')\n\n\tapp_createHeader(self, head)\n\tapp_createFooter(self, footer)\n\n\tself.Nodes = {\n\t\tHead: head,\n\t\tMain: main,\n\t\tFooter: footer\n\t}\n\n\twindow.addEventListener(\"load\", (event) => {\n\t\tconsole.log('application loaded.')\n\t\twindow.parent.postMessage({\n\t\t\taction: Component.ACTION_APPLICATIONLOADED\n\t\t}, '*')\n\n\t})\n\n\twindow.addEventListener(\"message\", (evt) => {\n\t\tconst args = evt.data\n\t\tif (args.action!=undefined) {\n\t\t\tvar action = args.action\n\t\t\tif (action==Component.ACTION_APPLICATIONLOADED) {\n\t\t\t\tif (args.module!=null) {\n\t\t\t\t\tif (args.module.title!=null) {\n\t\t\t\t\t\tapp_setTitle(self, args.module.title)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (action=='REDIRECT_TO_LOGIN') {\n\t\t\t\tconsole.log('BUAT PROGRAM UNTUK REDIRECT KE LOGIN')\n\t\t\t}\n\t\t}\n\t})\n}\n\nfunction app_setTitle(self, title) {\n\tdocument.title = title\n\tdocument.getElementById(ID_TITLE).innerHTML =  title\n}\n\nfunction app_createHeader(self, head) {\n\tconst divleft = document.createElement('div')\n\tconst title = document.createElement('span')\n\tconst divright = document.createElement('div')\n\n\n\tconst btnhome = Component.createSvgButton(ICONS.HOME, CLS_BUTTONHEAD, ()=>{\n\t\tapp_showHome(self)\n\t})\n\n\n\tconst btnmenu = Component.createSvgButton(ICONS.MENU, CLS_BUTTONHEAD, ()=>{\n\t\tapp_showMenu(self)\n\t})\n\n\n\n\tdivleft.appendChild(btnhome)\n\tdivright.appendChild(btnmenu)\n\n\n\tif (!Component.isInContainer()) {\n\t\t// jika tidak di dalam container,  \n\t\t// sembunyikan tombol home dan menu\n\t\tbtnhome.classList.add('hidden')\n\t\tbtnmenu.classList.add('hidden')\n\t} \n\n\n\ttitle.id = ID_TITLE\n\ttitle.innerHTML = 'loading ...'\n\n\thead.appendChild(divleft)\n\thead.appendChild(title)\n\thead.appendChild(divright)\n}\n\nfunction app_createFooter(self, footer) {\n\tfooter.innerHTML = 'empty footer content'\n}\n\n\nfunction app_showFooter(self, show) {\n\tconst main = self.Nodes.Main\n\tconst footer = self.Nodes.Footer\n\tif (show) {\n\t\tmain.setAttribute(ATTR_WITHFOOTER, '')\n\t\tfooter.classList.remove('hidden')\n\t} else {\n\t\tmain.removeAttribute(ATTR_WITHFOOTER)\n\t\tfooter.classList.add('hidden')\n\t}\n}\n\nfunction app_showMenu(self) {\n\twindow.parent.postMessage({\n\t\taction: Component.ACTION_SHOWMENU\n\t}, '*')\n}\n\nfunction app_showHome(self) {\n\twindow.parent.postMessage({\n\t\taction: Component.ACTION_SHOWHOME\n\t}, '*')\t\n}\n\n","import Section from './Section.mjs'\n\nconst EVT_SECTIONSHOWING = 'sectionshowing'\n\nconst SectionShowingEvent = (data) => { return new CustomEvent(EVT_SECTIONSHOWING, data) }\n\n\nexport default class SectionCarousell {\n\t#items = {}\n\t#listener = new EventTarget()\n\t#currentsection \n\t#iconUrl\n\t#firstSection\n\n\tstatic get EVT_SECTIONSHOWING() { return EVT_SECTIONSHOWING }\n\n\tconstructor(el) {\n\t\tscar_Construct(this, el)\n\t}\n\n\tget Items() { return this.#items}\n\tget Listener() { return this.#listener }\n\tget CurrentSection() { return this.#currentsection }\n\tget IconUrl() { return this.#iconUrl }\n\n\taddEventListener(eventname, callback) {\n\t\tthis.Listener.addEventListener(eventname, callback)\n\t}\t\n\n\tsetCurrentSection(section) {\n\t\tthis.#currentsection = section\n\t}\n\n\n\tsetFirstSection(section) {\n\t\tthis.#firstSection = section\n\t}\n\n\tsetIconUrl(iconUrl) {\n\t\tthis.#iconUrl = iconUrl\n\t\tthis.#firstSection.setIconUrl(iconUrl)\n\t}\n\n\tdispatchSectionShowing(currSection, commingSection) {\n\t\tthis.Listener.dispatchEvent(SectionShowingEvent({\n\t\t\t// currSection: currSection,\n\t\t\t// commingSection: commingSection,\n\t\t\tdetail: {\n\t\t\t\tcurrSection: currSection,\n\t\t\t\tcommingSection: commingSection,\n\t\t\t}\n\t\t}))\n\t}\n}\n\nfunction scar_Construct(self, el) {\n\n\tel.classList.add('fgta5-carousellcontainer')\n\n\t// ambil semua section yang terdapat di element\n\tconst nodes = el.querySelectorAll('section[class=\"fgta5-carousell\"]') \n\tlet i = 0;\n\tfor (let node of nodes) {\n\t\tconst section = new Section(node, {\n\t\t\tindex: i,\n\t\t\tcarousell: self,\n\t\t\tfn_getActiveSection: ()=>{\n\t\t\t\treturn scar_getActiveSection(self, el)\n\t\t\t}\n\t\t})\n\t\tconst name = section.Name\n\t\t\n\t\tif (i==0) {\n\t\t\t// set first section\n\t\t\tself.setFirstSection(section)\n\t\t}\n\n\t\tif (self.CurrentSection==null) {\n\t\t\tself.setCurrentSection(section)\n\t\t}\n\n\t\t// masukkan panel ini ke items\n\t\tself.Items[name] = section\n\t\t++i\n\t}\n}\n\n\nfunction scar_getActiveSection(self, el) {\n\t// ambil section yang sedang aktif yang ada di el\n\tconst cs = el.querySelector(`section[${Section.ATTR_ACTIVE}]`)\n\n\t// name dari section yang aktif\n\tconst name = cs.getAttribute('name')\n\n\t// kembalikan object section yang saat ini aktif\n\treturn self.Items[name]\n}","export default class Dialog extends EventTarget{\n\t\n\t#element\n\tconstructor(id, args={}) {\n\t\tsuper()\n\t\tconst el = document.getElementById(id)\n\t\tif (el==null) {\n\t\t\tconsole.error(`element dengan id: '$id' tidak ditemukan di halaman`)\n\t\t}\n\n\t\tthis.#element = el\n\t\tdlg_constructor(this, args)\n\n\t}\n\tget element() { return this.#element }\n\n\n\tasync dispatchCancelableEvent(event) {\n\t\tconst listeners = this._getListeners(event.type);\n\t\tfor (const listener of listeners) {\n\t\tawait listener(event);\n\t\tif (event.defaultPrevented) break;\n\t\t}\n\t\treturn event.defaultPrevented;\n\t}\n\n\t_getListeners(type) {\n\t\t// Hack: we need to track listeners manually\n\t\treturn this._listeners?.[type] || [];\n\t}\n\n\taddAsyncEventListener(type, callback) {\n\t\tif (!this._listeners) this._listeners = {};\n\t\tif (!this._listeners[type]) this._listeners[type] = [];\n\t\tthis._listeners[type].push(callback);\n\t}\n\n\n\n\tasync show() {\n\t\tconsole.log('showing modal dialog')\n\t\tconst self = this \n\t\tconst element = this.#element\n\n\t\tvar showingEvent = new Event('showing', {});\n\t\tawait self.dispatchCancelableEvent(showingEvent);\n\n\t\telement.showModal();\n\t\telement.setAttribute('showed', true)\n\n\t\treturn new Promise((resolve)=>{\n\t\t\tself.btnOk.onclick = async (evt) => {\n\t\t\t\tconsole.log('btnOk click')\n\n\t\t\t\tvar btnOkEvent = new Event('ok', { cancelable: true });\n\t\t\t\tbtnOkEvent.result = {}\n\t\t\t\tvar canceled = await self.dispatchCancelableEvent(btnOkEvent);\n\t\t\t\tif (canceled) {\n\t\t\t\t\tconsole.log('dialog invalid, and was canceled');\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.close()\n\t\t\t\tresolve(btnOkEvent.result)\n\t\t\t}\n\n\t\t\tself.btnCancel.onclick = (evt) => {\n\t\t\t\tconsole.log('btnCancel click')\n\t\t\t\tself.close()\n\t\t\t\tresolve(null)\n\t\t\t}\n\t\t})\n\t}\n\n\tclose() {\n\t\tconst self = this \n\t\tconst element = this.#element\n\t\telement.close();\n\n\t\t// hapus semua listener button\n\t\tself.btnOk.onclick = null\n\t\tself.btnCancel.onclick = null\n\t}\n\n}\n\nfunction dlg_constructor(self, args) {\n\tconst element = self.element\n\t\n\t// buat container untuk content dari dialog\n\tconst container = document.createElement('div');\n\tcontainer.classList.add('fgta5-dialogbox-container');\n\n\t// pindahkan semua element di dialog ke dalam container\n\twhile (element.firstChild) {\n\t\tcontainer.appendChild(element.firstChild);\n\t}\n\telement.appendChild(container);\n\n\t// tambahkan title apabila diperlukan\n\tif (args.title!=null) {\n\t\tconst header = document.createElement('div')\n\t\theader.innerHTML = args.title\n\t\telement.prepend(header)\n\t}\n\n\t// tambahkan footer untuk tombol tutup dan cancel\n\tconst footer = document.createElement('div')\n\tself.btnOk = document.createElement('button')\n\tself.btnCancel = document.createElement('button')\n\n\tself.btnOk.innerHTML = 'Ok'\n\tself.btnCancel.innerHTML = 'Cancel'\n\n\tfooter.appendChild(self.btnOk)\n\tfooter.appendChild(self.btnCancel)\n\n\telement.appendChild(footer)\n\t\n}\n\n","export function getInvalidMessage(name, input, defaultMessage) {\n\tvar msg = input.getAttribute(`invalid-message-${name}`);\n\tif (msg == null || msg === '') {\n\t\tmsg = defaultMessage;\n\t}\n\treturn msg;\n}\n\n\nconst customValidator = {}\n\nexport function getCustomValidator(name) {\n\treturn customValidator[name]\n}\n\nexport function addCustomValidator(name, fn) {\n\tcustomValidator[name] = fn\n}\n\n\n\n\nexport function required(value) {\n\tif (value === null || value === undefined || value === '') {\n\t\treturn false;\t\t\n\t}\n\treturn true;\n}\n\nexport function valueIs(value, data) {\n\tconst fixedStr = data.replace(/'/g, '\"');\n\tconst arrValid = JSON.parse(fixedStr);\n\tif (!arrValid.includes(value)) {\n\t\treturn false\n\t}\n\n\treturn true\n\t\n}\n\n\nexport function minlength(value, minLength) {\n\tif (minLength == null || minLength === 0) {\n\t\treturn true; // no minimum length specified, so always valid\n\t}\n\tif (value == null || value.length < minLength) {\n\t\treturn false; // value is too short\n\t}\n\treturn true; // value meets the minimum length requirement\n}\n\nexport function maxlength(value, maxLength) {\n\tif (maxLength == null || maxLength === 0) {\n\t\treturn true; // no maximum length specified, so always valid\n\t}\n\tif (value == null || value.length > maxLength) {\n\t\treturn false; // value is too long\n\t}\n\treturn true; // value meets the maximum length requirement\n}\n\nexport function pattern(value, strpattern) {\n\treturn true; // TODO: implement pattern validation\n}\n\nexport function email(value, minLength) {\n\treturn /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/.test(value);\n}\n\nexport function min(value, minValue) {\n\tif (minValue == null || minValue === 0) {\n\t\treturn true; // no minimum value specified, so always valid\n\t}\n\tif (value == null || value < minValue) {\n\t\treturn false; // value is less than minimum\n\t}\n\treturn true; // value meets the minimum requirement\n}\n\nexport function max(value, maxValue) {\n\tif (maxValue == null || maxValue === 0) {\n\t\treturn true; // no maximum value specified, so always valid\n\t}\n\tif (value == null || value > maxValue) {\n\t\treturn false; // value is greater than maximum\n\t}\n\treturn true; // value meets the maximum requirement\n}\n\n\nfunction parseDate(value, boundaryDate) {\n\tvar dtparsed = new Date(value)\n\tvar dt = new Date(dtparsed.getFullYear(), dtparsed.getMonth(), dtparsed.getDate())\n\tvar boundary = new Date(boundaryDate.getFullYear(), boundaryDate.getMonth(), boundaryDate.getDate())\n\treturn {\n\t\tdt: dt,\n\t\tboundary: boundary\n\t}\n}\n\nexport function mindate(value, minDate) {\n\tvar {dt, boundary} = parseDate(value, minDate)\n\tif (dt<boundary) {\n\t\treturn false\n\t} else {\n\t\treturn true\n\t}\n}\n\nexport function maxdate(value, maxDate) {\n\tvar {dt, boundary} = parseDate(value, maxDate)\n\tif (dt>boundary) {\n\t\treturn false\n\t} else {\n\t\treturn true\n\t}\n\t\n}\n\n\nexport function mintime(value, minTime) {\n\tif (value<minTime) {\n\t\treturn false\n\t} else {\n\t\treturn true\n\t}\n}\n\nexport function maxtime(value, maxTime) {\n\tif (value>maxTime) {\n\t\treturn false\n\t} else {\n\t\treturn true\n\t}\n}","import Component from './components/Component.mjs'\nimport Form from './components/Form.mjs'\nimport Button from './components/Button.mjs'\nimport {MessageBox, MessageBoxButton} from './components/MessageBox.mjs'\nimport Modal from './components/Modal.mjs'\nimport Textbox from './components/Textbox.mjs'\nimport Numberbox from './components/Numberbox.mjs'\nimport Checkbox from './components/Checkbox.mjs'\nimport Datepicker from './components/Datepicker.mjs'\nimport Timepicker from './components/Timepicker.mjs'\nimport Combobox from './components/Combobox.mjs'\nimport Filebox from './components/Filebox.mjs'\nimport Dataloader from './components/Dataloader.mjs'\nimport Gridview from './components/Gridview.mjs'\nimport AppManager from './components/AppManager.mjs'\nimport Application from './components/Application.mjs'\nimport ModuleData from './components/ModuleData.mjs'\nimport Section from './components/Section.mjs'\nimport SectionCarousell from './components/SectionCarousell.mjs'\nimport Icons from './components/Icons.mjs'\nimport ActionButton from './components/ActionButton.mjs'\nimport Dialog from './components/Dialog.mjs'\nimport ApiEndpoint from './components/ApiEndPoint.mjs'\n\nimport * as Validators from './components/Validators.mjs';\n\n\n\n\nconst fgta5 = {\n\tComponent: Component,\n\tForm: Form,\n\tButton: Button,\n\tTextbox: Textbox,\n\tNumberbox: Numberbox,\n\tCheckbox: Checkbox,\n\tDatepicker: Datepicker,\n\tTimepicker: Timepicker,\n\tCombobox: Combobox,\n\tFilebox: Filebox,\n\tMessageBox: MessageBox,\n\tMessageBoxButton: MessageBoxButton,\n\tModal: Modal,\n\tDataloader: Dataloader,\n\tGridview: Gridview,\n\tAppManager: AppManager,\n\tApplication: Application,\n\tModuleData: ModuleData,\n\tSection: Section,\n\tSectionCarousell: SectionCarousell,\n\tIcons: Icons,\n\tActionButton: ActionButton,\n\tDialog: Dialog,\n\tApiEndpoint: ApiEndpoint\n}\n\n\n// install to window.$validators\nif (window.$validators === undefined) {\n\twindow.$validators = Validators;\n} else {\n\tObject.assign(window.$validators, Validators);\n}\n\n// install to window.$fgta5\nif (window.$fgta5===undefined || window.$fgta5===null) {\n\twindow.$fgta5 =  fgta5\n} else {\n\tObject.assign(window.$fgta5, fgta5)\n}\n\n\nexport default fgta5;\n\n\n\n\n\n\n\n\n\n","import Component from \"./Component.mjs\"\n\nexport default class Button extends Component {\n\tconstructor(id) {\n\t\tsuper(id)\n\t\tbtn_construct(this, id)\n\t}\n\n\t#_disabled = false\n\tget disabled() { return this.#_disabled }\n\tset disabled(v) {\n\t\tthis.#_disabled = v\n\t\tbtn_setDisabled(this, v)\n\t}\n\n\taddEventListener(event, callback) {\n\t\tthis.Element.addEventListener(event, callback)\n\t}\n\n\tclick() {\n\t\tthis.Element.click()\n\t}\n\n}\n\nfunction btn_construct(self, id) {\n\t// console.log(`construct button ${id}`)\n\tself.Element.classList.add('fgta5-button')\n\tself.Element.setAttribute('type', 'button') // tambahkan attribut type=button untuk menghindari trigger button click saat tombol enter ditekan \n}\n\nfunction btn_setDisabled(self, disabled) {\n\tself.Element.disabled = disabled\n}","export default class Dataloader {\n\n#controller;\n\n\tconstructor() {\n\t\tthis.#controller = new AbortController();\n\t}\n\n\tabort() {\n\t\tthis.#controller.abort();\n\t}\n\n\tdispose() {\n\t\t\n\t}\n\n\tasync load(url, options, loadedCallback) {\n\t\tconst signal = this.#controller.signal;\n\n\t\tif (options==null) {\n\t\t\toptions={};\n\t\t}\n\n\t\tconst opt = Object.assign({ signal }, options);\n\t\ttry {\n\t\t\tconst response = await fetch(url, opt);\n\t\t\tif (!response.ok) {\n\t\t\t\tconst status = response.status\n\t\t\t\tconst statustext = response.statusText\n\t\t\t\tthrow new Error(`${status} ${statustext}: ${options.method} ${url}`)\n\t\t\t}\n\n\t\t\tconst data = await response.json();\n\t\t\tif (typeof loadedCallback == 'function') {\n\t\t\t\ttry {\n\t\t\t\t\tloadedCallback(null, data);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data\n\n\t\t} catch (err) {\n\t\t\tif (err.name === \"AbortError\") {\n\t\t\t\tconsole.log(\"Request dibatalkan!\");\n\t\t\t} else {\n\t\t\t\tif (typeof loadedCallback == 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tloadedCallback(err, null);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow err\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","\nexport default class ActionButton {\n\t\n\t#ids = []\n\t#elements = []\n\tconstructor(id, actionname=null) {\n\t\tthis.Listener = new EventTarget()\n\n\n\t\t// pertama ambil element dengan id. \n\t\t// Jika ada element pertama akan berisi element dengan id tersebut\n\t\t// berukutnya akan dicari element dengan data-action\n\t\tif (id!=null) {\n\t\t\tconst el = document.getElementById(id)\n\t\t\tif (el!=null) {\n\t\t\t\tthis.#elements.push(el)\n\t\t\t} \n\t\t}\n\t\n\t\tif (actionname!=null) {\n\t\t\tconst selector = (id==null) ? `[data-action=\"${actionname}\"]` : `[data-action=\"${actionname}\"]:not(#${id})`\n\t\t\tconst elements = document.querySelectorAll(selector)\n\t\t\tthis.#elements = [...this.#elements, ...Array.from(elements)]\n\t\t}\n\n\n\t\t// setup button yang diasosiasikan untuk action ini\t\t\n\t\tthis.#elements.forEach(element => {\n\n\t\t\t// id\n\t\t\tconst id = element.id\n\t\t\tthis.#ids.push(id) \n\n\t\t\t// disable tab\n\t\t\telement.setAttribute('tabindex', '-1')\n\n\t\t\t// handle default event click, yang berfungsi untuk mengamabkan tombol saat disable / hidden\n\t\t\telement.addEventListener('click', (evt)=>{\n\t\t\t\tif (this.#disabled || this.#hidden) {\n\t\t\t\t\tconsole.warn('action is not allowed!')\n\t\t\t\t\tevt.stopImmediatePropagation()\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t}\n\n\t#disabled = false\n\tget disabled() { return this.#disabled }\n\tset disabled(disable) {\n\t\t\tif (!disable && this.#suspended) {\n\t\t\t\t// jika suspended, tombol tidak bisa dinyalakan\n\t\t\t\tconsole.warn('suspended action button cannot be enabled!', this.#ids)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.#disabled = disable\n\t\t\tthis.#elements.forEach(element => {\n\t\t\t\tif (disable) {\n\t\t\t\t\telement.setAttribute('disabled', true)\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute('disabled')\n\t\t\t\t}\n\t\t\t})\n\t\t\n\t}\n\n\t#hidden = false\n\tisHidden() { return this.#hidden }\n\thide(hidden=true) {\n\t\tthis.#elements.forEach(element => {\n\t\t\tif (hidden) {\n\t\t\t\telement.classList.add('hidden')\n\t\t\t} else {\n\t\t\t\telement.classList.remove('hidden')\n\t\t\t}\n\t\t})\n\t}\n\n\tsetText(text) {\n\t\tthis.#elements.forEach(element => {\n\t\t\telement.innerHTML = text\n\t\t})\n\t}\n\t\n\taddEventListener(event, callback) {\n\t\tthis.#elements.forEach(element => {\n\t\t\telement.addEventListener(event, callback)\n\t\t})\t\t\n\t}\n\n\n\tclick() {\n\t\tif (this.#disabled) {\n\t\t\treturn\n\t\t}\n\t\tthis.#elements[0].click()\n\t}\n\n\n\t#suspended = false\n\tsuspend(s) {\n\t\tif (s) {\n\t\t\tthis.disabled = true\n\t\t} \n\t\tthis.#suspended = s\n\t}\n\n\tisSuspended() {\n\t\treturn this.#suspended\n\t}\n\n\n}\n","export default class ApiEndpoint {\n\n\t#method = 'POST'\n\t#headers = {\n\t\t'Content-Type': 'application/json'\n\t}\t\n\n\t#controller;\n\t#path\n\tconstructor(path) {\n\t\tthis.#controller = new AbortController();\n\t\tthis.#path = path\n\t}\n\n\tget headers() { return this.#headers }\n\n\tget method() {return this.#method }\n\tset method(v) {\n\t\tthis.#method = v\n\t}   \n\n\tabort() {\n\t\tthis.#controller.abort();\n\t}\n\n\tdispose() {\n\t\tthis.#controller = null\n\t}\n\n\tsetHeader(name, value) {\n\t\tthis.#headers[name] = value\n\t}\n\n\tasync execute(args, formData) {\n\t\tconst signal = this.#controller.signal;\n\t\tconst url = this.#path\n\t\tconst method = this.#method\n\t\tconst headers = this.#headers\n\n\t\tif (args==null) {\n\t\t\targs={}\n\t\t}\n\n\t\tlet body\n\t\tif (formData==null) {\n\t\t\tbody = JSON.stringify(args)\n\t\t} else {\n\t\t\tdelete headers['Content-Type'] // fetch akan otomatis set, jika diisi akan error boundary\n\t\t\tformData.append('form-body-jsondata', new Blob(\n\t\t\t\t[JSON.stringify(args)],\n\t\t\t\t{ type: 'application/json' }\n\t\t\t));\n\t\t\tbody = formData\n\t\t}\n\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders,\n\t\t\tbody,\n\t\t\tcredentials: 'include'\n\t\t}\n\n\t\tconst opt = Object.assign({ signal }, options)\n\n\t\ttry {\n\t\t\tconst response = await fetch(url, opt);\n\t\t\tif (!response.ok) {\n\t\t\t\tconst status = response.status\n\t\t\t\tconst statustext = response.statusText\n\t\t\t\tconst text = await response.text();\n\t\t\t\tlet errorMessage = `${status} ${statustext}: ${text}`\n\t\t\t\tif (status==401) {\n\t\t\t\t\t// belum login, hapus session login\n\t\t\t\t\tsessionStorage.removeItem('login');\n\t\t\t\t\tsessionStorage.removeItem('login_nexturl');\n\t\t\t\t\terrorMessage = 'authentication is needed to access resource'\n\t\t\t\t} \n\t\t\t\tconst err = new Error(errorMessage)\n\t\t\t\terr.status = status\n\t\t\t\terr.code = response.code || 1\n\t\t\t\tthrow err\n\t\t\t}\n\n\t\t\tconst res = await response.json();\n\t\t\tif (res.code!=0) {\n\t\t\t\tconst err = new Error(res.message)\n\t\t\t\terr.code = res.code\n\t\t\t\tthrow err\n\t\t\t}\n\n\t\t\treturn res.result \n\t\t} catch (err) {\n\t\t\tif (err.name === \"AbortError\") {\n\t\t\t\tconsole.warn(\"Request dibatalkan!\");\n\t\t\t} else {\n\t\t\t\tthrow err\n\t\t\t}\n\t\t}\n\t}\n}"],"names":["counter","Component","Id","Element","ACTION_SHOWMENU","ACTION_SHOWHOME","ACTION_APPLICATIONLOADED","constructor","id","undefined","console","error","el","document","getElementById","this","createSvgButton","svg","classname","fn_click","btn","createElement","innerHTML","classList","add","setAttribute","addEventListener","evt","comp_createSvgButton","generateId","sleep","ms","Promise","resolve","setTimeout","isMobileDevice","test","navigator","userAgent","isInContainer","window","self","top","Input","super","container","lastvalue","InitialValue","getInputCaption","Listener","EventTarget","Nodes","Container","LastValue","input_construct","_readValidators","type","name","value","v","disabled","placeholder","getAttribute","_form","Form","bindForm","form","_ineditmode","InEditMode","setEditingMode","ineditmode","invalidMessages","InvalidMessages","input","prefix","Array","from","attributes","forEach","attr","startsWith","key","replace","input_readValidators","newData","initialvalue","acceptChanges","input_newData","_setLastValue","removeAttribute","setError","reset","isChanged","log","lasterror","_setLastError","msg","getLastError","errdiv","querySelector","insertBefore","InputWrapper","nextSibling","remove","input_setError","input_setLastValue","getLastValue","getBindingData","binding","validate","vnamereq","Validators","err","input_getErrorValidation","message","fnName","input_validate","_validators","addValidator","fnParams","param","removeValidator","str","clearValidators","readValidators","_setupDescription","description","trim","decrdiv","appendChild","isrequired","isRequired","markAsRequired","r","required","attrname","label","Label","input_markAsRequired","callback","handlers","Handlers","handle","fn","getErrorValidation","validatorData","fnValidate","$validators","getCustomValidator","fnMessage","Error","defmsg","clearTime","dt","setHours","setMinutes","setSeconds","cname","minlength","parseInt","isNaN","maxlength","pattern","min","mindate","Date","mintime","max","maxdate","maxtime","validator","split","i","length","parseFunctionParam","paramString","fnParamsString","join","Number","Textbox","wrapinput","parentNode","style","width","marginTop","marginBottom","marginLeft","marginRight","nonFgtaClasses","filter","className","tabIndex","backgroundColor","charCase","toLowerCase","dispatchEvent","CustomEvent","txt_blur","e","data","cancelable","code","ctrlKey","altKey","shiftKey","srcElement","target","KeyboardEvent","defaultPrevented","preventDefault","txt_construct","txt_getValueCased","txt_SetValue","attrval","txt_setEditingMode","currentvalue","focus","toUpperCase","ChangeEvent","Numberbox","formatterFixed","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","useGrouping","display","Display","precision","step","Math","pow","getPrecission","format","nmb_setDisabled","digitgrouping","num","nmb_displayFocus","detail","invalid","formattedValue","nmb_formatValue","formatted","nmb_displayBlur","maxlegth","inputType","nmb_construct","nmb_markChanged","nmb_setValue","nmb_setEditingMode","nmb_setError","Checkbox","checkboxlabel","createTextNode","replLabel","replaceChild","checked","chk_setDisabled","event","UnCheckedEvent","chk_checkedChanged","chk_construct","chk_getBoolValue","chk_markChanged","chk_setValue","chk_getDisabled","permdisattr","permanentDisabled","chk_setEditingMode","chk_NewData","chk_setLastValue","editmode","button_icon","Datepicker","button","Button","insertAdjacentHTML","dtp_setDisabled","dtp_setDisplay","sender","dtp_markChanged","dtp_changed","dtp_construct","toISOString","isodate","slice","dtp_setValue","inputwrap","dtp_setEditingMode","dtp_Newdata","dtp_setError","dtiso","options","day","month","year","formattedDate","toLocaleDateString","timeRegex","Timepicker","cssclass","cssstyle","tpck_setDisplay","tpck_markChanged","tpck_changed","tpck_construct","tpck_setValue","tpck_setDisabled","tpck_setEditingMode","tpck_setError","tm","SelectingEvent","icon_cbo_button","icon_cbo_close","ATTR_EDITMODE","ATTR_SHOWED","ATTR_REMOVING","ATTR_SELECTED","ATTR_INDEX","Combobox","datalist","dialog","lasttext","Dialog","LastText","cbo_setDisabled","HasStaticOption","searchtext","limit","offset","addRow","text","tr","cbo_createOptionRow","tbody","cbo_search","inputsearch","isWaiting","mask","$fgta5","Modal","createMask","showModal","btnClose","onclick","close","cbo_closed","cbo_buttonClick","head","srccontainer","srcinput","srcbuton","btnnext","click","cbo_resetSelected","table","thead","tfoot","setNext","nextoffset","cbo_createDialog","opt","getElementsByTagName","defaultOption","option","textContent","innerText","idx","rows","count","default","cbo_createStaticOptions","_read","cbo_construct","cbo_SetEditingMode","initialdata","cbo_newData","lastValue","lastText","getLastText","clear","querySelectorAll","t","cbo_setLastValue","setSelected","cbo_markChanged","cbo_setSelected","getDisplayBinding","addOptions","cbo_addOptions","setOptions","cbo_clearOptions","cbo_setOptions","iswaiting","wait","td","cbo_wait","AbortHandler","cbo_markSelected","none","after","cbo_selectRow","changed","SelectedEvent","cbo_userSelectValue","PopulatingEvent","valueselected","row","abortHandler","execute_selecting","prepend","addNoneIfNotRequired","prevselected","index","trs","closest","rowidx","rowindex","insertAdjacentElement","Filebox","downloadLink","DownloadLink","files","flb_markChanged","flb_changed","flb_construct","file","flb_setDisabled","flb_setEditingMode","flb_acceptChanges","flb_Reset","flb_setError","setDisplay","flb_setDisplay","setDownloadLink","linktext","url","flb_setDownloadLink","flb_validate","formLockedEvent","formUnLockedEvent","frm_lock","lock","formEl","Inputs","frm_acceptChanges","frm_getData","changedOnly","primarykey","PrimaryKey","pkBinding","obj","currBinding","bindingdata","iconsCss","info","warning","question","ICON_ERROR","ICON_INFO","ICON_QUESTION","ICON_WARNING","MessageBoxButton","Text","MessageBox","static","Object","freeze","ok","cancel","yes","no","show","config","msgbox_show","async","iconSvg","msgbox_error","msgbox_info","msgbox_warning","confirm","buttons","ButtonOkCancel","msgbox_confirm","removeChild","title","divTitle","iconcss","divIcon","divContent","divButtons","body","createMessageDialog","entries","btnEl","btnOk","CreateModal","modal","Icons","MENU","CLOSE","BACK","ACTION","USER","LOGOUT","SEARCH","SETTING","HOME","TRASH","DIRDEF","UNSORT","SORTASC","SORTDESC","YES","NO","NEWDOCUMENT","PROGRAM","ATTR_ROWSELECTOR","ATTR_AUTONUMBER","ATTR_BINDING","ATTR_SORTING","ATTR_FORMATTER","ATTR_TEXTALIGN","ATTR_ROWSELECTED","ATTR_COLNAME","ATTR_ROWKEY","ATTR_ROWKEYVALUE","ATTR_ROWPROCESSING","ATTR_MAINHEADROW","ATTR_LINENUMBER","TYPE_ROWSELECTOR","TYPE_AUTONUMBER","TYPE_STANDARD","rowRemovingEvent","setAttributeIfNotNull","attrvalue","createCheckbox","chk","span","checkbox","grv_headerCheckboxChange","headchk","Tbody","grv_rowCheckboxChange","Thead","grv_addRow","Key","keyvalue","column","Columns","formatter","textalign","linenumber","grv_getLastLineNumber","grv_cellClick","grv_cellDblClick","func","Formatters","grv_createFunction","grv_rowRender","children","CurrentRow","grv_sort","sorting","th","ICONS","sort","grv_getSort","criteria","Criteria","ths","lastrow","lastlinenumber","expression","match","funcName","args","parsedArgs","map","arg","parseFloat","grv_formatDecimal","grv_formatInteger","grv_formatCheckmark","grv_formatDateIso","grv_formatDateLong","grv_formatDateShort","ModuleData","icon","ICON_DEFAULT","ATTR_NAVSHOWED","ATTR_MODULENAME","ATTR_FAVOURITE","ATTR_OPENEDMODULE","ATTR_CURRENTUSER","ATTR_MENUICONCONTAINER","ATTR_MENUICONIMAGE","ATTR_MENUICONTEXT","ATTR_GRIDAREA","ATTR_SHORTCUT_ICON","ATTR_SHORTCUT_TITLE","ATTR_SHORTCUT_INFO","ATTR_SHORTCUT_CLOSE","ATTR_DRAGOVER","ATTR_LABEL","ATTR_ICON","ATTR_MAINBUTTON","ATTR_DRAGGABLE","CLS_BUTTONMENU","CLS_SHORTCUTBUTTONCLOSE","CLS_HIDDEN","EVT_CLICK","EVT_DBLCLICK","EVT_DRAGSTART","TXT_FAVOURITE","TXT_OPENED","actionEvent","current_dragged_modulename","current_drag_action","appmgr_createHeadButton","appmgr_showMenu","Nav","appmgr_showHome","appmgr_closeMenu","IFrames","appmgr_iframeReOpen","iframe","module","modulename","appmgr_addOpenedModule","appmgr_openModule","iframes","qry","URL","searchParams","append","newframe","onload","contentWindow","postMessage","action","appmgr_iframeLoaded","fetch","then","response","status","src","catch","frames","f","appmgr_createModuleIcon","backgroundImage","clickEventName","openModule","animation","appmgr_createGroupIcon","group","encodeURIComponent","appmgr_populateMenuIcons","icons","parent","appmgr_resetMenu","RootIcons","appmgr_readMenu","node","mi","keyword","push","Modules","groupicons","items","di","border","menuboard","MenuBoard","menureset","MenuResetButton","isbackIcon","unshift","appmgr_searchModule","previousSearch","modules","includes","opened","Opened","shortcut","newshortcut","closebutton","dataTransfer","setData","appmgr_DragModule","stopPropagation","childNodes","hide","appmgr_createOpenedShortcut","appmgr_setAsFavouriteIcon","favourite","trahsbox","TrashBox","trashbutton","getData","CLS_SECTION","ATTR_ACTIVE","ATTR_TITLE","ATTR_TOPBAR","ATTR_BACKBUTTON","EVT_BACKBUTTONCLICK","EVT_SECTIONSHOWING","Section","element","previoussection","carousell","fn_getActiveSection","listener","DIR_LEFT","DIR_RIGHT","Index","Name","Title","PreviousSection","getActiveSection","Carousell","sec_setTitle","topbar","backbutton","fn_ShowNextSection","sectionReturn","direction","sec_backButtonClick","iconDiv","BackButton","sec_construct","fn_callback","currSection","moving","curr","comming","commingSection","setCurrentSection","dispatchSectionShowing","sec_show","setSectionReturn","section","setIconUrl","iconUrl","backgroundSize","backgroundRepeat","backgroundPosition","sec_setIconUrl","eventname","back","CLS_BUTTONHEAD","ID_TITLE","ATTR_WITHFOOTER","app_setTitle","scar_getActiveSection","Items","firstChild","header","footer","btnCancel","dlg_constructor","dispatchCancelableEvent","listeners","_getListeners","_listeners","addAsyncEventListener","showingEvent","Event","btnOkEvent","result","customValidator","parseDate","boundaryDate","dtparsed","getFullYear","getMonth","getDate","boundary","minLength","defaultMessage","maxValue","maxDate","maxLength","maxTime","minValue","minDate","minTime","strpattern","fixedStr","JSON","parse","fgta5","_locked","_autoid","_primarykey","readAttributes","inputs","fgtacomp","frm_construct","AutoID","isLocked","isnew","isNew","setAsNewData","frm_reset","frm_clear","frm_isChanged","lastError","getPrimaryInput","pk","frm_newData","render","frm_render","isValid","frm_validate","getFiles","keys","frm_getFiles","getDataChanged","originalData","displayname","frm_setData","getOriginalData","acceptInput","prevFocusedElement","activeElement","blur","locked","autoid","_disabled","content","infoContainer","spinner","infoText","setText","modal_createMask","createProgress","IsError","prgBarErrIcon","prgBarContainer","prgBar","prgMsg","setProgress","progress","height","finish","completed","buttonClose","div","textAlign","modal_createProgress","Dataloader","controller","AbortController","abort","dispose","load","loadedCallback","signal","assign","statustext","statusText","method","json","Gridview","tagName","tbl","Table","Tfoot","headrow","columns","rowselector","autonumber","html","grv_getColumns","setColumnData","setKey","sortbtn","grv_setupHeader","grv_construct","addRows","grv_addRows","updateRow","tds","grv_updateRow","scrollToFooter","scrollIntoView","behavior","columndata","rowRender","removeSelected","onFinished","chks","MarkProcessing","p","handled","removeRow","grv_removeSelected","grv_removeRow","getSelected","selected","grv_getSelected","hasRowPendingProcess","nextoffsetcontainer","next","getSort","colspan","cells","grv_setNext","setCriteria","currentRow","rect","getBoundingClientRect","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","isElementInViewport","block","grv_setCurentRow","previousRecord","previousElementSibling","grv_previousRecord","nextRecord","nextElementSibling","grv_nextRecord","AppManager","main","nav","currentuser","btnmenu","before","appmgr_createOpenedBoard","MenuFooter","ProfileButton","LogoutButton","menuhead","btnmenureset","divcenter","btnclose","toppanel","toppanel_left","toppanel_center","toppanel_right","txtsearch","btnsearch","btnlogout","divleft","scrollTop","btnhome","btnpreference","user","User","appmgr_openPreference","menusearch","btnprofile","appmgr_createMenuBoard","Head","Main","Favourite","Currentuser","appmgr_construct","nexturl","location","href","nextmodule","history","pushState","setTitle","appmgr_setTitle","setMenu","appmgr_setMenu","showMenu","setFavourite","trahscontainer","trashbox","trashicon","trashlabel","appmgr_FavouriteDragOver","appmgr_FavouriteDragLeave","exist","addToFavouriteEvent","appmgr_FavouriteDrop","appmgr_setFavourite","userdata","setUser","openProfileEvent","appmgr_profileClick","logoutEvent","appmgr_logout","appmgr_setUser","Application","divright","app_createHeader","app_createFooter","Footer","app_construct","showFooter","app_showFooter","SectionCarousell","currentsection","firstSection","nodes","setFirstSection","CurrentSection","scar_Construct","IconUrl","ActionButton","ids","elements","actionname","selector","hidden","warn","stopImmediatePropagation","disable","suspended","isHidden","suspend","s","isSuspended","ApiEndpoint","headers","path","setHeader","execute","formData","stringify","Blob","credentials","errorMessage","sessionStorage","removeItem","res"],"mappings":"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"}